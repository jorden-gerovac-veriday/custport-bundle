{"version":3,"sources":["i18n.js","auth/KeycloakContext.js","components/__types__/ref.js","auth/withKeycloak.js","api/helpers.js","api/customers.js","components/Admin/AddCustomerModal.js","api/partners.js","api/projects.js","components/Admin/AddPartnerModal.js","components/Admin/AddProjectModal.js","auth/KeycloakViews.js","components/Admin/EditProjectModal.js","components/Customer/customDataTable.js","components/Customer/customerDetails.js","components/Admin/EditCustomerModal.js","components/Customer/CustomerAccordian.js","components/Admin/AdminDashboard.js","helpers/widgetEvents.js","custom-elements/widgetEventTypes.js","custom-elements/AdminDashboardElement.js","api/tickets.js","api/ticketingsystem.js","components/SubscriptionDetails/TicketList.js","api/subscriptions.js","api/portalusers.js","components/Admin/EditSubscriptionModal.js","components/SubscriptionDetails/subscription.js","api/keycloak.js","components/App.js","custom-elements/AdminAddCustomerElement.js","components/Admin/RoleCheck.js","custom-elements/AdminRoleCheckElement.js","custom-elements/CustomDataTableElement.js","custom-elements/CustomerDetailsElement.js","custom-elements/SubscriptionElement.js","components/Forms/openTicket.js","custom-elements/FormsOpenTicketElement.js","components/Navigation/Navigation.js","custom-elements/NavigationElement.js","components/Forms/enhancementRequest.js","custom-elements/FormsEnhancementRequestElement.js","custom-elements/AppElement.js","custom-elements/TicketListElement.js","components/Admin/Configuration/TicketingSystem.js","api/productVersion.js","components/Admin/AddProductVersionModal.js","components/Admin/EditVersionModal.js","components/Admin/DeleteModal.js","components/Admin/Configuration/ProductVersion.js","components/Admin/Configuration/AdminConfiguration.js","custom-elements/AdminConfigurationElement.js","custom-elements/OpenTicketElement.js","components/Admin/ManageUser/AssignUser.js","components/Admin/ManageUser/DeleteUser.js","components/Admin/ManageUser/ManageUser.js","custom-elements/ManageUserElement.js","custom-elements/AssignUserElement.js","custom-elements/DeleteUserElement.js","custom-elements/TicketingSystemElement.js","custom-elements/ProductVersionElement.js","components/Forms/SubscriptionForm.js","custom-elements/SubscriptionFormElement.js"],"names":["i18n","defaultLocale","locale","fallbacks","translations","en","it","setLocale","KeycloakContext","PropTypes","oneOfType","func","shape","current","elementType","React","createContext","withKeycloak","WrappedComponent","WithKeycloakComponent","renderWrappedComponent","value","props","forwardedRef","rest","ref","keycloak","Consumer","this","Component","defaultProps","forwardRef","getKeycloakToken","window","entando","authenticated","token","hasKeycloakClientRole","clientRole","resourceAccess","client","item","roles","includes","getDefaultOptions","headers","Headers","Authorization","getDefaultKeycloakOptions","getUrl","url","request","options","a","fetch","response","has","parseInt","get","status","data","json","Promise","reject","Error","statusText","resource","apiCustomersGet","serviceUrl","method","apiCustomerGet","id","apiCustomerPost","customer","body","JSON","stringify","apiCustomerPut","apiGetCustomersProjects","customerId","apiAddProjectToCustomer","projectId","apiAdminCustomersGet","myResource","apiMyCustomersGet","apiGetMyCustomersProjects","handleChanges","e","input","target","name","setState","handleFormSubmit","handleValidation","state","customerNumber","contactName","contactPhone","contactEmail","notes","customerPost","then","result","submitMsg","t","submitColour","updateCustomerList","catch","err","clearValues","document","querySelector","className","baseState","invalid","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","initialized","addEventListener","ModalWrapper","buttonTriggerText","modalHeading","buttonTriggerClassName","handleSubmit","primaryButtonText","secondaryButtonText","modalLabel","style","color","Form","onSubmit","TextInput","labelText","onChange","invalidText","TextArea","apiPartnerPost","partner","apiProjectsGet","apiProjectGet","apiProjectPost","project","apiProjectPut","apiAddTicketToProject","ticketId","apiAddSubscriptionToProject","subscriptionId","apiAddUserToProject","userId","apiAddPartnerToProject","partnerId","apiGetProjectSubscriptions","apiGetProjectIdNames","apiGetMyProjectIdNames","apiAdminProjectsGet","apiMyProjectsGet","partnerNumber","partnerPost","projectList","prevProps","changedAuth","getProjects","projects","Select","defaultValue","SelectItem","text","Object","keys","allProjects","map","i","description","systemId","trim","alert","projectPost","getAllProjects","customerList","getCustomers","customers","label","allCustomers","AuthenticatedView","children","UnauthenticatedView","projectPut","updateProjectList","modalId","buttonId","getProjectDetails","buttonClassName","CustomTable","fetchData","headerData","header","key","render","DataTable","rows","rowData","getHeaderProps","getTableProps","TableContainer","title","Table","TableHead","TableRow","TableHeader","TableBody","index","projectSubscriptions","TableCell","partners","tickets","sub","to","entandoVersion","String","Date","startDate","toDateString","setMonth","getMonth","lengthInMonths","projectName","href","partnerName","endDate","openTickets","getCustomer","Tile","getCustomerDetails","updateCustomer","getCustomersProjects","AccordionItem","getTime","handleSearch","event","newFilteredState","filter","toLowerCase","filteredCustomers","currentPage","undefined","forceUpdate","customersProjects","role","test","numberOfPages","Math","ceil","Search","placeHolderText","onKeyPress","Accordion","indexOfLastItem","firstIndexOfCurrentPage","PaginationNav","loop","Boolean","page","Number","totalItems","itemsShown","cssClass","subscribeToWidgetEvent","eventType","eventHandler","removeEventListener","KEYCLOAK_EVENT_TYPE","getKeycloakInstance","ATTRIBUTES","AdminDashboardElement","mountPoint","createElement","unsubscribeFromKeycloakEvent","appendChild","getAttribute","ReactDOM","Provider","HTMLElement","customElements","define","jiraResource","apiJiraTicketsGet","organization","apiJiraTicketPost","ticket","apiTicketingSystemDelete","apiTicketingSystemsGet","apiTicketingSystemPost","ticketingsystem","apiTicketingSystemPut","TicketList","ticketingSystems","currentTicketingSystem","console","log","type","priority","createDate","updateDate","creationDate","openTicket","apiSubscriptionGet","apiProjectSubscriptionPost","projectSubscriptionCreation","apiProjectSubscriptionPut","apiGetMySubscription","apiRenewSubscription","projectSubscriptionRenew","apiUserDelete","apiUsersGet","apiUserPost","user","apiUserGetByUsername","username","subscriptionRequest","projectSubscription","subscription","level","moment","format","subscriptionPut","updateSubscription","handleStartDateChange","date","toISOString","isNumeric","match","str","isNaN","parseFloat","getSubscriptionDetails","disabled","DatePicker","dateFormat","datePickerType","DatePickerInput","placeholder","subscriptionData","getSubscription","loading","users","params","license","apiKeycloakUserGet","client_id","password","grant_type","path","AdminAddCustomerElement","RoleCheck","roleType","renderForm","AdminRoleCheckElement","CustomDataTableElement","CustomerDetailsElement","SubscriptionElement","parse","preventDefault","fetchProjectSubscription","createTicket","res","error","types","priorities","ticketingSystem","fetchProjects","getTicketingSystem","Button","kind","tabIndex","FormsOpenTicketElement","Navigation","NavigationElement","EnhancementRequest","ticketNo","customerName","openedBy","enhancementDescription","FormsEnhancementRequestElement","hidden","paginationMode","disableDefaultEventHandler","AppElement","Locale","TicketListCustomerElement","createTicketingSystem","updateTicketingSystem","ticketingSystemType","serviceAccount","serviceAccountSecret","getTicketingSystems","confirm","deleteTicketingSystem","onClick","handleDelete","apiProductVersionsGet","apiProductVersionGet","versionId","apiUpdateProductVersionsStatus","apiProductVersionPost","productVersion","apiProductVersionPut","apiProductVersionDelete","addProductVersion","updateProductVersions","handleEndDateChange","version","versionPut","getVersionDetails","ProductVersion","handleDeleteVersion","deleteVersion","getProductVersions","productVersions","ToggleSmall","handleToggleChange","aria-label","defaultToggled","display","EditVersionModal","marginTop","fill","entVersion","adminConfig","content","class","toString","AdminConfigurationElement","OpenTicketElement","mapKeycloakUserEmails","keycloakUsers","usernameEmailMap","Map","forEach","keycloakUser","set","email","assignUser","handleFormValidation","assignUserToProject","getPortalUserId","portalUserId","portalUserApi","portalUser","message","createPortalUser","authServerUrl","keycloakUrl","userList","projectIdsNames","size","unshift","setupFormComponents","handleRemoveUser","portalUsers","updatedPortalUsers","delete","handleUserDisplay","displayUsers","filterText","handleMapFormatting","portalUsernames","values","dateAdded","createdTimestamp","toLocaleString","month","getFullYear","userAccess","row","cells","cell","userFunctionality","open","ManageUserElement","AssignUserElement","DeleteUserElement","TicketingSystemElement","ProductVersionElement","subscriptionLevel","GOLD","PLATINUM","subscriptionStatus","subscriptionTypes","submitSuccess","submitError","subscriptionType","newSubscription","renewSubscription","subscriptionLength","entandoVersionId","selectedProjectId","subscriptionLevelList","entries","versionList","formInputs","formComponents","isAdmin","createFormMessage","subMessageKey","successErrorMessage","required","SubsciptionFormElement"],"mappings":"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","file":"static/js/main.46dac37b.chunk.js","sourcesContent":["import i18n from 'i18n-js';\r\n\r\nimport en from './i18n/locales/en.json';\r\nimport it from './i18n/locales/it.json';\r\n\r\ni18n.defaultLocale = 'en';\r\ni18n.locale = 'en';\r\ni18n.fallbacks = true;\r\ni18n.translations = { en, it };\r\n\r\nexport const setLocale = (locale) => {\r\n    i18n.locale = locale;\r\n}\r\n\r\nexport default i18n;","import React from 'react';\r\n\r\nconst KeycloakContext = React.createContext(null);\r\n\r\nexport default KeycloakContext;\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOfType([\r\n  PropTypes.func,\r\n  PropTypes.shape({ current: PropTypes.elementType }),\r\n  PropTypes.shape(null),\r\n]);\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from '../components/__types__/ref';\r\nimport KeycloakContext from './KeycloakContext';\r\n\r\nexport default function withKeycloak(WrappedComponent) {\r\n  class WithKeycloakComponent extends Component {\r\n    renderWrappedComponent = value => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\r\n    };\r\n\r\n    render() {\r\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  \r\n  WithKeycloakComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n  \r\n\r\n  WithKeycloakComponent.defaultProps = {\r\n    forwardedRef: () => {},\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\r\n}\r\n","export const getKeycloakToken = () => {\r\n  if (\r\n    window &&\r\n    window.entando &&\r\n    window.entando.keycloak &&\r\n    window.entando.keycloak.authenticated\r\n  ) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const hasKeycloakClientRole = (clientRole) => {\r\n  if (getKeycloakToken()) {\r\n    const { resourceAccess } = window.entando.keycloak;\r\n    if (resourceAccess) {\r\n      for (const client in resourceAccess) {\r\n        const item = resourceAccess[client];\r\n        if (item.roles && item.roles.includes(clientRole)) {\r\n          // console.debug(\"Found role {} with client {} \", clientRole, client);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/json'\r\n  }),\r\n});\r\n\r\nexport const getDefaultKeycloakOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/x-www-form-urlencoded'\r\n  }),\r\n});\r\n\r\nexport const getUrl = (url) => {\r\n  return `${url}`;\r\n};\r\n\r\nexport const request = async (url, options) => {\r\n  const response = await fetch(url, options);\r\n\r\n  const headers = {\r\n    ...(response.headers.has('X-Total-Count')\r\n      ? { 'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10) }\r\n      : {}),\r\n  };\r\n\r\n  if (response.status === 204) {\r\n    return { data: '', status: response.status};\r\n  }\r\n\r\n  return response.status >= 200 && response.status < 300\r\n    ? { data: await response.json(), headers, status: response.status }\r\n    : Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/customers';\r\n\r\nexport const apiCustomersDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerGet = async (serviceUrl, id) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGetForAdminDashboard = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/all`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPost = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: customer ? JSON.stringify(customer) : null\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPut = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: customer ? JSON.stringify(customer) : null\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddProjectToCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/customers/admin';\r\nexport const apiAdminCustomersGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/customers/mycustomers';\r\nexport const apiMyCustomersGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerPost } from '../../api/customers';\r\n\r\nclass AddCustomerModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: '',\r\n            customerNumber: '',\r\n            contactName: '',\r\n            contactPhone: '',\r\n            contactEmail: '',\r\n            notes: '',\r\n            invalid: {},\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n\r\n        this.baseState = this.state\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if (this.state.name === '') {\r\n            formIsValid = false;\r\n            invalid['name'] = true;\r\n        }\r\n\r\n        if (this.state.customerNumber === '') {\r\n            formIsValid = false;\r\n            invalid['customerNumber'] = true;\r\n        }\r\n\r\n        if (typeof this.state.contactEmail !== 'undefined') {\r\n            let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n            let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n            if (\r\n                !(\r\n                    lastAtPos < lastDotPos &&\r\n                    lastAtPos > 0 &&\r\n                    this.state.contactEmail.indexOf('@@') == -1 &&\r\n                    lastDotPos > 2 &&\r\n                    this.state.contactEmail.length - lastDotPos > 2\r\n                )\r\n            ) {\r\n                formIsValid = false;\r\n                invalid['contactEmail'] = true;\r\n            }\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    async customerPost(customer) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            return await apiCustomerPost(this.props.serviceUrl, customer);\r\n        }\r\n    }\r\n\r\n\r\n    handleFormSubmit = e => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const customer = {\r\n                name: this.state.name,\r\n                customerNumber: this.state.customerNumber,\r\n                contactName: this.state.contactName,\r\n                contactPhone: this.state.contactPhone,\r\n                contactEmail: this.state.contactEmail,\r\n                notes: this.state.notes\r\n              };\r\n\r\n            this.customerPost(customer).then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.added'),\r\n                    submitColour: '#24a148'\r\n                })\r\n                this.props.updateCustomerList();\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n        //this.props.testFunction();\r\n        //super.componentDidMount();\r\n    };\r\n\r\n    clearValues = () => {\r\n        const customerModalElement = document.querySelector('#modal-form-customer');\r\n        if(!customerModalElement.className.includes(\"is-visible\")) {\r\n            this.setState(this.baseState);\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const modalOpenButton = document.querySelector('.add-customer-button');\r\n        modalOpenButton.addEventListener(\"click\", this.clearValues, false);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.addCustomer')}\r\n                modalHeading={i18n.t('adminDashboard.addCustomer.title')}\r\n                buttonTriggerClassName=\"add-customer bx--btn bx--btn--tertiary add-customer-button\"\r\n                className=\"modal-form\"\r\n                id=\"modal-form-customer\"\r\n                handleSubmit={this.handleFormSubmit}\r\n                primaryButtonText={i18n.t('modalText.save')}\r\n                secondaryButtonText={i18n.t('modalText.cancel')}\r\n                modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n            >\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput\r\n                            name=\"name\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerName') + \" *\"}\r\n                            value={this.state.name}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['name']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"customerNumber\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + \" *\"}\r\n                            value={this.state.customerNumber}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['customerNumber']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactName\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n                            value={this.state.contactName}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactPhone\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n                            value={this.state.contactPhone}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactEmail\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + \" *\"}\r\n                            value={this.state.contactEmail}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.email')}\r\n                            invalid={this.state.invalid['contactEmail']}\r\n                        />\r\n                        <TextArea\r\n                            name=\"notes\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n                            value={this.state.notes}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                    </Form>\r\n                </div>\r\n            </ModalWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(AddCustomerModal);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/partners';\r\n\r\nexport const apiPartnerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnersGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnerPost = async (serviceUrl, partner) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: partner ? JSON.stringify(partner) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/projects';\r\n\r\nexport const apiProjectsDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectsGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectGet = async (serviceUrl, id) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}/${id}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectsGetForCustomer = async (serviceUrl, customerNumber) => {\r\n  const url = `${serviceUrl}/${resource}/subscriptions/customer/${customerNumber}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectPost = async (serviceUrl, project) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: project ? JSON.stringify(project) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectPut = async (serviceUrl, project) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: project ? JSON.stringify(project) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddTicketToProject = async (serviceUrl, projectId, ticketId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/${ticketId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddSubscriptionToProject = async (serviceUrl, projectId, subscriptionId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddUserToProject = async (serviceUrl, projectId, userId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddPartnerToProject = async (serviceUrl, projectId, partnerId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectsUsers = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectsTickets = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectSubscriptions = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectIdNames = async (serviceUrl) => {\r\n  const url = `${serviceUrl}/${resource}/nameId/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyProjectIdNames = async (serviceUrl) => {\r\n  const url = `${serviceUrl}/${resource}/myprojects/nameId/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/projects/admin';\r\nexport const apiAdminProjectsGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/projects/myprojects';\r\nexport const apiMyProjectsGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiPartnerPost } from '../../api/partners';\r\nimport { apiProjectPost, apiProjectsGet, apiAddPartnerToProject } from '../../api/projects';\r\n\r\nclass AddPartnerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projectList: {},\r\n      projectId: '',\r\n      name: '',\r\n      partnerNumber: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black'\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getProjects();\r\n    }\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //project\r\n    if (this.state.projectId === '' || this.state.projectId === 'project-list') {\r\n      formIsValid = false;\r\n      invalid['projectId'] = true;\r\n    }\r\n\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (this.state.partnerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['partnerNumber'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getProjects() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const projects = await apiProjectsGet(this.props.serviceUrl);\r\n      this.setState({ projectList: projects });\r\n    }\r\n  }\r\n\r\n  async partnerPost(partner) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiPartnerPost(this.props.serviceUrl, partner);\r\n      return await apiAddPartnerToProject(this.props.serviceUrl, this.state.projectId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const partner = {\r\n        name: this.state.name,\r\n        partnerNumber: this.state.partnerNumber,\r\n        notes: this.state.notes\r\n      };\r\n      this.partnerPost(partner).then(result => {\r\n        this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148'\r\n        })\r\n        this.props.updateCustomerList();\r\n      }).catch(err => {\r\n          this.setState({\r\n              submitMsg: i18n.t('submitMessages.error'),\r\n              submitColour: '#da1e28'\r\n          })\r\n      });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const partnerModalElement = document.querySelector('#modal-form-partner');\r\n    if(!partnerModalElement.className.includes(\"is-visible\")) {\r\n      this.setState({\r\n        projectId: '',\r\n        name: '',\r\n        partnerNumber: '',\r\n        notes: '',\r\n        invalid: {},\r\n        submitMsg: '',\r\n        submitColour: 'black'\r\n      })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getProjects();\r\n\r\n    const modalOpenButton = document.querySelector('.add-partner-button');\r\n    modalOpenButton.addEventListener(\"click\", this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addPartner')}\r\n        modalHeading={i18n.t('adminDashboard.addPartner.title')}\r\n        buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary add-partner-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-partner\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          {/*<p> {i18n.t('adminDashboard.addPartner.desc')}</p>*/}\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              defaultValue=\"project-list\"\r\n              name=\"projectId\"\r\n              labelText={i18n.t('adminDashboard.addPartner.projectList') + \" *\"}\r\n              value={this.state.projectId}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['projectId']}\r\n            >\r\n              <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\r\n              {Object.keys(this.props.allProjects).length !== 0\r\n                ? this.props.allProjects.map((projectList, i) => (\r\n                    <SelectItem key={i} text={projectList.name} value={projectList.id}>\r\n                      {projectList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addPartner.partnerName') + \" *\"}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"partnerNumber\"\r\n              labelText={i18n.t('adminDashboard.addPartner.partnerNumber') + \" *\"}\r\n              value={this.state.partnerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['partnerNumber']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addPartner.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddPartnerModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectPost, apiProjectsGet } from '../../api/projects';\r\n\r\nclass AddProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projects: {},\r\n      customerList: {},\r\n      customerId: '',\r\n      name: '',\r\n      description: '',\r\n      systemId: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black'\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //customer\r\n    if (this.state.customerId === '' || this.state.customerId === 'customer-list') {\r\n      formIsValid = false;\r\n      invalid['customerId'] = true;\r\n    }\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //description\r\n    if (this.state.description === '') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') == -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  async getAllProjects() {\r\n    const projects = await apiProjectsGet(this.props.serviceUrl);\r\n    this.setState({\r\n      projects: projects.data\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getCustomers() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customers = await apiCustomersGet(this.props.serviceUrl);\r\n      this.setState({ customerList: customers });\r\n    }\r\n  }\r\n\r\n  async projectPost(project) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiProjectPost(this.props.serviceUrl, project);\r\n      return await apiAddProjectToCustomer(this.props.serviceUrl, this.state.customerId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const project = {\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        systemId: this.state.systemId,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes\r\n      };\r\n      for (var i = 0; i < this.state.projects.length; i++) {\r\n        if (project.systemId === this.state.projects[i].systemId && project.systemId.trim() !== \"\") {\r\n          window.alert('That system id is already in use in another project');\r\n          return;\r\n        }\r\n      }\r\n      this.projectPost(project).then(result => {\r\n        this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148'\r\n        })\r\n        this.props.updateCustomerList();\r\n        this.getAllProjects();\r\n      }).catch(err => {\r\n          this.setState({\r\n              submitMsg: i18n.t('submitMessages.error'),\r\n              submitColour: '#da1e28'\r\n          })\r\n      });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const projectModalElement = document.querySelector('#modal-form-project');\r\n    if(!projectModalElement.className.includes(\"is-visible\")) {\r\n      this.setState({\r\n        customerId: '',\r\n        name: '',\r\n        description: '',\r\n        systemId: '',\r\n        contactName: '',\r\n        contactPhone: '',\r\n        contactEmail: '',\r\n        notes: '',\r\n        invalid: {}\r\n      })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n    this.getAllProjects();\r\n\r\n    const modalOpenButton = document.querySelector('.add-project-button');\r\n    modalOpenButton.addEventListener(\"click\", this.clearValues, false);\r\n  }\r\n  \r\n  render() {\r\n    const customerList = ['Customer1', 'Customer2', 'Customer3'];\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProject')}\r\n        modalHeading={i18n.t('adminDashboard.addProject.title')}\r\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary add-project-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-project\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          {/*<p> {i18n.t('adminDashboard.addProject.desc')} </p>*/}\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              defaultValue=\"customer-list\"\r\n              name=\"customerId\"\r\n              labelText={i18n.t('adminDashboard.addProject.customerList') + \" *\"}\r\n              defaultValue={{ label: \"Select Dept\", value: 0 }}\r\n              value={this.state.customerId}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerId']}\r\n            >\r\n              <SelectItem text={i18n.t('adminDashboard.addProject.selectCustomer')} value=\"customer-list\" />\r\n              {Object.keys(this.props.allCustomers).length !== 0\r\n                ? this.props.allCustomers.map((customerList, i) => (\r\n                    <SelectItem key={i} text={customerList.name} value={customerList.id}>\r\n                      {customerList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName') + \" *\"}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"description\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + \" *\"}\r\n              value={this.state.description}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['description']}\r\n            />\r\n            <TextInput\r\n              name=\"systemId\"\r\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\r\n              value={this.state.systemId}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + \" *\"}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProjectModal);\r\n","export const AuthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return authenticated ? children : null;\r\n};\r\n\r\nexport const UnauthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return !authenticated ? children : null;\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectGet, apiProjectPut, apiProjectsGet } from '../../api/projects';\r\n\r\nclass EditProjectModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            projects: {},\r\n            customerList: {},\r\n            customerId: '',\r\n            name: '',\r\n            description: '',\r\n            systemId: '',\r\n            contactName: '',\r\n            contactPhone: '',\r\n            contactEmail:'',\r\n            notes:'',\r\n            invalid: {},\r\n            modalId: '',\r\n            buttonId: '',\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        //name\r\n        if(this.state.name === ''){\r\n          formIsValid = false;\r\n          invalid[\"name\"] = true;\r\n        }\r\n\r\n        //description\r\n        if(this.state.description === ''){\r\n            formIsValid = false;\r\n            invalid[\"description\"] = true;\r\n        }\r\n\r\n        //contactEmail\r\n        if(typeof this.state.contactEmail !== \"undefined\"){\r\n          let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n          let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n    \r\n          if (!(lastAtPos < lastDotPos && lastAtPos > 0 && this.state.contactEmail.indexOf('@@') == -1 && lastDotPos > 2 && (this.state.contactEmail.length - lastDotPos) > 2)) {\r\n            formIsValid = false;\r\n            invalid[\"contactEmail\"] = true;\r\n          }\r\n        }\r\n    \r\n        this.setState({invalid: invalid});\r\n        return formIsValid;\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n          this.getCustomers();\r\n          this.getAllProjects();\r\n          this.getProjectDetails();\r\n        }\r\n      }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    async getCustomers() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const customers = await apiCustomersGet(this.props.serviceUrl);\r\n            this.setState({customerList: customers})\r\n        }\r\n    }\r\n\r\n    async getProjectDetails() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const project = await apiProjectGet(this.props.serviceUrl, this.props.project.id);\r\n            this.setState({\r\n                name: project.data.name,\r\n                description: project.data.description,\r\n                systemId: project.data.systemId,\r\n                contactName: project.data.contactName,\r\n                contactPhone: project.data.contactPhone,\r\n                contactEmail:project.data.contactEmail,\r\n                notes:project.data.notes,\r\n                modalId: \"modal-form-project-edit-\" + project.data.id,\r\n                buttonId: \"edit-project-button-\" + project.data.id\r\n            })\r\n        }\r\n    }\r\n\r\n    async getAllProjects() {\r\n        const projects = await apiProjectsGet(this.props.serviceUrl);\r\n        this.setState({\r\n          projects: projects.data\r\n        });\r\n      }\r\n\r\n    async projectPut(project) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            return await apiProjectPut(this.props.serviceUrl, project);\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (e) => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const project = {\r\n                id: this.props.project.id,\r\n                customer: this.props.project.customer,\r\n                name: this.state.name,\r\n                description: this.state.description,\r\n                systemId: this.state.systemId,\r\n                contactName: this.state.contactName,\r\n                contactPhone: this.state.contactPhone,\r\n                contactEmail: this.state.contactEmail,\r\n                notes: this.state.notes\r\n            }\r\n            for (var i = 0; i < this.props.allProjects.length; i++) {\r\n                if((project.systemId === this.props.allProjects[i].systemId) && (project.id !== this.props.allProjects[i].id) && (project.systemId.trim() !== \"\")) {\r\n                    window.alert('That system id is already in use in another project');\r\n                    return;\r\n                }\r\n            }\r\n            this.projectPut(project).then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.updated'),\r\n                    submitColour: '#24a148'\r\n                })\r\n                this.props.updateProjectList();\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    clearValues = () => {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        const customerModalElement = document.querySelector('#' + this.state.modalId);\r\n        if(!customerModalElement.className.includes(\"is-visible\") && authenticated) {\r\n            this.setState({\r\n                name: this.props.project.name,\r\n                description: this.props.project.description,\r\n                systemId: this.props.project.systemId,\r\n                contactName: this.props.project.contactName,\r\n                contactPhone: this.props.project.contactPhone,\r\n                contactEmail:this.props.project.contactEmail,\r\n                notes:this.props.project.notes,\r\n                invalid: {}\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            this.getCustomers();\r\n            this.getAllProjects();\r\n            this.getProjectDetails();\r\n\r\n            const modalOpenButton = document.querySelector('.edit-project-button-' + this.props.project.id);\r\n            modalOpenButton.addEventListener(\"click\", this.clearValues, false);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const buttonClassName = \"bx--btn bx--btn--ghost edit-project-button-\" + this.props.project.id;\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\r\n                buttonTriggerClassName={buttonClassName}\r\n                className=\"modal-form\"\r\n                id={this.state.modalId}\r\n                handleSubmit={this.handleFormSubmit}\r\n                primaryButtonText={i18n.t('modalText.save')}\r\n                secondaryButtonText={i18n.t('modalText.cancel')}\r\n                modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n            >\r\n                <div className=\"form-container\">\r\n                    {/*<p> {i18n.t('adminDashboard.addProject.desc')} </p>*/}\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput \r\n                            name=\"name\" \r\n                            labelText={i18n.t('adminDashboard.addProject.projectName') + \" *\"} \r\n                            value={this.state.name} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.required')} \r\n                            invalid={this.state.invalid[\"name\"]} \r\n                        />\r\n                        <TextInput \r\n                            name=\"description\" \r\n                            labelText={i18n.t('adminDashboard.addProject.projectDesc') + \" *\"} \r\n                            value={this.state.description} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.required')} \r\n                            invalid={this.state.invalid[\"description\"]} \r\n                        />\r\n                        <TextInput \r\n                            name=\"systemId\" \r\n                            labelText={i18n.t('adminDashboard.addProject.systemId')} \r\n                            value={this.state.systemId}\r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        <TextInput \r\n                            name=\"contactName\" \r\n                            labelText={i18n.t('adminDashboard.addProject.contactName')} \r\n                            value={this.state.contactName} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        <TextInput \r\n                            name=\"contactPhone\" \r\n                            labelText={i18n.t('adminDashboard.addProject.contactPhone')} \r\n                            value={this.state.contactPhone} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        <TextInput \r\n                            name=\"contactEmail\" \r\n                            labelText={i18n.t('adminDashboard.addProject.contactEmail') + \" *\"} \r\n                            value={this.state.contactEmail} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.email')} \r\n                            invalid={this.state.invalid[\"contactEmail\"]} \r\n                        />\r\n                        <TextArea \r\n                            name=\"notes\" \r\n                            labelText={i18n.t('adminDashboard.addProject.notes')} \r\n                            value={this.state.notes} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                    </Form>\r\n                </div> \r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withKeycloak(EditProjectModal)","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\r\nimport '../../index.scss';\r\nimport { apiGetCustomersProjects, apiGetMyCustomersProjects } from '../../api/customers';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../../auth/KeycloakViews';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { Link, HashRouter } from 'react-router-dom';\r\nimport i18n from '../../i18n';\r\nimport EditProjectModal from '../Admin/EditProjectModal'\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\n\r\nclass CustomTable extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      projects: {}\r\n     }\r\n     this.headerData = [\r\n      {\r\n        header: i18n.t('customerDashboard.projectName'),\r\n        key: 'projectName',\r\n      },\r\n      {\r\n        header: i18n.t('customerDashboard.partners'),\r\n        key: 'partners',\r\n      },\r\n      {\r\n        header: i18n.t('customerDashboard.entandoVersion'),\r\n        key: 'entandoVersion',\r\n      },\r\n      {\r\n        header: i18n.t('customerDashboard.status'),\r\n        key: 'status',\r\n      },\r\n      {\r\n        header: i18n.t('customerDashboard.startDate'),\r\n        key: 'startDate',\r\n      },\r\n      {\r\n          header: i18n.t('customerDashboard.endDate'),\r\n          key: 'endDate',\r\n      },\r\n      {\r\n          header: i18n.t('customerDashboard.openTickets'),\r\n          key: 'openTickets',\r\n      },\r\n      {\r\n          header: i18n.t('customerDashboard.action'),\r\n          key: 'action',\r\n      }\r\n    ];\r\n  }\r\n\r\n  async fetchData() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n    if (authenticated) {\r\n      var projects;\r\n      if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n        projects = await apiGetCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\r\n      }\r\n      else {\r\n        projects = await apiGetMyCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\r\n      }\r\n      \r\n      this.setState({\r\n          projects: projects\r\n      });\r\n    }\r\n    this.render();\r\n}\r\n\r\ncomponentDidMount(){\r\n  const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.fetchData();\r\n    }\r\n}\r\n\r\nupdateProjectList = () => {\r\n  this.fetchData();\r\n}\r\n\r\ncomponentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div>\r\n        <DataTable rows={rowData} headers={this.headerData}>\r\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n          <TableContainer title={i18n.t('customerDashboard.subscriptions')} description={i18n.t('customerDashboard.tableDesc')}>\r\n            <Table {...getTableProps()}>\r\n              <TableHead>\r\n                <TableRow>\r\n                  {headers.map((header) => (\r\n                    <TableHeader {...getHeaderProps({ header })}>\r\n                      {header.header}\r\n                    </TableHeader>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n              {Object.keys(this.state.projects).length !== 0 ? \r\n                  this.state.projects.data.map((project, index) => {\r\n                    if (project.projectSubscriptions.length === 0) {\r\n                      return(\r\n                        <TableRow key={index} >\r\n                          <TableCell>{project.name}</TableCell>\r\n                          {project.partners.length !== 0 ? \r\n                            <TableCell>\r\n                              {project.partners.map(partner => (\r\n                                <p>{partner.name}</p>\r\n                              ))}\r\n                            </TableCell> \r\n                          : <TableCell>None</TableCell>}\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>{project.tickets.length}</TableCell>\r\n                          <TableCell>{hasKeycloakClientRole('ROLE_ADMIN') ? <EditProjectModal key={project.id} allProjects={this.state.projects.data} project={project} serviceUrl={this.props.serviceUrl} updateProjectList={this.updateProjectList}/> : null}</TableCell>\r\n                      </TableRow>\r\n                      )\r\n                    }\r\n                    else {\r\n                      var sub = project.projectSubscriptions[project.projectSubscriptions.length - 1];\r\n                      return(\r\n                          <TableRow key={index} >\r\n                              <TableCell><Link to={`/entando-de-app/${this.props.locale}/subscription-details/${sub.id}`}>{project.name}</Link></TableCell>\r\n                              {project.partners.length !== 0 ? \r\n                                <TableCell>\r\n                                  {project.partners.map(partner => (\r\n                                    <p>{partner.name}</p>\r\n                                  ))}\r\n                                </TableCell> \r\n                                : <TableCell>None</TableCell>}\r\n                              {sub.entandoVersion ? <TableCell>{sub.entandoVersion.name}</TableCell> : <TableCell>None</TableCell>}\r\n                              <TableCell>{sub.status}</TableCell>\r\n                              <TableCell>{String(new Date(sub.startDate).toDateString())}</TableCell>\r\n                              <TableCell>{String(new Date(new Date(sub.startDate).setMonth(new Date(sub.startDate).getMonth() + sub.lengthInMonths)).toDateString())}</TableCell>\r\n                              <TableCell>{project.tickets.length}</TableCell>\r\n                              <TableCell>{hasKeycloakClientRole('ROLE_ADMIN') ? <EditProjectModal key={project.id} allProjects={this.state.projects.data} project={project} serviceUrl={this.props.serviceUrl} updateProjectList={this.updateProjectList}/> : null}</TableCell>\r\n                          </TableRow>\r\n                        \r\n                      )\r\n                    }\r\n                  }) : null\r\n              }\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </DataTable>\r\n    </div>\r\n  )}\r\n}\r\n\r\n\r\nconst rowData = [\r\n  {\r\n       id: 'a',\r\n       projectName: <a href=\"\">Supplier Portal</a>,\r\n       partnerName: 'Leonardo',\r\n       entandoVersion: 5.2,\r\n       startDate: 'October, 2019',\r\n       endDate: 'October, 2022',\r\n       openTickets: '5',\r\n    },\r\n    {\r\n      id: 'b',\r\n      projectName: <a href=\"\">Task Manager</a>,\r\n      partnerName: 'Veriday',\r\n      entandoVersion: 5.2,\r\n      startDate: 'July, 2019',\r\n      endDate: 'July, 2022',\r\n      openTickets: '2',\r\n    },\r\n    {\r\n      id: 'c',\r\n      projectName: <a href=\"\">Sales Coordination App</a>,\r\n      partnerName: 'Accenture',\r\n      entandoVersion: 6.2,\r\n      startDate: 'September, 2019',\r\n      endDate: 'September, 2022',\r\n      openTickets: '2',\r\n    },\r\n    {\r\n      id: 'd',\r\n      projectName: <a href=\"\">Website</a>,\r\n      partnerName: 'Veriday',\r\n      entandoVersion: 5.2,\r\n      startDate: 'October, 2019',\r\n      endDate: 'October, 2022',\r\n      openTickets: '1',\r\n    }  \r\n];\r\n \r\nexport default withKeycloak(CustomTable);","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiCustomerGet } from '../../api/customers';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\n\r\nconst customerData = {\r\n  name: 'Ford',\r\n  id: '5564 4563 3345',\r\n  startDate: '01/01/2020'\r\n};\r\n\r\nclass CustomerDetails extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customer: {}\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomer() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, this.props.customerNumber);\r\n      this.setState({\r\n        customer: customer.data\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, id, startDate } = customerData; //destructuring\r\n    return (\r\n      <div className=\"customer-details\">\r\n        <Tile>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerName')}</strong> {this.state.customer.name}\r\n          </p>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerId')}</strong> {this.state.customer.id}\r\n          </p>\r\n        </Tile>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerDetails);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerGet, apiCustomerPut } from '../../api/customers';\r\n\r\nclass EditCustomerModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: '',\r\n            customerNumber: '',\r\n            contactName: '',\r\n            contactPhone: '',\r\n            contactEmail: '',\r\n            notes: '',\r\n            invalid: {},\r\n            modalId: '',\r\n            buttonId: '',\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        //name\r\n        if (this.state.name === '') {\r\n            formIsValid = false;\r\n            invalid['name'] = true;\r\n        }\r\n\r\n        //customerNumber\r\n        if (this.state.customerNumber === '') {\r\n            formIsValid = false;\r\n            invalid['customerNumber'] = true;\r\n        }\r\n\r\n        //contactEmail\r\n        if (typeof this.state.contactEmail !== 'undefined') {\r\n            let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n            let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n            if (\r\n                !(\r\n                    lastAtPos < lastDotPos &&\r\n                    lastAtPos > 0 &&\r\n                    this.state.contactEmail.indexOf('@@') == -1 &&\r\n                    lastDotPos > 2 &&\r\n                    this.state.contactEmail.length - lastDotPos > 2\r\n                )\r\n            ) {\r\n                formIsValid = false;\r\n                invalid['contactEmail'] = true;\r\n            }\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n\r\n    };\r\n\r\n    async updateCustomer(customer) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            return await apiCustomerPut(this.props.serviceUrl, customer);\r\n        }\r\n    }\r\n\r\n    getCustomerDetails = (customerId) => {\r\n        this.getCustomer(customerId)\r\n    }\r\n\r\n    async getCustomer(customerId) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const customer = await apiCustomerGet(this.props.serviceUrl, customerId);\r\n            this.setState({\r\n                name: customer.data.name,\r\n                customerNumber: customer.data.customerNumber,\r\n                contactName: customer.data.contactName,\r\n                contactPhone: customer.data.contactPhone,\r\n                contactEmail:customer.data.contactEmail,\r\n                notes:customer.data.notes,\r\n                modalId: \"modal-form-customer-edit-\" + customer.data.id,\r\n                buttonId: \"edit-customer-button-\" + customer.data.id\r\n              })\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = e => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const customer = {\r\n                id: this.props.customer.id,\r\n                name: this.state.name,\r\n                customerNumber: this.state.customerNumber,\r\n                contactName: this.state.contactName,\r\n                contactPhone: this.state.contactPhone,\r\n                contactEmail:this.state.contactEmail,\r\n                notes:this.state.notes\r\n            }\r\n            this.updateCustomer(customer).then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.updated'),\r\n                    submitColour: '#24a148'\r\n                })\r\n                this.props.updateCustomerList();\r\n                this.getCustomerDetails(this.props.customer.id);\r\n\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    clearValues = () => {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        const customerModalElement = document.querySelector('#' + this.state.modalId);\r\n        if(!customerModalElement.className.includes(\"is-visible\") && authenticated) {\r\n            this.setState({\r\n                name: this.props.customer.name,\r\n                customerNumber: this.props.customer.customerNumber,\r\n                contactName: this.props.customer.contactName,\r\n                contactPhone: this.props.customer.contactPhone,\r\n                contactEmail:this.props.customer.contactEmail,\r\n                notes:this.props.customer.notes,\r\n                invalid: {}\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            if (this.props.customerId) {\r\n                this.getCustomerDetails(this.props.customerId);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n              this.getCustomerDetails(this.props.customerId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const buttonClassName = \"bx--btn bx--btn--ghost edit-customer-button-\" + this.props.customer.id;\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('adminDashboard.editCustomer.title')}\r\n                buttonTriggerClassName={buttonClassName}\r\n                className=\"modal-form\"\r\n                id={this.state.modalId}\r\n                handleSubmit={this.handleFormSubmit}\r\n                primaryButtonText={i18n.t('modalText.save')}\r\n                secondaryButtonText={i18n.t('modalText.cancel')}\r\n                modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n            >\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput\r\n                            name=\"name\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerName') + \" *\"}\r\n                            value={this.state.name}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['name']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"customerNumber\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + \" *\"}\r\n                            value={this.state.customerNumber}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['customerNumber']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactName\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n                            value={this.state.contactName}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactPhone\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n                            value={this.state.contactPhone}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactEmail\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + \" *\"}\r\n                            value={this.state.contactEmail}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.email')}\r\n                            invalid={this.state.invalid['contactEmail']}\r\n                        />\r\n                        <TextArea\r\n                            name=\"notes\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n                            value={this.state.notes}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                    </Form>\r\n                </div>\r\n            </ModalWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(EditCustomerModal);\r\n","import React from 'react';\r\nimport { AccordionItem } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerGet, apiGetCustomersProjects,  apiGetMyCustomersProjects } from '../../api/customers';\r\nimport { apiGetProjectsUsers } from '../../api/projects';\r\nimport CustomTable from './customDataTable';\r\nimport CustomerDetails from './customerDetails';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport EditCustomerModal from '../Admin/EditCustomerModal';\r\n\r\nclass CustomerAccordian extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            projects: {},\r\n            customer: {},\r\n            authenticated: false\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.getCustomersProjects(this.props.customerNumber);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n            this.getCustomersProjects(this.props.customerNumber);\r\n        }\r\n      }\r\n\r\n    async getCustomersProjects(id) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const customer = await apiCustomerGet(this.props.serviceUrl, id);\r\n\r\n            var projects;\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                projects = await apiGetCustomersProjects(this.props.serviceUrl, id);\r\n            }\r\n            else {\r\n                projects = await apiGetMyCustomersProjects(this.props.serviceUrl, id);\r\n            }\r\n\r\n            this.setState({\r\n                projects: projects.data,\r\n                customer: customer.data\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        return(\r\n            <div>\r\n                <div>\r\n                    {hasKeycloakClientRole('ROLE_CUSTOMER') ? \r\n                        <CustomerDetails serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} /> : null \r\n                    }\r\n                    <AccordionItem title={this.props.title}>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') ?\r\n                            <EditCustomerModal serviceUrl={this.props.serviceUrl} customer={this.state.customer} key={this.state.customer.id} updateCustomerList={this.props.updateCustomerList} customerId={this.state.customer.id}/>  : null\r\n                        }\r\n                        <CustomTable key={(new Date).getTime()} serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} updateCustomerList={this.props.updateCustomerList} locale={this.props.locale} />\r\n                    </AccordionItem>\r\n                </div> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withKeycloak(CustomerAccordian);","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Accordion, PaginationNav, Search, Tile} from 'carbon-components-react';\r\nimport AddCustomerModal from './AddCustomerModal';\r\nimport AddPartnerModal from './AddPartnerModal';\r\nimport AddProjectModal from './AddProjectModal'\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminCustomersGet, apiMyCustomersGet } from '../../api/customers';\r\nimport CustomerAccordian from '../Customer/CustomerAccordian';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport { apiProjectsGet } from '../../api/projects';\r\n\r\nclass AdminDashboard extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            customers: {},\r\n            projects: {},\r\n            customersProjects: {},\r\n            role: '',\r\n            filteredCustomers: {},\r\n            currentPage: 0,\r\n            test: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getCustomers();\r\n        this.getProjects();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n          this.getCustomers();\r\n          this.getProjects();\r\n        }\r\n      }\r\n\r\n    async getProjects() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const projects = await apiProjectsGet(this.props.serviceUrl);\r\n\r\n            this.setState({\r\n                projects: projects.data,\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    async getCustomers() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            var customers;\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                customers = await apiAdminCustomersGet(this.props.serviceUrl);\r\n            }\r\n            else {\r\n                customers = await apiMyCustomersGet(this.props.serviceUrl);\r\n            }\r\n\r\n            this.setState({\r\n                customers: customers.data,\r\n                filteredCustomers: customers.data\r\n            })\r\n        }\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        if (event.key === 'Enter') {\r\n            const newFilteredState = this.state.customers.filter(customer => customer.name.toLowerCase().includes(event.target.value.toLowerCase()))\r\n            this.setState({\r\n                filteredCustomers: newFilteredState,\r\n                currentPage: 0\r\n            })\r\n        }\r\n        else {\r\n            if (event.target.value === '' || event.target.value === undefined) {\r\n                this.setState({\r\n                    filteredCustomers: this.state.customers\r\n                })\r\n            }\r\n        }\r\n        this.forceUpdate();\r\n    }\r\n\r\n    updateCustomerList = () => {\r\n        this.getCustomers();\r\n        this.getProjects();\r\n    }\r\n\r\n    render(){\r\n        var numberOfPages = 1;\r\n        if (Object.keys(this.state.filteredCustomers).length !== 0) {\r\n            numberOfPages = Math.ceil(this.state.filteredCustomers.length / 5);\r\n        }\r\n        else {\r\n            numberOfPages = 1;\r\n        }\r\n        \r\n        const props = () => ({\r\n            loop: Boolean(false),\r\n            page: Number(this.state.currentPage),\r\n            totalItems: Number(numberOfPages),\r\n            itemsShown: Number(1),\r\n            onChange: (event) => this.setState({currentPage: event}),\r\n        });\r\n\r\n        return(\r\n            <div className=\"admin-dashboard\">\r\n                {hasKeycloakClientRole('ROLE_ADMIN') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3> : \r\n                hasKeycloakClientRole('ROLE_SUPPORT') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3> : \r\n                hasKeycloakClientRole('ROLE_CUSTOMER') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3> : \r\n                hasKeycloakClientRole('ROLE_PARTNER') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3> : \r\n                null}\r\n            {hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_PARTNER') ?\r\n                <Tile>\r\n                    <p className=\"title\">{i18n.t('adminDashboard.allCustomers')}</p>\r\n                    <div className=\"bx--row\">\r\n                        <div className=\"bx--col\">\r\n                            <Search onChange={this.handleSearch} id=\"search\" placeHolderText={i18n.t('adminDashboard.searchText')} onKeyPress={this.handleSearch}/>\r\n                        </div>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') ?\r\n                        <div className=\"bx--col\">\r\n                            \r\n                            <div>\r\n                                <AddPartnerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList} allProjects={this.state.projects} />\r\n                                <AddCustomerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList} />\r\n                                <AddProjectModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList} allCustomers={this.state.customers} />\r\n                            </div>\r\n                        </div> : null}\r\n                    </div>\r\n                </Tile>  \r\n                : null\r\n            }\r\n                    \r\n                <div className=\"form-container\">\r\n                    <Accordion>\r\n                        {Object.keys(this.state.customers).length !== 0 ? this.state.filteredCustomers.map((customer, index) => {\r\n                            // Pagination for Admin and Support roles (5 items per page)\r\n                            var indexOfLastItem = ((this.state.currentPage + 1) * 5) - 1;\r\n                            var firstIndexOfCurrentPage = this.state.currentPage * 5;\r\n                            \r\n                            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                                if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\r\n                                    return(\r\n                                        <CustomerAccordian key={customer.id} serviceUrl={this.props.serviceUrl} customerNumber={customer.id} title={customer.name} updateCustomerList={this.updateCustomerList} locale={this.props.locale}/>\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    return(null)\r\n                                }\r\n                            }\r\n                            else {\r\n                                return(null)\r\n                            }\r\n                        }) : null}\r\n                    </Accordion>\r\n                    <PaginationNav {...props()} cssClass='pagination-right' />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default withKeycloak(AdminDashboard);","export const publishWidgetEvent = (eventId, payload) => {\r\n  const widgetEvent = new CustomEvent(eventId, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload =>\r\n  publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","export const INPUT_EVENT_TYPES = {\r\n    formUpdate: 'customer.form.update',\r\n    formCreate: 'customer.form.create',\r\n    formDelete: 'customer.form.delete',\r\n  };\r\n  \r\n  export const OUTPUT_EVENT_TYPES = {\r\n    select: 'customer.table.select',\r\n    add: 'customer.table.add',\r\n    error: 'customer.table.error',\r\n    delete: 'customer.table.delete',\r\n  };\r\n  \r\n  export const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n  ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminDashboard from '../components/Admin/AdminDashboard';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminDashboardElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminDashboard serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-dashboard-widget', AdminDashboardElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/tickets';\r\n\r\nexport const apiTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketsGet = async (serviceUrl ) => {\r\n\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketPost = async (serviceUrl, ticket) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\nconst jiraResource = 'api/tickets/ticketingsystem';\r\nexport const apiJiraTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketsGet = async (serviceUrl, projectName, organization) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketPost = async (serviceUrl, projectName, organization, ticket) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/ticketing-systems';\r\n\r\nexport const apiTicketingSystemDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemsGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemPost = async (serviceUrl, ticketingsystem) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemPut = async (serviceUrl, ticketingsystem) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\r\n  };\r\n  return request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell, PaginationNav } from 'carbon-components-react';\r\nimport { apiJiraTicketsGet } from '../../api/tickets';\r\nimport { apiTicketingSystemsGet } from '../../api/ticketingsystem';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../../auth/KeycloakViews';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectGet, apiAddTicketToProject } from '../../api/projects';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport i18n from '../../i18n';\r\n\r\nclass TicketList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      tickets: {},\r\n      currentPage: 0\r\n     }\r\n     this.headerData = [\r\n      {\r\n        header: i18n.t('ticketDetails.issue'),\r\n        key: 'issue',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.description'),\r\n        key: 'description',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.status'),\r\n        key: 'status',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.type'),\r\n        key: 'type',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.priority'),\r\n        key: 'priority',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.created'),\r\n        key: 'created',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.updated'),\r\n        key: 'updated',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.link'),\r\n        key: 'link',\r\n      }\r\n    ];\r\n  }\r\n\r\n  async fetchData() {\r\n    const { t, keycloak } = this.props;\r\n    var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      try {\r\n          const project = await apiProjectGet(this.props.serviceUrl, this.props.projectId);\r\n          const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\r\n          const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length-1]\r\n          var tickets = await apiJiraTicketsGet(this.props.serviceUrl, currentTicketingSystem.systemId, project.data.systemId);\r\n          for(var i = 0; i < tickets.data.length; i++) {\r\n            apiAddTicketToProject(this.props.serviceUrl, this.props.projectId, tickets.data[i].id);\r\n          }\r\n\r\n          this.setState({\r\n              tickets: tickets\r\n          });\r\n      }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n}\r\n\r\ncomponentDidMount(){\r\n  const { keycloak } = this.props;\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n  if(authenticated) {\r\n    if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n}\r\n\r\ncomponentDidUpdate(prevProps) {\r\n  const { keycloak } = this.props;\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n  const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n  if (authenticated && changedAuth) {\r\n    if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n}\r\n\r\n  render() {\r\n    var numberOfPages = 1;\r\n    if (Object.keys(this.state.tickets).length !== 0) {\r\n        numberOfPages = Math.ceil(this.state.tickets.data.length / 10);\r\n    }\r\n\r\n    const paginationProps = () => ({\r\n      loop: Boolean(false),\r\n      page: Number(this.state.currentPage),\r\n      totalItems: Number(numberOfPages),\r\n      itemsShown: Number(1),\r\n      onChange: (event) => this.setState({currentPage: event}),\r\n    });\r\n\r\n    return ( \r\n      <div>\r\n        <DataTable rows={rowData} headers={this.headerData}>\r\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n          <TableContainer title={i18n.t('ticketDetails.listOfTickets')} description={i18n.t('ticketDetails.tickets')}>\r\n            <Table {...getTableProps()}>\r\n              <TableHead>\r\n                <TableRow>\r\n                  {headers.map((header) => (\r\n                    <TableHeader {...getHeaderProps({ header })}>\r\n                      {header.header}\r\n                    </TableHeader>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {Object.keys(this.state.tickets).length !== 0 ? this.state.tickets.data.map((ticket, index) => {\r\n                  var indexOfLastItem = ((this.state.currentPage + 1) * 10) - 1;\r\n                  var firstIndexOfCurrentPage = this.state.currentPage * 10;\r\n\r\n                  if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\r\n                    return (\r\n                      <TableRow key={ticket.id}>\r\n                        <TableCell key={ticket.id}>{ticket.systemId}</TableCell>\r\n                        <TableCell key={ticket.id}>{ticket.description}</TableCell>\r\n                        <TableCell key={ticket.id}>{ticket.status}</TableCell>\r\n                        <TableCell key={ticket.id}>{ticket.type}</TableCell>\r\n                        <TableCell key={ticket.id}>{ticket.priority}</TableCell>\r\n                        <TableCell key={ticket.id}>{new Date(ticket.createDate).toDateString()}</TableCell>\r\n                        <TableCell key={ticket.id}>{new Date(ticket.updateDate).toDateString()}</TableCell>\r\n                        <TableCell key={ticket.id}><a href={\"https://jorden-test-partner-portal.atlassian.net/browse/\" + ticket.systemId} target=\"_blank\">{i18n.t('ticketDetails.viewTicket')}</a></TableCell>\r\n                      </TableRow>\r\n                    )\r\n                  }\r\n                  else {\r\n                    return(null)\r\n                  }\r\n                }) : <p></p> }\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </DataTable>\r\n      <PaginationNav {...paginationProps()} cssClass='pagination-right' />\r\n    </div>\r\n  )}\r\n}\r\n\r\nconst rowData = [\r\n  {\r\n       id: 'a',\r\n       projectName: 'Ticket1',\r\n       project: 'Leonardo',\r\n       entandoVersion: 6.2,\r\n       creationDate: 'October, 2019',\r\n       openTicket: <a href=\"\">Open Ticket</a>,\r\n    },\r\n    {\r\n        id: 'a',\r\n        projectName: 'Ticket1',\r\n        project: 'Leonardo',\r\n        entandoVersion: 6.2,\r\n        creationDate: 'October, 2019',\r\n        openTicket: <a href=\"\">Open Ticket</a>,\r\n    },\r\n    {\r\n        id: 'a',\r\n        projectName: 'Ticket1',\r\n        project: 'Leonardo',\r\n        entandoVersion: 6.2,\r\n        creationDate: 'October, 2019',\r\n        openTicket: <a href=\"\">Open Ticket</a>,\r\n     },\r\n  \r\n];\r\n \r\nexport default withKeycloak(TicketList);","import { getDefaultOptions, request } from './helpers';\r\n\r\nconst resource = 'api/project-subscriptions'\r\n\r\nexport const apiSubscriptionGet = async (serviceUrl, id) => {\r\n    const url = `${serviceUrl}/${resource}/${id}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'GET',\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\n\r\nexport const apiSubscriptionGetAll = async (serviceUrl) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'GET',\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\n// Project Subscription creation consists of an object containing a projectSubscription, an entandoVersionId, and a\r\n// project id, see SubscriptionCreationRequest.\r\n/**\r\n * Called to create a new project subscription\r\n * \r\n * @param {string} serviceUrl \r\n * @param {ProjectSubscriptionCreation} projectSubscriptionCreation \r\n * @returns \r\n */\r\nexport const apiProjectSubscriptionPost = async (serviceUrl, projectSubscriptionCreation) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'POST',\r\n        body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiProjectSubscriptionPut = async (serviceUrl, projectSubscriptionCreation) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'PUT',\r\n        body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/project-subscriptions/mysubscription'\r\nexport const apiGetMySubscription = async (serviceUrl, customerId) => {\r\n    const url = `${serviceUrl}/${myResource}/${customerId}`;\r\n    const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'GET'\r\n    };\r\n  \r\n    return request(url, options);\r\n  };\r\n\r\n  // Same format as {projectSubscriptionCreation}\r\nexport const apiRenewSubscription = async (serviceUrl, projectSubscriptionRenew) => {\r\n    const url = `${serviceUrl}/${resource}/renew`;\r\n\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'PUT',\r\n        body: projectSubscriptionRenew ? JSON.stringify(projectSubscriptionRenew) : null\r\n    };\r\n\r\n    return request(url, options);\r\n};","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/portal-users';\r\n\r\nexport const apiUserDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersPut = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGet = async (serviceUrl, userId) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}/${userId}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserPost = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGetByUsername = async (serviceUrl, username) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}/username/${username}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea, Select, SelectItem, DatePicker, DatePickerInput} from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectSubscriptionPut, apiSubscriptionGet } from '../../api/subscriptions';\r\nimport moment from 'moment';\r\n\r\nclass EditSubscriptionModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            level: '',\r\n            status: '',\r\n            lengthInMonths: '',\r\n            startDate: '',\r\n            notes: '',\r\n            invalid: {},\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if (this.state.level === 'level') {\r\n            formIsValid = false;\r\n            invalid['level'] = true;\r\n        }\r\n\r\n        if (this.state.status === 'status') {\r\n            formIsValid = false;\r\n            invalid['status'] = true;\r\n        }\r\n\r\n        if (this.state.lengthInMonths === '' || !this.isNumeric(String(this.state.lengthInMonths))) {\r\n            formIsValid = false;\r\n            invalid['lengthInMonths'] = true;\r\n        }\r\n\r\n        if(typeof this.state.startDate !== \"undefined\"){\r\n            if(!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)){\r\n              formIsValid = false;\r\n              invalid['startDate'] = true;\r\n            }      \t\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    isNumeric(str) {\r\n        if (typeof str != \"string\") \r\n            return false\r\n        return !isNaN(str) && !isNaN(parseFloat(str))\r\n    }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleFormSubmit = (e) => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const subscriptionRequest = {\r\n                projectSubscription : {\r\n                    id: this.props.subscription.id,\r\n                    level: this.state.level,\r\n                    status: this.state.status,\r\n                    lengthInMonths: this.state.lengthInMonths,\r\n                    startDate: moment(this.state.startDate).format(),\r\n                    notes: this.state.notes,\r\n                    project: this.props.project,\r\n                    entandoVersion: this.props.subscription.entandoVersion\r\n                }\r\n            }\r\n            this.subscriptionPut(subscriptionRequest).then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.updated'),\r\n                    submitColour: '#24a148'\r\n                })\r\n                this.props.updateSubscription();\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) { \r\n            this.getSubscriptionDetails();\r\n\r\n        }\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        this.setState({\r\n            startDate: moment(date[0].toISOString()).format('MM/DD/YYYY')\r\n        })\r\n    }\r\n\r\n    async getSubscriptionDetails() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const subscription =  await apiSubscriptionGet(this.props.serviceUrl, this.props.subscription.id);\r\n            this.setState({\r\n                level: subscription.data.level,\r\n                status: subscription.data.status,\r\n                lengthInMonths: subscription.data.lengthInMonths,\r\n                startDate: moment(this.props.subscription.startDate).format('MM/DD/YYYY'),\r\n                notes: subscription.data.notes,\r\n                submitMsg: ''\r\n            })\r\n        }\r\n    }\r\n\r\n    async subscriptionPut(subscription) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            return await apiProjectSubscriptionPut(this.props.serviceUrl, subscription);\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        const levelList = ['GOLD', 'PLATINUM'];\r\n        const statusList = ['REQUESTED', 'PENDING', 'ACTIVE', 'EXPIRED'];\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('editSubscription.title')}\r\n                buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary edit-sub-button\"\r\n                className=\"modal-form\"\r\n                id=\"modal-form-sub-edit\"\r\n                handleSubmit={this.handleFormSubmit}\r\n                primaryButtonText={i18n.t('modalText.save')}\r\n                secondaryButtonText={i18n.t('modalText.cancel')}\r\n                modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n            >\r\n                {/*<p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis. </p>*/}\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <Select\r\n                            name=\"level\"\r\n                            labelText={i18n.t('subscriptionDetails.level') + \" *\"}\r\n                            value={this.state.level}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['level']} \r\n                            >\r\n                            <SelectItem disabled text=\"Select Level\" value=\"level\" />\r\n                            {levelList.map((level, i) => (\r\n                                    <SelectItem key={i} text={level} value={level}>\r\n                                        {level}\r\n                                    </SelectItem>\r\n                            ))}\r\n                        </Select>\r\n                        <Select\r\n                            name=\"status\"\r\n                            labelText={i18n.t('subscriptionDetails.status') + \" *\"}\r\n                            value={this.state.status}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['status']} \r\n                            >\r\n                            <SelectItem disabled text=\"Select Status\" value=\"status\" />\r\n                            {statusList.map((status, i) => (\r\n                                <SelectItem key={i} text={status} value={status}>\r\n                                    {status}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </Select>\r\n                        <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n                            <DatePickerInput\r\n                                name=\"startDate\"\r\n                                placeholder=\"mm/dd/yyyy\"\r\n                                labelText={i18n.t('subscriptionDetails.startDate') + \" *\"}\r\n                                value={this.state.startDate}\r\n                                //onChange={this.handleChanges}\r\n                                type=\"text\"\r\n                                invalidText={i18n.t('validation.invalid.date')} \r\n                                invalid={this.state.invalid['startDate']} \r\n                            />\r\n                        </DatePicker>\r\n                        <TextInput \r\n                            name=\"lengthInMonths\" \r\n                            labelText={i18n.t('subscriptionDetails.lengthInMonths') + \" *\"} \r\n                            value={this.state.lengthInMonths} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.number')} \r\n                            invalid={this.state.invalid['lengthInMonths']} \r\n                        />\r\n                        <TextArea \r\n                            name=\"notes\" \r\n                            labelText={i18n.t('adminDashboard.addProject.notes')} \r\n                            value={this.state.notes} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                    </Form>\r\n                </div> \r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withKeycloak(EditSubscriptionModal)\r\n\r\n\r\n","import React from 'react';\r\nimport TicketList from './TicketList';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiSubscriptionGet, apiGetMySubscription } from '../../api/subscriptions'\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiUsersGet } from '../../api/portalusers';\r\nimport { apiProjectGet } from '../../api/projects'; \r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport EditSubscriptionModal from '../Admin/EditSubscriptionModal';\r\nimport i18n from '../../i18n';\r\n\r\nconst subscriptionData = {\r\n    description: 'Entando Product Support Subscription Suplier Portal',\r\n    commitment: 'Leonardo',\r\n    type: 'Product Support Subscription Entando Platform',\r\n    quantityRequest: '1(8 Core)',\r\n    components: '',\r\n    level: 'Gold',\r\n    startDate: 'May 2019',\r\n    endDate: 'May 2020',\r\n    license: 'Free Commercial Open Source',\r\n};\r\n\r\nclass Subscription extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            subscription: {},\r\n            users: {},\r\n            project: {}\r\n        }\r\n    }\r\n\r\n    async getSubscription() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            try {\r\n                var subscription;\r\n                if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                    subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.match.params.id);\r\n                    var project = '';\r\n                    if (subscription.data.project) {\r\n                        project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id)\r\n                    }\r\n                }\r\n                else if (hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                    subscription = await apiGetMySubscription(this.props.serviceUrl, this.props.match.params.id);\r\n                    var project = '';\r\n                    if (subscription.data.project) {\r\n                        project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id)\r\n                    }\r\n                }\r\n                this.setState({\r\n                    subscription: subscription,\r\n                    project: project,\r\n                    loading: false\r\n                })\r\n            }\r\n            catch(err) {\r\n                console.log(err)\r\n            }\r\n        }\r\n    }\r\n\r\n    updateSubscription = () => {\r\n        this.getSubscription();\r\n    }\r\n\r\n    componentDidMount(){\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                this.getSubscription();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                this.getSubscription();\r\n            }\r\n        }\r\n      }\r\n\r\n    render() {\r\n        const { description, commitment, type, quantityRequest, components, level, startDate, endDate, license } = subscriptionData\r\n        var { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (!this.state.loading) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                if (Object.keys(this.state.subscription).length !== 0 && Object.keys(this.state.project).length !== 0) {\r\n                    return (\r\n                        <div className=\"subscription-details\">\r\n                            <div>\r\n                            <Tile>\r\n                                <div className=\"bx--grid\">\r\n                                    <div className=\"bx--row\">\r\n                                        <div className=\"bx--col\">\r\n                                            <p><strong>{i18n.t('subscriptionDetails.description')}:</strong> {this.state.subscription.data.project.description}</p>\r\n                                            <p><strong>{i18n.t('subscriptionDetails.partners')}:</strong>\r\n                                            {this.state.project.data !== '' && Object.keys(this.state.project.data.partners).length !== 0 ? \r\n                                                <>\r\n                                                    {this.state.project.data.partners.map(partner => (\r\n                                                        <> {partner.name} </>\r\n                                                    ))}\r\n                                                </>\r\n                                                : <> None </>\r\n                                            }\r\n                                            </p>\r\n                                            <p><strong>{i18n.t('subscriptionDetails.type')}:</strong> {type}</p>\r\n                                            <p><strong>{i18n.t('subscriptionDetails.status')}:</strong> {this.state.subscription.data.status}</p>\r\n                                        </div>\r\n                                        <div className=\"bx--col\">\r\n                                            <p><strong>{i18n.t('subscriptionDetails.level')}:</strong> {this.state.subscription.data.level}</p>\r\n                                            <p><strong>{i18n.t('subscriptionDetails.startDate')}:</strong> {String(new Date(this.state.subscription.data.startDate).toDateString())}</p>\r\n                                            <p><strong>{i18n.t('subscriptionDetails.endDate')}:</strong> {String(new Date(new Date(this.state.subscription.data.startDate).setMonth(new Date(this.state.subscription.data.startDate).getMonth() + this.state.subscription.data.lengthInMonths)).toDateString())}</p>\r\n                                            <p><strong>{i18n.t('subscriptionDetails.license')}:</strong> {license}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {hasKeycloakClientRole('ROLE_ADMIN') ? \r\n                                    <EditSubscriptionModal project={this.state.project.data} subscription={this.state.subscription.data} serviceUrl={this.props.serviceUrl} updateSubscription={this.updateSubscription}/>\r\n                                : null}\r\n                            </Tile>\r\n                            <br/>\r\n                            <TicketList projectId={this.state.project.data.id} serviceUrl={this.props.serviceUrl} />\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                }\r\n                else {\r\n                    return(<p>Not authorized to view this</p>)\r\n                }\r\n            }\r\n            else {\r\n                return(<p>Unauthorized</p>)\r\n            }\r\n        }\r\n        else {\r\n            return(null)\r\n        }\r\n    }\r\n}\r\n\r\nexport default withKeycloak(Subscription);","import { getDefaultOptions, getDefaultKeycloakOptions, request, getUrl } from './helpers';\r\n\r\nconst usersResourceProd = 'admin/realms/entando/users'\r\n//const usersResourceDev = 'admin/realms/jhipster/users'\r\nconst tokenResourceProd = 'realms/entando/protocol/openid-connect/token';\r\n//const tokenResourceDev = 'realms/jhipster/protocol/openid-connect/token';\r\n\r\nexport const apiKeycloakUserGet = async (serviceUrl) => {\r\n  const url = `${serviceUrl}/${usersResourceProd}`;\r\n  const keycloakBody = {\r\n    client_id: \"admin_cli\",\r\n    username: \"admin\",\r\n    password: \"admin\",\r\n    grant_type: \"password\"\r\n  }\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'GET',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiKeycloakToken = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${tokenResourceProd}`\r\n  );\r\n  const keycloakBody = {\r\n    client_id: \"web_app\",\r\n    username: \"admin\",\r\n    password: \"admin\",\r\n    grant_type: \"password\"\r\n  }\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'POST',\r\n    body: keycloakBody ? serialize(keycloakBody) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nfunction serialize(obj) {\r\n  var str = [];\r\n  for (var p in obj)\r\n    if (obj.hasOwnProperty(p)) {\r\n      str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\r\n    }\r\n  return str.join(\"&\");\r\n}","import React, { Component } from 'react';\r\nimport { BrowserRouter, HashRouter, Route, Switch } from 'react-router-dom';\r\nimport AdminDashboard from './Admin/AdminDashboard';\r\nimport Subscription from './SubscriptionDetails/subscription';\r\nimport withKeycloak from '../auth/withKeycloak';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../auth/KeycloakViews';\r\nimport { apiKeycloakToken, apiKeycloakUserGet } from '../api/keycloak';\r\nimport { hasKeycloakClientRole } from '../api/helpers';\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.setState({\r\n                loading: false\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n        if (authenticated && changedAuth) {\r\n            this.setState({\r\n                loading: false\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n        \r\n        if (!this.state.loading) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_PARTNER') || hasKeycloakClientRole(\"ROLE_CUSTOMER\")) {\r\n                return (\r\n                    <div id=\"entando-customer-portal\">\r\n                        <AuthenticatedView keycloak={keycloak}>\r\n                            <HashRouter>\r\n                                <Switch>\r\n                                    <Route path={\"**/subscription-details/:id\"} render={(props) => (\r\n                                        <Subscription {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />\r\n                                    )}/>\r\n                                    <Route path=\"**/\" render={(props) => (\r\n                                        <AdminDashboard {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />\r\n                                    )}/>\r\n                                </Switch>\r\n                            </HashRouter>\r\n                        </AuthenticatedView>\r\n                        <UnauthenticatedView keycloak={keycloak}>\r\n                            <p>Unauthenticated</p>\r\n                        </UnauthenticatedView>\r\n                    </div>\r\n                )\r\n            }\r\n            else {\r\n                return (<p>Unauthorized</p>)\r\n            }\r\n        }\r\n        else {\r\n            return(null)\r\n        }\r\n     }\r\n  }\r\n  \r\nexport default withKeycloak(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AddCustomerModal from '../components/Admin/AddCustomerModal';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminAddCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AddCustomerModal serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-add-customer-widget', AdminAddCustomerElement);\r\n\r\n","import React, {Component} from 'react';\r\nimport { Select, SelectItem} from 'carbon-components-react';\r\nimport CustomerDetails from '../Customer/customerDetails';\r\nimport CustomTable from '../Customer/customDataTable';\r\nimport AdminDashboard from './AdminDashboard';\r\nimport '../../index.scss';\r\n\r\nexport default class RoleCheck extends Component {\r\n    state = {\r\n        roleType: 'customer'\r\n    };\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    render() {\r\n        const roleType = ['Admin', 'Customer'];\r\n        return (\r\n            \r\n                <div className='role-check'>  \r\n                <Select defaultValue=\"role-type\" name=\"roleType\" labelText=\"Select Role(Testing)\" value={this.state.roleType} onChange={this.handleChanges}>\r\n                        <SelectItem\r\n                                text=\"Select Role\"\r\n                                value=\"role-type\"\r\n                        />\r\n                        {roleType.map((roleType, i) => <SelectItem key={i} text={roleType} value={roleType.toLowerCase()}>{roleType}</SelectItem>)}\r\n                        </Select>\r\n                    { this.renderForm()}\r\n                </div>\r\n            \r\n            );\r\n    }\r\n\r\n    // Render Dashboard based on role\r\n    renderForm() {\r\n        if (this.state.roleType === 'customer') return (\r\n            <div>\r\n                 <h3 className=\"pageTitle\">Welcome to Entando Customer Portal</h3>\r\n                <CustomerDetails />\r\n                <CustomTable />\r\n            </div>\r\n        )\r\n        if (this.state.roleType === 'admin') return (\r\n            <div>\r\n                 <h3 className=\"pageTitle\">Welcome to Entando Admin View</h3>\r\n                <AdminDashboard />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport RoleCheck from '../components/Admin/RoleCheck';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\n  const ATTRIBUTES = {\r\n    hidden: 'hidden',\r\n    locale: 'locale',\r\n    paginationMode: 'pagination-mode',\r\n    disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n    serviceUrl: 'service-url',\r\n  };\r\n\r\nclass AdminRoleCheckElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <RoleCheck serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-rolecheck-widget', AdminRoleCheckElement);\r\n\r\n//export default AdminRoleCheckElement;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomDataTable from '../components/Customer/customDataTable';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\n  const ATTRIBUTES = {\r\n    hidden: 'hidden',\r\n    locale: 'locale',\r\n    paginationMode: 'pagination-mode',\r\n    disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n    serviceUrl: 'service-url',\r\n  };\r\n\r\nclass CustomDataTableElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomDataTable serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('custom-datatable-widget', CustomDataTableElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDetails from '../components/Customer/customerDetails';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\n  const ATTRIBUTES = {\r\n    hidden: 'hidden',\r\n    locale: 'locale',\r\n    paginationMode: 'pagination-mode',\r\n    disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n    serviceUrl: 'service-url',\r\n  };\r\n\r\nclass CustomerDetailsElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDetails serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\ncustomElements.define('customer-details-widget', CustomerDetailsElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Subscription from '../components/SubscriptionDetails/subscription';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass SubscriptionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Subscription serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-widget', SubscriptionElement);\r\n\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Form, Select, SelectItem, Button, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminProjectsGet, apiMyProjectsGet, apiGetProjectSubscriptions } from '../../api/projects';\r\nimport { apiJiraTicketPost } from '../../api/tickets';\r\nimport { apiTicketingSystemsGet } from '../../api/ticketingsystem';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\n\r\nclass OpenTicket extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            loading: true,\r\n            project: {},\r\n            projects: [],\r\n            systemId: '',\r\n            type: 'Bug',\r\n            description: '',\r\n            priority: 'Medium',\r\n            status: 'To Do',\r\n            createDate: '',\r\n            updateDate: '',\r\n            role: '',\r\n            invalid: {},\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n        this.types = [\"Bug\", \"Task\"];\r\n        this.priorities = ['Highest', 'High', 'Medium', 'Low', 'Lowest'];\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if(this.state.project.systemId === undefined || this.state.project.systemId === 'project-list'){\r\n          formIsValid = false;\r\n          invalid['project'] = true;\r\n        }\r\n\r\n        if(this.state.type === '' || this.state.type === 'Select'){\r\n            formIsValid = false;\r\n            invalid['type'] = true;\r\n        }\r\n\r\n        if(this.state.description === '' || this.state.description === 'Select'){\r\n            formIsValid = false;\r\n            invalid['description'] = true;\r\n        }\r\n\r\n        if(this.state.priority === '' || this.state.priority === 'Select'){\r\n            formIsValid = false;\r\n            invalid['priority'] = true;\r\n        }\r\n\r\n        this.setState({invalid: invalid});\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n\r\n        if (name === \"project\" && value != '' && value != 'project-list') {\r\n            this.setState({\r\n                project: JSON.parse(value),\r\n            })\r\n        }\r\n        else {\r\n            this.setState({ [name]: value });\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            // check if project has subscription \r\n            this.fetchProjectSubscription(this.state.project.id).then(result => {\r\n                // if project has subscription, create ticket\r\n                if(result.data.length > 0) {\r\n                    this.createTicket().then(res => {\r\n                        this.setState({\r\n                            submitMsg: i18n.t('submitMessages.created'),\r\n                            submitColour: '#24a148'\r\n                        })\r\n                    }).catch(err => {\r\n                        this.setState({\r\n                            submitMsg: i18n.t('submitMessages.ticketError'),\r\n                            submitColour: '#da1e28'\r\n                        })\r\n                    });\r\n                }\r\n                // if no subscriptions, don't create ticket\r\n                else {\r\n                    this.setState({\r\n                        submitMsg: i18n.t('submitMessages.subscriptionRequired'),\r\n                        submitColour: '#da1e28'\r\n                    })\r\n                }\r\n            }).catch(error => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    async fetchProjectSubscription(projectId) {\r\n        return await apiGetProjectSubscriptions(this.props.serviceUrl, projectId);\r\n    }\r\n\r\n    async fetchProjects() {\r\n        const { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                var projects = await apiAdminProjectsGet(this.props.serviceUrl)\r\n                this.setState({\r\n                    projects: projects.data\r\n                })\r\n            }\r\n            else if (hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                var projects = await apiMyProjectsGet(this.props.serviceUrl)\r\n                this.setState({\r\n                    projects: projects.data\r\n                })\r\n            }\r\n        }\r\n\r\n        this.render();\r\n    }\r\n\r\n    async createTicket() {\r\n        const { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            const ticket = {\r\n                systemId: this.state.project.systemId,\r\n                type: this.state.type,\r\n                description: this.state.description,\r\n                priority: this.state.priority,\r\n                status: 'To Do',\r\n                // these dates are just placeholder to validate the POST request (date will be updated in the backend)\r\n                createDate: '2021-02-22T14:14:09-05:00',\r\n                updateDate: '2021-02-22T14:14:09-05:00'\r\n            }\r\n            return await apiJiraTicketPost(this.props.serviceUrl, this.state.ticketingSystem.systemId, this.state.project.systemId, ticket);\r\n            //const addedTicket = await apiAddTicketToProject(this.props.serviceUrl, this.state.project.id, result.data.id);\r\n        }\r\n    }\r\n\r\n    async getTicketingSystem() {\r\n        if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n            const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\r\n            const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length-1]\r\n            this.setState({\r\n                ticketingSystem: currentTicketingSystem\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.fetchProjects();\r\n            this.getTicketingSystem();\r\n            this.setState({\r\n                loading: false\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n      \r\n        if (authenticated && changedAuth) {\r\n            this.fetchProjects();\r\n            this.getTicketingSystem();\r\n            this.setState({\r\n                loading: false\r\n              });\r\n        }\r\n    }\r\n        \r\n    render() {\r\n        if (!this.state.loading) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                return (\r\n                    <div>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3> : \r\n                        hasKeycloakClientRole('ROLE_SUPPORT') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3> : \r\n                        hasKeycloakClientRole('ROLE_CUSTOMER') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3> : \r\n                        hasKeycloakClientRole('ROLE_PARTNER') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3> : \r\n                        null}\r\n                        <div className=\"form-container\">\r\n                            <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\r\n                            <Form onSubmit={this.handleFormSubmit}>\r\n                                <div className=\"form-desc\">\r\n                                    <h4>{i18n.t('supportTicketForm.formTitle')}</h4>\r\n                                    <p>{i18n.t('supportTicketForm.desc')}</p>\r\n                                </div>\r\n                                <div className=\"bx--grid\">\r\n                                    <div className=\"bx--row\">\r\n                                        <div className=\"bx--col\">\r\n                                            <Select \r\n                                                name=\"project\"\r\n                                                defaultValue={{ label: \"Select Proj\", value: 0 }}\r\n                                                labelText={i18n.t('supportTicketForm.selectProject') + \" *\"} \r\n                                                value={JSON.stringify(this.state.project)} \r\n                                                onChange={this.handleChanges}\r\n                                                invalidText={i18n.t('validation.invalid.required')}\r\n                                                invalid={this.state.invalid['project']} \r\n                                            >\r\n                                                <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\r\n                                                {Object.keys(this.state.projects).length !== 0 ? this.state.projects.map((project, i) => {\r\n                                                        return (\r\n                                                            <SelectItem key={i} text={project.name} value={JSON.stringify(project)}>{project.name}</SelectItem>\r\n                                                        )\r\n                                                }) : null}\r\n                                            </Select>\r\n                                            <Select \r\n                                                name=\"type\" \r\n                                                labelText={i18n.t('supportTicketForm.type') + \" *\"} \r\n                                                value={this.state.type} \r\n                                                onChange={this.handleChanges}\r\n                                                invalidText={i18n.t('validation.invalid.required')}\r\n                                                invalid={this.state.invalid['type']} \r\n                                            >\r\n                                                {this.types.map((type, i) => (\r\n                                                    <SelectItem key={i} text={type} value={type}>{type}</SelectItem>\r\n                                                ))}\r\n                                            </Select>\r\n                                            <Select \r\n                                                name=\"priority\" \r\n                                                labelText={i18n.t('supportTicketForm.priority') + \" *\"} \r\n                                                value={this.state.priority}\r\n                                                onChange={this.handleChanges}\r\n                                                invalidText={i18n.t('validation.invalid.required')}\r\n                                                invalid={this.state.invalid['priority']} \r\n                                            >\r\n                                                {this.priorities.map((priority, i) => (\r\n                                                    <SelectItem key={i} text={priority} value={priority}>{priority}</SelectItem>\r\n                                                ))}\r\n                                            </Select>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"bx--row\">\r\n                                        <div className=\"bx--col\">\r\n                                            <TextArea \r\n                                                labelText={i18n.t('supportTicketForm.ticketDescription') + \" *\"} \r\n                                                placeholder={i18n.t('supportTicketForm.addticketDescription')} \r\n                                                name=\"description\" \r\n                                                value={this.state.description} \r\n                                                onChange={this.handleChanges}  \r\n                                                invalidText={i18n.t('validation.invalid.required')}\r\n                                                invalid={this.state.invalid['description']} \r\n                                            />\r\n                                            <Button kind=\"primary\" tabIndex={0} type=\"submit\" > {i18n.t('buttons.submit')}  </Button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </Form>\r\n                        </div>\r\n                    </div>    \r\n                );\r\n            }\r\n            else {\r\n                return(<p>Unauthorized</p>)\r\n            }\r\n        }\r\n        else {\r\n            return(null)\r\n        }\r\n    }\r\n}\r\n\r\nexport default withKeycloak(OpenTicket);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass FormsOpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-openticket-widget', FormsOpenTicketElement);\r\n\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n \r\nconst Navigation = () => {\r\n    return (\r\n       <ul id='navigation'>\r\n          <li><NavLink to=\"/\">Home</NavLink></li>\r\n          <li><NavLink to=\"/subscription-details\">Subscription Details</NavLink></li>\r\n          <li><NavLink to=\"/subscription\">New or Renew Subscription</NavLink></li>\r\n          <li><NavLink to=\"/service-ticket\">Open Service Ticket</NavLink></li>\r\n          <li><NavLink to=\"/enhancement\">Request for Enhancement Process</NavLink></li>\r\n          <li><NavLink to=\"/manage-users\">Manage Users</NavLink></li>\r\n          <li><NavLink to=\"/configuration-settings\">Configuration Settings</NavLink></li>\r\n      </ul>\r\n    );\r\n}\r\n \r\nexport default Navigation;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass NavigationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Navigation serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('navigation-widget', NavigationElement);\r\n","import React, {Component} from 'react';\r\nimport { Form, TextInput, TextArea, Button } from 'carbon-components-react';\r\nimport i18n from '../../i18n';\r\n\r\nexport default class EnhancementRequest extends Component {\r\n    state = {\r\n        ticketNo: '',\r\n        customerName: '',\r\n        projectName: '',\r\n        openedBy: '',\r\n        priority: '',\r\n        partnerName: '',\r\n        enhancementDescription: '',\r\n        invalid: {}\r\n    };\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if(this.state.ticketNo === ''){\r\n          formIsValid = false;\r\n          invalid['ticketNo'] = true;\r\n        }\r\n\r\n        if(this.state.customerName === ''){\r\n            formIsValid = false;\r\n            invalid['customerName'] = true;\r\n        }\r\n\r\n        if(this.state.projectName === ''){\r\n            formIsValid = false;\r\n            invalid['projectName'] = true;\r\n        }\r\n\r\n        if(this.state.openedBy === ''){\r\n            formIsValid = false;\r\n            invalid['openedBy'] = true;\r\n        }\r\n\r\n        if(this.state.partnerName === ''){\r\n            formIsValid = false;\r\n            invalid['partnerName'] = true;\r\n        }\r\n\r\n        if(this.state.enhancementDescription === ''){\r\n            formIsValid = false;\r\n            invalid['enhancementDescription'] = true;\r\n        }\r\n\r\n        this.setState({invalid: invalid});\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        console.log(this.state.ticketNo)\r\n        event.preventDefault();\r\n\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            // placeholder\r\n        }\r\n    };\r\n      \r\n    render() {\r\n        return (\r\n            <div>\r\n                <h3 className=\"pageTitle\">{i18n.t('enhancementForm.title')}</h3>\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <div className=\"form-desc\">\r\n                            <h4>{i18n.t('enhancementForm.formTitle')}</h4>\r\n                            <p>{i18n.t('enhancementForm.desc')}</p>\r\n                        </div>\r\n                        <div className=\"bx--grid\">\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <TextInput \r\n                                        name=\"ticketNo\" \r\n                                        labelText={i18n.t('enhancementForm.ticketNumber')} \r\n                                        value={this.state.ticketNo} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['ticketNo']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"projectName\" \r\n                                        labelText={i18n.t('enhancementForm.projectName')} \r\n                                        value={this.state.projectName} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['projectName']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"priority\" \r\n                                        labelText={i18n.t('enhancementForm.priority')} \r\n                                        value={this.state.priority} \r\n                                        onChange={this.handleChanges}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"bx--col\">\r\n                                    <TextInput \r\n                                        name=\"customerName\" \r\n                                        labelText={i18n.t('enhancementForm.customerName')} \r\n                                        value={this.state.customerName} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['customerName']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"openedBy\" \r\n                                        labelText={i18n.t('enhancementForm.ticketOpenedBy')} \r\n                                        value={this.state.openedBy} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['openedBy']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"partnerName\" \r\n                                        labelText={i18n.t('enhancementForm.partnerName')} \r\n                                        value={this.state.partnerName} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['partnerName']} \r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <TextArea \r\n                                        labelText={i18n.t('enhancementForm.enhancementDescription')} \r\n                                        placeholder={i18n.t('enhancementForm.addenhancementDescription')} \r\n                                        name=\"enhancementDescription\"  \r\n                                        value={this.state.enhancementDescription} \r\n                                        onChange={this.handleChanges}  \r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['enhancementDescription']} \r\n                                    />\r\n                                    <Button kind=\"primary\" tabIndex={0} type=\"submit\"> {i18n.t('buttons.submit')}  </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            </div>    \r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport EnhancementRequest from '../components/Forms/enhancementRequest';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass FormsEnhancementRequestElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <EnhancementRequest serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-enhancement-request-widget', FormsEnhancementRequestElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport retargetEvents from 'react-shadow-dom-retarget-events';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale'\r\n};\r\n\r\n\r\nclass AppElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <App serviceUrl={serviceUrl} locale={locale} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('app-element', AppElement);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketList from '../components/SubscriptionDetails/TicketList';\r\nimport '../index.scss'\r\n//import './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketListCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketList serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticket-list-widget', TicketListCustomerElement);\r\n\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button} from 'carbon-components-react';\r\nimport { apiTicketingSystemPost, apiTicketingSystemsGet, apiTicketingSystemPut, apiTicketingSystemDelete } from '../../../api/ticketingsystem';\r\nimport { hasKeycloakClientRole } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass TicketingSystem extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            ticketingSystem: '',\r\n            ticketingSystemType:'',\r\n            url: '',\r\n            serviceAccount: '',\r\n            serviceAccount: '',\r\n            systemId: '',\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        }\r\n    }\r\n    \r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    async createTicketingSystem() {\r\n        const ticketingSystem = {\r\n            url: this.state.url,\r\n            serviceAccount: this.state.serviceAccount,\r\n            serviceAccountSecret: this.state.serviceAccountSecret,\r\n            systemId: this.state.systemId\r\n        }\r\n        return await apiTicketingSystemPost(this.props.serviceUrl, ticketingSystem);\r\n    }\r\n\r\n    async updateTicketingSystem() {\r\n        const ticketingSystem = {\r\n            id: this.state.ticketingSystem.id,\r\n            url: this.state.url,\r\n            serviceAccount: this.state.serviceAccount,\r\n            serviceAccountSecret: this.state.serviceAccountSecret,\r\n            systemId: this.state.systemId\r\n        }\r\n        return await apiTicketingSystemPut(this.props.serviceUrl, ticketingSystem);\r\n    }\r\n\r\n    async getTicketingSystems() {\r\n        const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl)\r\n        if (ticketingSystems.data.length > 0) {\r\n            const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length-1]\r\n            \r\n            this.setState({\r\n                ticketingSystem: currentTicketingSystem,\r\n                url: currentTicketingSystem.url,\r\n                serviceAccount: currentTicketingSystem.serviceAccount,\r\n                serviceAccountSecret: currentTicketingSystem.serviceAccountSecret,\r\n                systemId: currentTicketingSystem.systemId\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.getTicketingSystems();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n      \r\n        if (authenticated && changedAuth) {\r\n            this.getTicketingSystems();\r\n        }\r\n    }\r\n\r\n    async deleteTicketingSystem() {\r\n        return await apiTicketingSystemDelete(this.props.serviceUrl, this.state.ticketingSystem.id);\r\n    }\r\n\r\n    handleDelete(e) {\r\n        if (window.confirm(\"Are you sure you want to delete this ticketing system?\")) {\r\n            this.deleteTicketingSystem().then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.deleted'),\r\n                    submitColour: '#24a148'\r\n                })\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        event.preventDefault();\r\n        if (this.state.ticketingSystem === '') {\r\n            this.createTicketingSystem().then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.created'),\r\n                    submitColour: '#24a148'\r\n                })\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n        else {\r\n            this.updateTicketingSystem().then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.updated'),\r\n                    submitColour: '#24a148'\r\n                })\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    render() { \r\n        const ticketingSystem = ['Jira', 'Other'];\r\n        if (hasKeycloakClientRole('ROLE_ADMIN')) {\r\n            return (\r\n                <div className=\"cp-form\">\r\n                    <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <div className=\"bx--grid\">\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <Select defaultValue=\"ticketing-system\" name=\"ticketingSystemType\" labelText={i18n.t('adminConfig.integrationTicketingSystem.selectBackendTicketingSystem')} value={this.state.ticketingSystemType} onChange={this.handleChanges}>\r\n                                        <SelectItem\r\n                                            text={i18n.t('adminConfig.integrationTicketingSystem.select')}\r\n                                            value=\"ticketing-system\"\r\n                                        />\r\n                                        {ticketingSystem.map((ticketingSystem, i) => <SelectItem key={i} text={ticketingSystem} value={ticketingSystem.toLowerCase()}>{ticketingSystem}</SelectItem>)}\r\n                                    </Select>\r\n                                    <TextInput name=\"serviceAccount\" labelText={i18n.t('adminConfig.integrationTicketingSystem.userName')} value={this.state.serviceAccount} onChange={this.handleChanges}/>\r\n                                    <TextInput name=\"systemId\" labelText={i18n.t('adminConfig.integrationTicketingSystem.projectName')} value={this.state.systemId} onChange={this.handleChanges}/>\r\n                                </div>\r\n                                <div className=\"bx--col\">\r\n                                    <TextInput name=\"url\" labelText={i18n.t('adminConfig.integrationTicketingSystem.url')} value={this.state.url} onChange={this.handleChanges}/>\r\n                                    <TextInput name=\"serviceAccountSecret\" type=\"password\" labelText={i18n.t('adminConfig.integrationTicketingSystem.password')} value={this.state.serviceAccountSecret} onChange={this.handleChanges}/>\r\n                                </div>\r\n                            </div>\r\n                            <Button kind=\"primary\" tabIndex={0} type=\"submit\"> {i18n.t('buttons.submit')}  </Button>\r\n                            {this.state.ticketingSystem ?\r\n                                <Button kind=\"danger\" onClick={() => this.handleDelete()}> Delete </Button> : null\r\n                            }\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            );\r\n        }\r\n        // Unauthorized\r\n        else {\r\n            return(null)\r\n        }\r\n    }\r\n}\r\n \r\nexport default withKeycloak(TicketingSystem);","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/entando-versions';\r\n\r\nexport const apiProductVersionsGet = async (serviceUrl) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'GET',\r\n    };\r\n\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionGet = async (serviceUrl, versionId) => {\r\n  const url = `${serviceUrl}/${resource}/${versionId}`;\r\n  const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiUpdateProductVersionsStatus = async (serviceUrl, id) => {\r\n    const url = `${serviceUrl}/${resource}/${id}`;\r\n    const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'PUT',\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPost = async (serviceUrl, productVersion) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'POST',\r\n      body: productVersion ? JSON.stringify(productVersion) : null,\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPut = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProductVersionPost } from '../../api/productVersion';\r\nimport moment from 'moment';\r\n\r\nclass AddProductVersionModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black'\r\n    };\r\n\r\n    this.baseState = this.state\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    if (typeof this.state.endDate !== 'undefined') {\r\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['endDate'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async addProductVersion() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProductVersionPost(this.props.serviceUrl, this.state);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      this.addProductVersion().then(result => {\r\n        this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148'\r\n        })\r\n        this.props.updateProductVersions();\r\n      }).catch(err => {\r\n          this.setState({\r\n              submitMsg: i18n.t('submitMessages.error'),\r\n              submitColour: '#da1e28'\r\n          })\r\n      });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const customerModalElement = document.querySelector('#modal-form-product-version');\r\n    if(!customerModalElement.className.includes(\"is-visible\")) {\r\n      this.setState(this.baseState);\r\n    }\r\n  }\r\n\r\n  handleStartDateChange = (date) => {\r\n    this.setState({\r\n        startDate: moment(date[0].toISOString()).format('MM/DD/YYYY')\r\n    })\r\n  }\r\n\r\n  handleEndDateChange = (date) => {\r\n    this.setState({\r\n        endDate: moment(date[0].toISOString()).format('MM/DD/YYYY')\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    const modalOpenButton = document.querySelector('.add-product-version-button');\r\n    modalOpenButton.addEventListener(\"click\", this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProductVersion')}\r\n        modalHeading={i18n.t('adminDashboard.addProductVersion.title')}\r\n        buttonTriggerClassName=\"add-product-version bx--btn bx--btn--tertiary add-product-version-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-product-version\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          <p> {i18n.t('adminDashboard.addProductVersion.desc')} </p>\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProductVersion.productVersion')}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n              <DatePickerInput\r\n                name=\"startDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionStartDate')}\r\n                value={this.state.startDate}\r\n                //onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['startDate']}\r\n              />\r\n            </DatePicker>\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleEndDateChange}>\r\n              <DatePickerInput\r\n                name=\"endDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionEndDate')}\r\n                value={this.state.endDate}\r\n                //onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['endDate']}\r\n              />\r\n            </DatePicker>\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProductVersionModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProductVersionGet, apiProductVersionPut } from '../../api/productVersion';\r\nimport moment from 'moment';\r\n\r\nclass EditProjectModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            name: '',\r\n            startDate: '',\r\n            endDate: '',\r\n            invalid: {},\r\n            modalId: '',\r\n            buttonId: '',\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        //name\r\n        if(this.state.name === ''){\r\n          formIsValid = false;\r\n          invalid[\"name\"] = true;\r\n        }\r\n\r\n        if(typeof this.state.startDate !== \"undefined\"){\r\n            if(!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)){\r\n              formIsValid = false;\r\n              invalid['startDate'] = true;\r\n            }      \t\r\n        }\r\n\r\n        if(typeof this.state.endDate !== \"undefined\"){\r\n            if(!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)){\r\n              formIsValid = false;\r\n              invalid['endDate'] = true;\r\n            }      \t\r\n        }\r\n\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n        if (authenticated && changedAuth) {\r\n            this.getVersionDetails();\r\n        }\r\n      }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleStartDateChange = (date) => {\r\n        this.setState({\r\n            startDate: moment(date[0].toISOString()).format('MM/DD/YYYY')\r\n        })\r\n    }\r\n\r\n    handleEndDateChange = (date) => {\r\n        this.setState({\r\n            endDate: moment(date[0].toISOString()).format('MM/DD/YYYY')\r\n        })\r\n    }\r\n\r\n\r\n    async getVersionDetails() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const version = await apiProductVersionGet(this.props.serviceUrl, this.props.version.id);\r\n            this.setState({\r\n                name: version.data.name,\r\n                startDate: moment(version.data.startDate).format('MM/DD/YYYY'),\r\n                endDate: moment(version.data.endDate).format('MM/DD/YYYY'),\r\n                modalId: \"modal-form-version-edit-\" + version.data.id,\r\n                buttonId: \"edit-version-button-\" + version.data.id\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    async versionPut(version) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            return await apiProductVersionPut(this.props.serviceUrl, version);\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (e) => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const version = {\r\n                id: this.props.version.id,\r\n                name: this.state.name,\r\n                startDate: moment(this.state.startDate).format(),\r\n                endDate: moment(this.state.endDate).format()\r\n            }\r\n            this.versionPut(version).then(result => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.updated'),\r\n                    submitColour: '#24a148'\r\n                })\r\n                this.props.updateProductVersions();\r\n            }).catch(err => {\r\n                this.setState({\r\n                    submitMsg: i18n.t('submitMessages.error'),\r\n                    submitColour: '#da1e28'\r\n                })\r\n            });\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            this.getVersionDetails();\r\n            const modalOpenButton = document.querySelector('.edit-version-button-' + this.props.version.id);\r\n            modalOpenButton.addEventListener(\"click\", this.clearValues, false);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const buttonClassName = \"bx--btn bx--btn--ghost edit-version-button-\" + this.props.version.id;\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\r\n                buttonTriggerClassName={buttonClassName}\r\n                className=\"modal-form\"\r\n                id={this.state.modalId}\r\n                handleSubmit={this.handleFormSubmit}\r\n                primaryButtonText={i18n.t('modalText.save')}\r\n                secondaryButtonText={i18n.t('modalText.cancel')}\r\n                modalLabel={<p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>}\r\n            >\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput \r\n                            name=\"name\" \r\n                            labelText={i18n.t('adminDashboard.addProject.projectName') + \" *\"} \r\n                            value={this.state.name} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.required')} \r\n                            invalid={this.state.invalid[\"name\"]} \r\n                        />\r\n                        <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n                            <DatePickerInput\r\n                                name=\"startDate\"\r\n                                placeholder=\"mm/dd/yyyy\"\r\n                                labelText={i18n.t('subscriptionDetails.startDate') + \" *\"}\r\n                                value={this.state.startDate}\r\n                                //onChange={this.handleChanges}\r\n                                type=\"text\"\r\n                                invalidText={i18n.t('validation.invalid.date')} \r\n                                invalid={this.state.invalid['startDate']} \r\n                            />\r\n                        </DatePicker>\r\n                        <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleEndDateChange} name=\"endDate\">\r\n                            <DatePickerInput\r\n                                name=\"endDate\"\r\n                                placeholder=\"mm/dd/yyyy\"\r\n                                labelText={i18n.t('subscriptionDetails.endDate') + \" *\"}\r\n                                value={this.state.endDate}\r\n                                onChange={this.handleChanges}\r\n                                type=\"text\"\r\n                                invalidText={i18n.t('validation.invalid.date')} \r\n                                invalid={this.state.invalid['endDate']} \r\n                            />\r\n                        </DatePicker>\r\n                    </Form>\r\n                </div> \r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withKeycloak(EditProjectModal)","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\n\r\nclass DeleteModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n    }\r\n\r\n    render() {\r\n        const buttonClassName = \"bx--btn bx--btn--danger delete-button\";\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.delete')}\r\n                modalHeading={i18n.t('adminDashboard.editCustomer.title')}\r\n                buttonTriggerClassName={buttonClassName}\r\n                className=\"modal-form\"\r\n            >\r\n                <div className=\"form-container\">\r\n                </div>\r\n            </ModalWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(DeleteModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  ToggleSmall,\r\n  Button\r\n} from 'carbon-components-react';\r\nimport { SubtractAlt16 } from '@carbon/icons-react';\r\nimport { apiProductVersionDelete, apiProductVersionsGet, apiUpdateProductVersionsStatus } from '../../../api/productVersion';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport AddProductVersionModal from '../AddProductVersionModal';\r\nimport { hasKeycloakClientRole } from '../../../api/helpers';\r\nimport DeleteModal from '../DeleteModal';\r\nimport EditCustomerModal from '../EditCustomerModal';\r\nimport EditVersionModal from '../EditVersionModal';\r\n\r\nclass ProductVersion extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      data: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n      this.getProductVersions();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n        this.getProductVersions();\r\n      }\r\n    }\r\n  }\r\n\r\n  async getProductVersions() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const productVersions = await apiProductVersionsGet(this.props.serviceUrl);\r\n\r\n      this.setState({\r\n        data: productVersions\r\n      });\r\n    }\r\n  }\r\n\r\n  async deleteVersion(id) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProductVersionDelete(this.props.serviceUrl, id);\r\n    }\r\n  }\r\n\r\n  handleDeleteVersion = (e, id) => {\r\n    e.preventDefault();\r\n    if (window.confirm(\"Are you sure you want to delete this Entando version?\")) {\r\n      this.deleteVersion(id).then(result => {\r\n        this.setState({\r\n            submitMsg: i18n.t('submitMessages.deleted'),\r\n            submitColour: '#24a148'\r\n        })\r\n        this.updateProductVersions();\r\n      }).catch(err => {\r\n        this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28'\r\n        })\r\n      });\r\n    }\r\n  }\r\n\r\n  updateProductVersions = () => {\r\n    this.getProductVersions();\r\n  }\r\n\r\n  async handleToggleChange(id) {\r\n    await apiUpdateProductVersionsStatus(this.props.serviceUrl, id);\r\n  }\r\n\r\n  render() {\r\n    if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n      return (\r\n        <div>\r\n          <DataTable rows={rowData} headers={headerData}>\r\n            {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n              <TableContainer>\r\n                <Table {...getTableProps()}>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      {headers.map(header => (\r\n                        <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\r\n                      ))}\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Object.keys(this.state.data).length !== 0\r\n                      ? this.state.data.data.map((productVersion, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{productVersion.name}</TableCell>\r\n                            <TableCell>\r\n                              <ToggleSmall\r\n                                onClick={() => this.handleToggleChange(productVersion.id)}\r\n                                aria-label=\"toggle button\"\r\n                                id={productVersion.id}\r\n                                defaultToggled={productVersion.status ? true : false}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>{productVersion.startDate}</TableCell>\r\n                            <TableCell>{productVersion.endDate}</TableCell>\r\n                            <TableCell>\r\n                              <div style={{display: 'flex'}}>\r\n                                <EditVersionModal version={productVersion} serviceUrl={this.props.serviceUrl} updateProductVersions={this.updateProductVersions} />\r\n                                <a onClick={(e) => this.handleDeleteVersion(e, productVersion.id)} href=\"\" style={{display: 'flex', marginTop: '12px'}}>\r\n                                  <SubtractAlt16 fill=\"red\" style={{marginTop: '4px'}} />\r\n                                  <p>{i18n.t('buttons.delete')}</p>\r\n                                </a>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))\r\n                      : null}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            )}\r\n          </DataTable>\r\n          <br />\r\n          <AddProductVersionModal serviceUrl={this.props.serviceUrl} updateProductVersions={this.updateProductVersions} />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return(<p>You are not authorized to view this</p>)\r\n    }\r\n  }\r\n}\r\n\r\nconst headerData = [\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.entandoVersion'),\r\n    key: 'entVersion'\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.status'),\r\n    key: 'status'\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.startDate'),\r\n    key: 'startDate'\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.supportEndDate'),\r\n    key: 'endDate'\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.action'),\r\n    key: 'action',\r\n}\r\n];\r\n\r\nconst rowData = [\r\n  {\r\n    id: 'a',\r\n    entVersion: '5.2',\r\n    status: <ToggleSmall aria-label=\"toggle button\" defaultToggled id=\"status-1\" />,\r\n    startDate: 'April, 2018',\r\n    endDate: 'April, 2022'\r\n  },\r\n  {\r\n    id: 'b',\r\n    entVersion: '6.3',\r\n    status: <ToggleSmall aria-label=\"toggle button\" id=\"status-2\" />,\r\n    startDate: 'Jile, 2019',\r\n    endDate: 'April, 2023'\r\n  },\r\n  {\r\n    id: 'c',\r\n    entVersion: '6.2',\r\n    status: <ToggleSmall aria-label=\"toggle button\" defaultToggled id=\"status-3\" />,\r\n    startDate: 'September, 2020',\r\n    endDate: 'April, 2024'\r\n  }\r\n];\r\n\r\nexport default withKeycloak(ProductVersion);\r\n","import React from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem, Tile } from 'carbon-components-react';\r\nimport TicketingSystem from './TicketingSystem';\r\nimport ProductVersion from './ProductVersion';\r\nimport { hasKeycloakClientRole } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass AdminConfiguration extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true\r\n    }\r\n    this.adminConfig = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('adminConfig.integrationTicketingSystem.title')}</p>\r\n            <p className=\"desc\">{i18n.t('adminConfig.integrationTicketingSystem.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <TicketingSystem serviceUrl={this.props.serviceUrl} />\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('adminConfig.manageProductVersion.title')}</p>\r\n            <p className=\"desc\">{i18n.t('adminConfig.manageProductVersion.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <ProductVersion serviceUrl={this.props.serviceUrl} />\r\n      }\r\n    ];\r\n  }\r\n\r\ncomponentDidMount() {\r\n  const { keycloak } = this.props;\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n  if (authenticated) {\r\n    this.setState({\r\n      loading: false\r\n    })\r\n  }\r\n}\r\n\r\ncomponentDidUpdate(prevProps) {\r\n  const { keycloak } = this.props;\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n  const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n  if (authenticated && changedAuth) {\r\n    this.setState({\r\n      loading: false\r\n    });\r\n  }\r\n}\r\n\r\nrender() {\r\n  if (!this.state.loading) {\r\n    // Authorized\r\n    if (hasKeycloakClientRole('ROLE_ADMIN')) {\r\n      return(\r\n        <div>\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n          <div className=\"form-container\">\r\n            <Tile>\r\n              <p className=\"title\">{i18n.t('adminConfig.title')}</p>\r\n              <p class=\"desc\">{i18n.t('adminConfig.desc')}</p>\r\n            </Tile>\r\n            <Accordion>\r\n              {this.adminConfig.map((item, index) => (\r\n                <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}>\r\n                  <p>{item.content}</p>\r\n                </AccordionItem>\r\n              ))}\r\n            </Accordion>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    // Unauthorized\r\n    else {\r\n      return(<p>Unauthorized</p>)\r\n    }\r\n  }\r\n  // Loading\r\n  else {\r\n    return(null)\r\n  }\r\n}\r\n\r\n}\r\nexport default withKeycloak(AdminConfiguration);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale'\r\n};\r\n\r\nclass AdminConfigurationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminConfiguration serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-configuration-widget', AdminConfigurationElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale'\r\n};\r\n\r\nclass OpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('open-ticket-widget', OpenTicketElement);\r\n\r\n","import React, { Component } from 'react';\r\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\r\nimport * as portalUserApi from '../../../api/portalusers';\r\nimport { apiAddUserToProject, apiGetProjectIdNames } from '../../../api/projects';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\nclass AssignUser extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            projectId: '',\r\n            assignUser: '',\r\n            users: new Map(),\r\n            projects: {},\r\n            invalid: {},\r\n            submitMsg: '',\r\n            submitColour: 'black'\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            this.fetchData(keycloak.authServerUrl);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n      \r\n        if (authenticated && changedAuth) {\r\n            this.fetchData(keycloak.authServerUrl);\r\n        }\r\n    }\r\n\r\n    async fetchData(keycloakUrl) {\r\n        const users = this.mapKeycloakUserEmails((await apiKeycloakUserGet(keycloakUrl)).data);\r\n        const projects = (await apiGetProjectIdNames(this.props.serviceUrl)).data;\r\n        this.setState({\r\n            users,\r\n            projects\r\n        });\r\n    }\r\n\r\n    mapKeycloakUserEmails = keycloakUsers => {\r\n        const usernameEmailMap = new Map();\r\n        keycloakUsers.forEach(keycloakUser => usernameEmailMap.set(keycloakUser.username, keycloakUser.email));\r\n        return usernameEmailMap;\r\n    };\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleFormSubmit = event => {\r\n        event.preventDefault();\r\n        const { projectId, assignUser } = this.state;\r\n        const formIsValid = this.handleFormValidation();\r\n\r\n        if (formIsValid) {\r\n            this.assignUserToProject(projectId, assignUser).then(res => {\r\n                if (res.status === 201) {\r\n                    this.setState({\r\n                        submitMsg: i18n.t('submitMessages.updated'),\r\n                        submitColour: '#24a148'\r\n                    })\r\n                } else {\r\n                    this.setState({\r\n                        submitMsg: i18n.t('submitMessages.error'),\r\n                        submitColour: '#da1e28'\r\n                    })\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    handleFormValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n        const { projectId, assignUser } = this.state;\r\n\r\n        //name\r\n        if (projectId === '') {\r\n            formIsValid = false;\r\n            invalid['projectId'] = true;\r\n        }\r\n\r\n        //customerNumber\r\n        if (assignUser === '') {\r\n            formIsValid = false;\r\n            invalid['assignUser'] = true;\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    assignUserToProject = async (projectId, username) => {\r\n        const portalUserId = await this.getPortalUserId({ username, email: this.state.users.get(username) });\r\n        return await apiAddUserToProject(this.props.serviceUrl, projectId, portalUserId);\r\n    };\r\n\r\n    getPortalUserId = async keycloakUser => {\r\n        let portalUserId = null;\r\n        try {\r\n            const portalUser = await portalUserApi.apiUserGetByUsername(this.props.serviceUrl, keycloakUser.username);\r\n            portalUserId = portalUser.data.id;\r\n        } catch (e) {\r\n            if (e.message.toLowerCase().includes('not found')) {\r\n                const portalUser = await this.createPortalUser(keycloakUser);\r\n                portalUserId = portalUser.data.id;\r\n            }\r\n        }\r\n\r\n        return portalUserId;\r\n    };\r\n\r\n    createPortalUser = async keycloakUser => {\r\n        return await portalUserApi.apiUserPost(this.props.serviceUrl, { username: keycloakUser.username, email: keycloakUser.email });\r\n    };\r\n\r\n    setupFormComponents() {\r\n        const users = this.state.users;\r\n        const projectIdsNames = this.state.projects;\r\n        let userList, projectList = (userList = null);\r\n\r\n        if (users.size > 0) {\r\n            userList = [...users.keys()].map((assignUser, i) => (\r\n                <SelectItem key={i} text={assignUser} value={assignUser}>\r\n                    {assignUser}\r\n                </SelectItem>\r\n            ));\r\n            userList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.userList')} value=\"\" />);\r\n        } else {\r\n            userList = <SelectItem text={i18n.t('manageUsers.assign.noUsers')} value=\"\" />;\r\n        }\r\n\r\n        if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\r\n            projectList = Object.keys(projectIdsNames).map((projectId, i) => (\r\n                <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>\r\n                    test\r\n                </SelectItem>\r\n            ));\r\n            projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\r\n        } else {\r\n            projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\r\n        }\r\n\r\n        return { userList, projectList };\r\n    }\r\n\r\n    render() {\r\n        const { userList, projectList } = this.setupFormComponents();\r\n\r\n        return (\r\n            <div>\r\n                <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\r\n                <Form onSubmit={this.handleFormSubmit}>\r\n                    <div className=\"bx--grid\">\r\n                        <div className=\"bx--row\">\r\n                            <div className=\"bx--col\">\r\n                                <Select\r\n                                    name=\"projectId\"\r\n                                    labelText={i18n.t('manageUsers.assign.projectName')}\r\n                                    value={this.state.projectId}\r\n                                    onChange={this.handleChanges}\r\n                                    invalidText={i18n.t('validation.invalid.required')}\r\n                                    invalid={this.state.invalid['projectId']}\r\n                                >\r\n                                    {projectList}\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bx--row\">\r\n                            <div className=\"bx--col\">\r\n                                <Select\r\n                                    name=\"assignUser\"\r\n                                    labelText={i18n.t('manageUsers.assign.assignUser')}\r\n                                    value={this.state.assignUser}\r\n                                    onChange={this.handleChanges}\r\n                                    invalidText={i18n.t('validation.invalid.required')}\r\n                                    invalid={this.state.invalid['assignUser']}\r\n                                >\r\n                                    {userList}\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                        <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                            {' '}\r\n                            {i18n.t('buttons.submit')}{' '}\r\n                        </Button>\r\n                    </div>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(AssignUser);\r\n","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\r\nimport { SubtractAlt16 } from '@carbon/icons-react';\r\nimport { apiUsersGet, apiUserDelete } from '../../../api/portalusers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\n\r\nclass DeleteUser extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            portalUsers: new Map(),\r\n            keycloakUsers: new Map(),\r\n            displayUsers: [],\r\n            filterText: ''\r\n        };\r\n        this.headerData = [\r\n            {\r\n                header: i18n.t('manageUsers.delete.userName'),\r\n                key: 'username',\r\n            },\r\n            {\r\n                header: i18n.t('manageUsers.delete.userEmail'),\r\n                key: 'email',\r\n            },\r\n            {\r\n                header: i18n.t('manageUsers.delete.dateAdded'),\r\n                key: 'dateAdded',\r\n            },\r\n            {\r\n                header: i18n.t('manageUsers.delete.userAccess'),\r\n                key: 'userAccess',\r\n            }\r\n        ];\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        if (authenticated) {\r\n            this.fetchData(keycloak.authServerUrl);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n      \r\n        if (authenticated && changedAuth) {\r\n            this.fetchData(keycloak.authServerUrl);\r\n        }\r\n    }\r\n\r\n    async fetchData(keycloakUrl) {\r\n        const { keycloak } = this.props;\r\n\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const portalUsers = this.handleMapFormatting((await apiUsersGet(this.props.serviceUrl)).data);\r\n            const keycloakUsers = this.handleMapFormatting((await apiKeycloakUserGet(keycloakUrl)).data);\r\n\r\n            this.setState({\r\n                portalUsers,\r\n                keycloakUsers\r\n            });\r\n\r\n            this.handleUserDisplay();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Turns the list of user objects into a map where the key is the unique username.\r\n     */\r\n    handleMapFormatting(users) {\r\n        return new Map(users.map(user => [user.username, user]));\r\n    }\r\n\r\n    handleUserDisplay() {\r\n        const { portalUsers, keycloakUsers } = this.state;\r\n        const portalUsernames = [...portalUsers.keys()];\r\n        const keycloakUserObjects = [...keycloakUsers.values()];\r\n\r\n        const displayUsers = keycloakUserObjects.map(keycloakUser => (\r\n            {\r\n                id:  keycloakUser.username,\r\n                username: keycloakUser.username,\r\n                email: keycloakUser.email,\r\n                dateAdded: `${new Date(keycloakUser.createdTimestamp).toLocaleString('default', { month: 'long'})} ${new Date(keycloakUser.createdTimestamp).getFullYear()}`,\r\n                userAccess: portalUsernames.includes(keycloakUser.username) ? <a onClick={event => this.handleRemoveUser(keycloakUser.username, event)} href=\"\"><SubtractAlt16 fill=\"red\" />{i18n.t('manageUsers.delete.removeUser')}</a> : ''\r\n            }\r\n        ));\r\n\r\n        this.setState({\r\n            displayUsers\r\n        });\r\n    }\r\n\r\n    handleRemoveUser = (username, event) => {\r\n        event.preventDefault();\r\n        const userId = this.state.portalUsers.get(username).id;\r\n        apiUserDelete(this.props.serviceUrl, userId).then(res => {\r\n            if (res.status === 204) {\r\n                const updatedPortalUsers = this.state.portalUsers;\r\n                updatedPortalUsers.delete(username);\r\n                this.setState({\r\n                    portalUsers: updatedPortalUsers\r\n                });\r\n                this.handleUserDisplay();\r\n            } else {\r\n                // TODO: Error message\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <DataTable rows={this.state.displayUsers} headers={this.headerData}>\r\n                {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n                    <TableContainer>\r\n                        <Table {...getTableProps()}>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    {headers.map((header) => (\r\n                                        <TableHeader {...getHeaderProps({ header })}>\r\n                                            {header.header}\r\n                                        </TableHeader>\r\n                                    ))}\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {rows.map((row) => (\r\n                                    <TableRow key={row.id}>\r\n                                        {row.cells.map((cell) => (\r\n                                            <TableCell key={cell.id}>{cell.value}</TableCell>\r\n                                        ))}\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                )}\r\n            </DataTable>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(DeleteUser);","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem } from 'carbon-components-react';\r\nimport AssignUser from './AssignUser';\r\nimport DeleteUser from './DeleteUser';\r\nimport { hasKeycloakClientRole } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass ManageUser extends Component {\r\n  userFunctionality;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true\r\n    }\r\n    this.userFunctionality = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.assign.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.assign.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <AssignUser serviceUrl={this.props.serviceUrl} />,\r\n        open: true\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.manage.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.manage.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <DeleteUser serviceUrl={this.props.serviceUrl} />,\r\n        open: false\r\n      }\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  \r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n    }\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  \r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n  \r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      if (hasKeycloakClientRole('ROLE_ADMIN')) {\r\n        return (\r\n          <div>\r\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            <div className=\"form-container\">\r\n              <Accordion>\r\n                {this.userFunctionality.map((item, index) => (\r\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description} open={item.open}>\r\n                    <p>{item.content}</p>\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n      // Unauthorized\r\n      else {\r\n        return(<p>Unauthorized</p>)\r\n      }\r\n    }\r\n    // Loading\r\n    else {\r\n      return(null)\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(ManageUser);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ManageUser from '../components/Admin/ManageUser/ManageUser';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale'\r\n};\r\n\r\nclass ManageUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ManageUser serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('manage-user-widget', ManageUserElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AssignUser from '../components/Admin/ManageUser/AssignUser';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass AssignUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    \r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AssignUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('assign-user-widget', AssignUserElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DeleteUser from '../components/Admin/ManageUser/DeleteUser';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass DeleteUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    \r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <DeleteUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('delete-user-widget', DeleteUserElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketingSystem from '../components/Admin/Configuration/TicketingSystem';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketingSystemElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketingSystem serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticketing-system-widget', TicketingSystemElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ProductVersion from '../components/Admin/Configuration/ProductVersion';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass ProductVersionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ProductVersion serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('product-version-widget', ProductVersionElement);\r\n\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport { apiGetProjectIdNames, apiGetMyProjectIdNames } from '../../api/projects';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectSubscriptionPost, apiRenewSubscription } from '../../api/subscriptions';\r\nimport { apiProductVersionsGet } from '../../api/productVersion';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport { apiAddSubscriptionToProject } from '../../api/projects';\r\nimport moment from 'moment';\r\n\r\nconst subscriptionLevel = {\r\n    GOLD: 'Gold',\r\n    PLATINUM: 'Platinum'\r\n}\r\n\r\nconst subscriptionStatus = {\r\n    requested: 'REQUESTED',\r\n    pending: 'PENDING',\r\n    active: 'ACTIVE',\r\n    expired: 'EXPIRED'\r\n}\r\n\r\nconst subscriptionTypes = ['New', 'Existing'];\r\n\r\nclass SubscriptionForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: true,\r\n            subscriptionType: '',\r\n            projectId: '',\r\n            startDate: '',\r\n            subscriptionLevel: '',\r\n            subscriptionLength: '',\r\n            entandoVersionId: '',\r\n            invalid: {},\r\n            projects: {},\r\n            productVersions: [],\r\n            selectedProjectId: '',\r\n            submitSuccess: false,\r\n            submitError: false,\r\n            submitColour: 'black'\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                this.fetchData();\r\n            }\r\n            this.setState({\r\n                loading: false\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n        if (authenticated && changedAuth) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                this.fetchData();\r\n            }\r\n            this.setState({\r\n                loading: false\r\n            })\r\n        }\r\n    }\r\n\r\n    async fetchData() {\r\n        var projects = ''\r\n        if (hasKeycloakClientRole('ROLE_ADMIN')) {\r\n            projects = (await apiGetProjectIdNames(this.props.serviceUrl)).data;\r\n        }\r\n        else {\r\n            projects = (await apiGetMyProjectIdNames(this.props.serviceUrl)).data;\r\n        }\r\n        const productVersions = (await apiProductVersionsGet(this.props.serviceUrl)).data;\r\n\r\n        this.setState({\r\n            projects,\r\n            productVersions\r\n        });\r\n    }\r\n\r\n    isNumeric(str) {\r\n        if (typeof str != \"string\") \r\n            return false\r\n        return !isNaN(str) && !isNaN(parseFloat(str))\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if (this.state.subscriptionType === '') {\r\n            formIsValid = false;\r\n            invalid['subscriptionType'] = true;\r\n        }\r\n\r\n        if (this.state.projectId === '') {\r\n            formIsValid = false;\r\n            invalid['projectId'] = true;\r\n        }\r\n\r\n        if (typeof this.state.startDate !== \"undefined\") {\r\n            if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n                formIsValid = false;\r\n                invalid[\"startDate\"] = true;\r\n            }\r\n        }\r\n\r\n        if (this.state.subscriptionLength === '' || !this.isNumeric(this.state.subscriptionLength)) {\r\n            formIsValid = false;\r\n            invalid['subscriptionLength'] = true;\r\n        }\r\n\r\n        if (this.state.subscriptionLevel === '') {\r\n            formIsValid = false;\r\n            invalid['level'] = true;\r\n        }\r\n\r\n        if (this.state.entandoVersionId === '') {\r\n            formIsValid = false;\r\n            invalid['entandoVersionId'] = true;\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n        this.setState({\r\n            submitSuccess: false,\r\n            submitError: false\r\n        });\r\n    }\r\n\r\n    handleStartDateChange = (date) => {\r\n        if (date !== \"\") {\r\n            this.setState({\r\n                startDate: moment(date[0].toISOString()).format('MM/DD/YYYY')\r\n            })\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        event.preventDefault();\r\n        this.setState({\r\n            submitSuccess: false,\r\n            submitError: false\r\n        });\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            if (this.state.subscriptionType === 'new') {\r\n                this.newSubscription().then(res => {\r\n                    apiAddSubscriptionToProject(this.props.serviceUrl, this.state.projectId, res.data.id)\r\n                    this.setState({\r\n                        submitSuccess: true,\r\n                        submitError: false,\r\n                        submitColour: '#24a148'\r\n                    });\r\n                }).catch(err => {\r\n                    this.setState({\r\n                        submitSuccess: false,\r\n                        submitError: true,\r\n                        submitColour: '#da1e28'\r\n                    });\r\n                });\r\n            } else if (this.state.subscriptionType === 'existing') {\r\n                this.renewSubscription().then(res => {\r\n                    apiAddSubscriptionToProject(this.props.serviceUrl, this.state.projectId, res.data.id)\r\n                    this.setState({\r\n                        submitSuccess: true,\r\n                        submitError: false,\r\n                        submitColour: '#24a148'\r\n                    });\r\n                }).catch(err => {\r\n                    this.setState({\r\n                        submitSuccess: false,\r\n                        submitError: true,\r\n                        submitColour: '#da1e28'\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    async newSubscription() {\r\n        const subscriptionRequest = {\r\n            entandoVersionId: this.state.entandoVersionId,\r\n            projectId: this.state.projectId,\r\n            projectSubscription: {\r\n                startDate: new Date(this.state.startDate),\r\n                lengthInMonths: this.state.subscriptionLength,\r\n                level: this.state.subscriptionLevel,\r\n                status: this.subscriptionStatus()\r\n            }\r\n        }\r\n\r\n        return await apiProjectSubscriptionPost(this.props.serviceUrl, subscriptionRequest);\r\n    }\r\n\r\n    async renewSubscription() {\r\n        const subscriptionRequest = {\r\n            entandoVersionId: this.state.entandoVersionId,\r\n            projectId: this.state.projectId,\r\n            projectSubscription: {\r\n                startDate: new Date(this.state.startDate),\r\n                lengthInMonths: this.state.subscriptionLength,\r\n                level: this.state.subscriptionLevel,\r\n                status: this.subscriptionStatus()\r\n            }\r\n        }\r\n\r\n        return await apiRenewSubscription(this.props.serviceUrl, subscriptionRequest);\r\n    }\r\n\r\n    subscriptionStatus() {\r\n        return hasKeycloakClientRole('ROLE_ADMIN') ? subscriptionStatus.active : subscriptionStatus.requested;\r\n    }\r\n\r\n    setupFormComponents() {\r\n        const projectIdsNames = this.state.projects;\r\n        let projectList = null;\r\n\r\n        if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\r\n            projectList = Object.keys(projectIdsNames).map((projectId, i) => (\r\n                <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>{projectIdsNames[projectId]}</SelectItem>\r\n            ));\r\n            projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\r\n        } else {\r\n            projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\r\n        }\r\n\r\n        const subscriptionLevelList = Object.entries(subscriptionLevel).map(([key, value]) => (\r\n            <SelectItem key={key} text={value} value={key}>{value}</SelectItem>\r\n        ));\r\n        subscriptionLevelList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseLevel')} value=\"\" />)\r\n\r\n        const versionList = this.state.productVersions.map(version => (\r\n            <SelectItem key={version.id} text={version.name} value={version.id}>{version.name}</SelectItem>\r\n        ));\r\n        versionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseVersion')} value=\"\" />)\r\n\r\n        return { projectList, subscriptionLevelList, versionList }\r\n    }\r\n\r\n    renderForm() {\r\n        const formComponents = this.setupFormComponents()\r\n        const { projectList, subscriptionLevelList, versionList } = formComponents;\r\n        let formInputs;\r\n\r\n        if (this.state.subscriptionType === 'new') {\r\n            formInputs = (\r\n                <div>\r\n                    <p><strong>{i18n.t('subscriptionForm.newSubscription')}</strong></p><br />\r\n                    <div className=\"bx--row\">\r\n                        <div className=\"bx--col\">\r\n                            <Select\r\n                                id=\"projectId\"\r\n                                name=\"projectId\"\r\n                                labelText={i18n.t('subscriptionForm.projectName')}\r\n                                value={this.state.projectId}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.required')}\r\n                                invalid={this.state.invalid['projectId']}\r\n                            >\r\n                                {projectList}\r\n                            </Select>\r\n                            <Select\r\n                                id=\"subscriptionLevel\"\r\n                                name=\"subscriptionLevel\"\r\n                                labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel') + \" *\"}\r\n                                value={this.state.subscriptionLevel} onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.required')}\r\n                                invalid={this.state.invalid['level']}\r\n                            >\r\n                                {subscriptionLevelList}\r\n                            </Select>\r\n                            <Select\r\n                                id=\"entandoVersionId\"\r\n                                name=\"entandoVersionId\"\r\n                                labelText={i18n.t('subscriptionForm.entandoVersion') + \" *\"}\r\n                                value={this.state.entandoVersionId}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.required')}\r\n                                invalid={this.state.invalid['entandoVersionId']}\r\n                            >\r\n                                {versionList}\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"bx--col\">\r\n                            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n                                <DatePickerInput\r\n                                    id=\"startDate\"\r\n                                    name=\"startDate\"\r\n                                    placeholder=\"mm/dd/yyyy\"\r\n                                    labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\r\n                                    value={this.state.startDate}\r\n                                    //onChange={this.handleChanges}\r\n                                    type=\"text\"\r\n                                    invalidText={i18n.t('validation.invalid.date')}\r\n                                    invalid={this.state.invalid['startDate']}\r\n                                />\r\n                            </DatePicker>\r\n                            <TextInput\r\n                                id=\"subscriptionLength\"\r\n                                name=\"subscriptionLength\"\r\n                                labelText={i18n.t('subscriptionForm.desiredSubscriptionLength') + \" *\"}\r\n                                value={this.state.subscriptionLength}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.number')}\r\n                                invalid={this.state.invalid['subscriptionLength']}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else if (this.state.subscriptionType === 'existing') {\r\n            formInputs = (\r\n                <div>\r\n                    <p><strong>{i18n.t('subscriptionForm.renewSubscription')}</strong></p><br />\r\n                    <div className=\"bx--row\">\r\n                        <div className=\"bx--col\">\r\n                            <Select\r\n                                id=\"projectId\"\r\n                                name=\"projectId\"\r\n                                labelText={i18n.t('subscriptionForm.projectName')}\r\n                                value={this.state.projectId}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.required')}\r\n                                invalid={this.state.invalid['projectId']}\r\n                            >\r\n                                {projectList}\r\n                            </Select>\r\n                            <Select\r\n                                id=\"subscriptionLevel\"\r\n                                name=\"subscriptionLevel\"\r\n                                labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel') + \" *\"}\r\n                                value={this.state.subscriptionLevel}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.required')}\r\n                                invalid={this.state.invalid['level']}\r\n                            >\r\n                                {subscriptionLevelList}\r\n                            </Select>\r\n                            <Select\r\n                                id=\"entandoVersionId\"\r\n                                name=\"entandoVersionId\"\r\n                                labelText={i18n.t('subscriptionForm.entandoVersion') + \" *\"}\r\n                                value={this.state.entandoVersionId}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.required')}\r\n                                invalid={this.state.invalid['entandoVersionId']}\r\n                            >\r\n                                {versionList}\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"bx--col\">\r\n                            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n                                <DatePickerInput\r\n                                    id=\"startDate\"\r\n                                    name=\"startDate\"\r\n                                    placeholder=\"mm/dd/yyyy\"\r\n                                    labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\r\n                                    value={this.state.startDate}\r\n                                    //onChange={this.handleChanges}\r\n                                    type=\"text\"\r\n                                    invalidText={i18n.t('validation.invalid.date')}\r\n                                    invalid={this.state.invalid['startDate']}\r\n                                />\r\n                            </DatePicker>\r\n                            <TextInput\r\n                                id=\"subscriptionLength\"\r\n                                name=\"subscriptionLength\"\r\n                                labelText={i18n.t('subscriptionForm.desiredSubscriptionLength') + \" *\"}\r\n                                value={this.state.subscriptionLength}\r\n                                onChange={this.handleChanges}\r\n                                invalidText={i18n.t('validation.invalid.number')}\r\n                                invalid={this.state.invalid['subscriptionLength']}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return formInputs;\r\n    }\r\n\r\n    successErrorMessage() {\r\n        const isAdmin = hasKeycloakClientRole('ROLE_ADMIN');\r\n        const { subscriptionType, submitSuccess, submitError } = this.state;\r\n\r\n        if (subscriptionType === 'new') {\r\n            if (submitSuccess) {\r\n                return isAdmin ? this.createFormMessage('adminSubmitNewSuccess') : this.createFormMessage('customerSubmitSuccess');\r\n            } else if (submitError) {\r\n                return this.createFormMessage('newSubError');\r\n            }\r\n        } else {\r\n            if (submitSuccess) {\r\n                return isAdmin ? this.createFormMessage('adminRenewNewSuccess') : this.createFormMessage('customerSubmitSuccess');\r\n            } else if (submitError) {\r\n                return this.createFormMessage('renewSubError');\r\n            }\r\n        }\r\n    }\r\n\r\n    createFormMessage(subMessageKey) {\r\n        return <p style={{color: this.state.submitColour}}>{i18n.t(`subscriptionForm.${subMessageKey}`)}</p>\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loading) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                return (\r\n                    <div>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3> : \r\n                        hasKeycloakClientRole('ROLE_SUPPORT') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3> : \r\n                        hasKeycloakClientRole('ROLE_CUSTOMER') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3> : \r\n                        hasKeycloakClientRole('ROLE_PARTNER') ? \r\n                            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3> : \r\n                        null}\r\n                        <div className=\"form-container\">\r\n                            {this.successErrorMessage()}\r\n                            <Form onSubmit={this.handleFormSubmit}>\r\n                                <div className=\"form-desc\">\r\n                                    <h4>{i18n.t('subscriptionForm.formTitle')}</h4>\r\n                                </div>\r\n                                <div className=\"bx--grid\">\r\n                                    <div className=\"bx--row\">\r\n                                        <div className=\"bx--col\">\r\n                                            <Select id=\"subscriptionType\" name=\"subscriptionType\" labelText={i18n.t('subscriptionForm.subscriptionType')} required value={this.state.subscriptionType} onChange={this.handleChanges}>\r\n                                                <SelectItem\r\n                                                    text={i18n.t('subscriptionForm.selectType')}\r\n                                                    value=\"\"\r\n                                                />\r\n                                                {subscriptionTypes.map((subscriptionType, i) => <SelectItem key={i} text={subscriptionType} required value={subscriptionType.toLowerCase()}>{subscriptionType}</SelectItem>)}\r\n                                            </Select>\r\n                                        </div>\r\n                                    </div>\r\n                                    {this.renderForm()}\r\n                                    {this.state.subscriptionType ? <Button kind=\"primary\" tabIndex={0} type=\"submit\" > {i18n.t('buttons.submit')}</Button> : ''}\r\n                                </div>\r\n                            </Form>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n            else {\r\n                return(<p>Unauthorized</p>)\r\n            }\r\n        }\r\n        else {\r\n            return(null)\r\n        }\r\n    }\r\n}\r\n\r\nexport default withKeycloak(SubscriptionForm);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SubsciptionForm from '../components/Forms/SubscriptionForm';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale'\r\n};\r\n\r\nclass SubsciptionFormElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <SubsciptionForm serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-form-widget', SubsciptionFormElement);\r\n\r\n"],"sourceRoot":""}