{"version":3,"sources":["i18n.js","auth/KeycloakContext.js","components/__types__/ref.js","auth/withKeycloak.js","api/helpers.js","api/customers.js","components/Admin/AddCustomerModal.js","api/partners.js","api/projects.js","components/Admin/AddPartnerModal.js","components/Admin/AddProjectModal.js","auth/KeycloakViews.js","components/Admin/EditProjectModal.js","components/Customer/customDataTable.js","components/Customer/customerDetails.js","components/Admin/EditCustomerModal.js","components/Customer/CustomerAccordian.js","api/subscriptions.js","api/productVersion.js","components/Forms/SubscriptionForm.js","api/portalusers.js","api/keycloak.js","components/Admin/ManageUser/AssignUser.js","components/Admin/ManageUser/DeleteUser.js","components/Admin/ManageUser/ManageUser.js","components/Admin/AdminDashboard.js","helpers/widgetEvents.js","custom-elements/widgetEventTypes.js","custom-elements/AdminDashboardElement.js","api/tickets.js","api/ticketingsystem.js","components/SubscriptionDetails/TicketList.js","components/Admin/EditSubscriptionModal.js","components/SubscriptionDetails/subscription.js","components/App.js","custom-elements/AdminAddCustomerElement.js","components/Admin/RoleCheck.js","custom-elements/AdminRoleCheckElement.js","custom-elements/CustomDataTableElement.js","custom-elements/CustomerDetailsElement.js","custom-elements/SubscriptionElement.js","components/Forms/openTicket.js","custom-elements/FormsOpenTicketElement.js","components/Navigation/Navigation.js","custom-elements/NavigationElement.js","components/Forms/enhancementRequest.js","custom-elements/FormsEnhancementRequestElement.js","custom-elements/AppElement.js","custom-elements/TicketListElement.js","components/Admin/Configuration/TicketingSystem.js","components/Admin/AddProductVersionModal.js","components/Admin/Configuration/ProductVersion.js","components/Admin/Configuration/AdminConfiguration.js","custom-elements/AdminConfigurationElement.js","custom-elements/OpenTicketElement.js","custom-elements/ManageUserElement.js","custom-elements/AssignUserElement.js","custom-elements/DeleteUserElement.js","custom-elements/TicketingSystemElement.js","custom-elements/ProductVersionElement.js","custom-elements/SubscriptionFormElement.js"],"names":["i18n","defaultLocale","locale","fallbacks","translations","en","it","KeycloakContext","PropTypes","oneOfType","func","shape","current","elementType","React","createContext","withKeycloak","WrappedComponent","WithKeycloakComponent","renderWrappedComponent","value","props","forwardedRef","rest","ref","keycloak","Consumer","this","Component","defaultProps","forwardRef","getKeycloakToken","window","entando","authenticated","token","hasKeycloakClientRole","clientRole","resourceAccess","client","item","roles","includes","getDefaultOptions","headers","Headers","Authorization","getDefaultKeycloakOptions","getUrl","url","request","options","a","fetch","response","has","parseInt","get","status","data","json","Promise","reject","Error","statusText","resource","apiCustomersGet","serviceUrl","method","apiCustomerGet","id","apiCustomerPost","customer","body","JSON","stringify","apiCustomerPut","apiGetCustomersProjects","customerId","apiAddProjectToCustomer","projectId","apiAdminCustomersGet","myResource","apiMyCustomersGet","apiGetMyCustomersProjects","handleChanges","e","input","target","name","setState","handleFormSubmit","handleValidation","state","render","location","reload","customerNumber","contactName","contactPhone","contactEmail","notes","invalid","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","ModalWrapper","buttonTriggerText","t","modalHeading","buttonTriggerClassName","className","handleSubmit","Form","onSubmit","TextInput","labelText","onChange","invalidText","TextArea","apiPartnerPost","partner","apiProjectsGet","apiProjectGet","apiProjectPost","project","apiProjectPut","apiAddTicketToProject","ticketId","apiAddUserToProject","userId","apiAddPartnerToProject","partnerId","apiGetProjectIdNames","apiAdminProjectsGet","apiMyProjectsGet","partnerNumber","partnerPost","projectList","prevProps","initialized","changedAuth","getProjects","projects","result","Select","defaultValue","SelectItem","disabled","text","Object","keys","map","i","description","systemId","alert","projectPost","customerList","getCustomers","getAllProjects","customers","label","AuthenticatedView","children","UnauthenticatedView","projectPut","CustomTable","fetchData","DataTable","rows","rowData","headerData","getHeaderProps","getTableProps","TableContainer","title","Table","TableHead","TableRow","header","TableHeader","TableBody","index","projectSubscriptions","TableCell","partners","entandoVersion","tickets","sub","to","String","Date","startDate","toDateString","setMonth","getMonth","lengthInMonths","key","projectName","href","partnerName","endDate","openTickets","getCustomer","Tile","updateCustomer","getCustomersProjects","AccordionItem","apiSubscriptionGet","apiProjectSubscriptionPut","projectSubscriptionCreation","apiGetMySubscription","apiProductVersionsGet","apiUpdateProductVersionsStatus","apiProductVersionPost","productVersion","subscriptionLevel","GOLD","PLATINUM","console","log","event","preventDefault","customerNo","customerName","subscriptionType","customerEmail","subscriptionLength","contactNo","productVersions","selectedProjectId","match","projectIdsNames","unshift","subscriptionList","entries","versionList","version","formComponents","setupFormComponents","DatePicker","dateFormat","datePickerType","DatePickerInput","placeholder","type","toLowerCase","Button","kind","tabIndex","apiUserDelete","apiUsersGet","apiUserPost","user","apiUserGetByUsername","username","apiKeycloakUserGet","client_id","password","grant_type","mapKeycloakUserEmails","keycloakUsers","usernameEmailMap","Map","forEach","keycloakUser","set","email","assignUser","handleFormValidation","assignUserToProject","then","res","getPortalUserId","users","portalUserId","portalUserApi","portalUser","message","createPortalUser","keycloakUrl","userList","size","handleRemoveUser","portalUsers","updatedPortalUsers","delete","handleUserDisplay","displayUsers","filterText","handleMapFormatting","portalUsernames","values","dateAdded","createdTimestamp","toLocaleString","month","getFullYear","userAccess","onClick","fill","row","cells","cell","ManageUser","userFunctionality","content","open","Accordion","toString","handleSearch","newFilteredState","filter","startsWith","filteredCustomers","currentPage","undefined","forceUpdate","customersProjects","role","numberOfPages","Math","ceil","Search","placeHolderText","onKeyPress","indexOfLastItem","firstIndexOfCurrentPage","PaginationNav","loop","Boolean","page","Number","totalItems","itemsShown","cssClass","subscribeToWidgetEvent","eventType","eventHandler","addEventListener","removeEventListener","KEYCLOAK_EVENT_TYPE","getKeycloakInstance","ATTRIBUTES","hidden","paginationMode","disableDefaultEventHandler","AdminDashboardElement","mountPoint","document","createElement","unsubscribeFromKeycloakEvent","appendChild","getAttribute","ReactDOM","Provider","HTMLElement","customElements","define","jiraResource","apiJiraTicketsGet","organization","apiJiraTicketPost","ticket","apiTicketingSystemDelete","apiTicketingSystemsGet","apiTicketingSystemPost","ticketingsystem","apiTicketingSystemPut","TicketList","ticketingSystems","currentTicketingSystem","split","createDate","creationDate","openTicket","subscription","subscriptionRequest","projectSubscription","level","moment","format","subscriptionPut","calendar","subscriptionData","params","getSubscription","quantityRequest","license","exact","path","AdminAddCustomerElement","RoleCheck","roleType","renderForm","AdminRoleCheckElement","CustomDataTableElement","CustomerDetailsElement","SubscriptionElement","createTicket","priority","updateDate","types","priorities","ticketingSystem","fetchProjects","getTicketingSystem","FormsOpenTicketElement","Navigation","NavigationElement","EnhancementRequest","ticketNo","openedBy","enhancementDescription","FormsEnhancementRequestElement","AppElement","TicketListCustomerElement","createTicketingSystem","updateTicketingSystem","ticketingSystemType","serviceAccount","serviceAccountSecret","getTicketingSystems","confirm","handleDelete","ProductVersion","getProductVersions","ToggleSmall","handleToggleChange","aria-label","defaultToggled","entVersion","adminConfig","AdminConfiguration","class","AdminConfigurationElement","OpenTicketElement","ManageUserElement","AssignUserElement","DeleteUserElement","TicketingSystemElement","ProductVersionElement","SubsciptionFormElement"],"mappings":"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","file":"static/js/main.c75cf516.chunk.js","sourcesContent":["import i18n from 'i18n-js';\r\n\r\nimport en from './i18n/locales/en.json';\r\nimport it from './i18n/locales/it.json';\r\n\r\ni18n.defaultLocale = 'en';\r\ni18n.locale = 'en';\r\ni18n.fallbacks = true;\r\ni18n.translations = { en, it };\r\n\r\nexport default i18n;","import React from 'react';\r\n\r\nconst KeycloakContext = React.createContext(null);\r\n\r\nexport default KeycloakContext;\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOfType([\r\n  PropTypes.func,\r\n  PropTypes.shape({ current: PropTypes.elementType }),\r\n  PropTypes.shape(null),\r\n]);\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from '../components/__types__/ref';\r\nimport KeycloakContext from './KeycloakContext';\r\n\r\nexport default function withKeycloak(WrappedComponent) {\r\n  class WithKeycloakComponent extends Component {\r\n    renderWrappedComponent = value => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\r\n    };\r\n\r\n    render() {\r\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  \r\n  WithKeycloakComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n  \r\n\r\n  WithKeycloakComponent.defaultProps = {\r\n    forwardedRef: () => {},\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\r\n}\r\n","export const getKeycloakToken = () => {\r\n  if (\r\n    window &&\r\n    window.entando &&\r\n    window.entando.keycloak &&\r\n    window.entando.keycloak.authenticated\r\n  ) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const hasKeycloakClientRole = (clientRole) => {\r\n  if (getKeycloakToken()) {\r\n    const { resourceAccess } = window.entando.keycloak;\r\n    if (resourceAccess) {\r\n      for (const client in resourceAccess) {\r\n        const item = resourceAccess[client];\r\n        if (item.roles && item.roles.includes(clientRole)) {\r\n          // console.debug(\"Found role {} with client {} \", clientRole, client);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/json'\r\n  }),\r\n});\r\n\r\nexport const getDefaultKeycloakOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/x-www-form-urlencoded'\r\n  }),\r\n});\r\n\r\nexport const getUrl = (url) => {\r\n  return `${url}`;\r\n};\r\n\r\nexport const request = async (url, options) => {\r\n  const response = await fetch(url, options);\r\n\r\n  const headers = {\r\n    ...(response.headers.has('X-Total-Count')\r\n      ? { 'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10) }\r\n      : {}),\r\n  };\r\n\r\n  if (response.status === 204) {\r\n    return { data: '', status: response.status};\r\n  }\r\n\r\n  return response.status >= 200 && response.status < 300\r\n    ? { data: await response.json(), headers, status: response.status }\r\n    : Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/customers';\r\n\r\nexport const apiCustomersDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerGet = async (serviceUrl, id) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGetForAdminDashboard = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/all`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPost = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: customer ? JSON.stringify(customer) : null\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPut = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: customer ? JSON.stringify(customer) : null\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddProjectToCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/customers/admin';\r\nexport const apiAdminCustomersGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/customers/mycustomers';\r\nexport const apiMyCustomersGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerPost } from '../../api/customers';\r\n\r\nclass AddCustomerModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: '',\r\n            customerNumber: '',\r\n            contactName: '',\r\n            contactPhone: '',\r\n            contactEmail: '',\r\n            notes: '',\r\n            invalid: {}\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        //name\r\n        if (this.state.name === '') {\r\n            formIsValid = false;\r\n            invalid['name'] = true;\r\n        }\r\n\r\n        //customerNumber\r\n        if (this.state.customerNumber === '') {\r\n            formIsValid = false;\r\n            invalid['customerNumber'] = true;\r\n        }\r\n\r\n        //contactEmail\r\n        if (typeof this.state.contactEmail !== 'undefined') {\r\n            let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n            let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n            if (\r\n                !(\r\n                    lastAtPos < lastDotPos &&\r\n                    lastAtPos > 0 &&\r\n                    this.state.contactEmail.indexOf('@@') == -1 &&\r\n                    lastDotPos > 2 &&\r\n                    this.state.contactEmail.length - lastDotPos > 2\r\n                )\r\n            ) {\r\n                formIsValid = false;\r\n                invalid['contactEmail'] = true;\r\n            }\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleFormSubmit = e => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const customer = apiCustomerPost(this.props.serviceUrl, this.state);\r\n            this.render();\r\n            window.location.reload(false);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.addCustomer')}\r\n                modalHeading={i18n.t('adminDashboard.addCustomer.title')}\r\n                buttonTriggerClassName=\"add-customer bx--btn bx--btn--tertiary\"\r\n                className=\"modal-form\"\r\n                id=\"modal-form-customer\"\r\n                handleSubmit={this.handleFormSubmit}\r\n            >\r\n                <div className=\"form-container\">\r\n                    <p> {i18n.t('adminDashboard.addCustomer.desc')} </p>\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput\r\n                            name=\"name\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerName')}\r\n                            value={this.state.name}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['name']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"customerNumber\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerNumber')}\r\n                            value={this.state.customerNumber}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['customerNumber']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactName\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n                            value={this.state.contactName}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactPhone\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n                            value={this.state.contactPhone}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactEmail\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactEmail')}\r\n                            value={this.state.contactEmail}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.email')}\r\n                            invalid={this.state.invalid['contactEmail']}\r\n                        />\r\n                        <TextArea\r\n                            name=\"notes\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n                            value={this.state.notes}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        {/*<button disabled={!this.isValid()} type=\"submit\">Submit</button>*/}\r\n                    </Form>\r\n                </div>\r\n            </ModalWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(AddCustomerModal);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/partners';\r\n\r\nexport const apiPartnerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnersGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnerPost = async (serviceUrl, partner) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: partner ? JSON.stringify(partner) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/projects';\r\n\r\nexport const apiProjectsDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectsGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectGet = async (serviceUrl, id) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}/${id}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectsGetForCustomer = async (serviceUrl, customerNumber) => {\r\n  const url = `${serviceUrl}/${resource}/subscriptions/customer/${customerNumber}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectPost = async (serviceUrl, project) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: project ? JSON.stringify(project) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectPut = async (serviceUrl, project) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: project ? JSON.stringify(project) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddTicketToProject = async (serviceUrl, projectId, ticketId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/${ticketId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddUserToProject = async (serviceUrl, projectId, userId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddPartnerToProject = async (serviceUrl, projectId, partnerId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectsUsers = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectsTickets = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectIdNames = async (serviceUrl) => {\r\n  const url = `${serviceUrl}/${resource}/nameId/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/projects/admin';\r\nexport const apiAdminProjectsGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/projects/myprojects';\r\nexport const apiMyProjectsGet = async (serviceUrl) => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n\r\n  return request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiPartnerPost } from '../../api/partners';\r\nimport { apiProjectPost, apiProjectsGet, apiAddPartnerToProject } from '../../api/projects';\r\n\r\nclass AddPartnerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projectList: {},\r\n      projectId: '',\r\n      name: '',\r\n      partnerNumber: '',\r\n      notes: '',\r\n      invalid: {}\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getProjects();\r\n    }\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //partnerNumber\r\n    if (this.state.partnerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['partnerNumber'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getProjects() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const projects = await apiProjectsGet(this.props.serviceUrl);\r\n      this.setState({ projectList: projects });\r\n    }\r\n  }\r\n\r\n  async partnerPost(partner) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiPartnerPost(this.props.serviceUrl, partner);\r\n      await apiAddPartnerToProject(this.props.serviceUrl, this.state.projectId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const partner = {\r\n        name: this.state.name,\r\n        partnerNumber: this.state.partnerNumber,\r\n        notes: this.state.notes\r\n      };\r\n      this.partnerPost(partner);\r\n      window.location.reload(false);\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getProjects();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addPartner')}\r\n        modalHeading={i18n.t('adminDashboard.addPartner.title')}\r\n        buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-partner\"\r\n        handleSubmit={this.handleFormSubmit}\r\n      >\r\n        <div className=\"form-container\">\r\n          <p> {i18n.t('adminDashboard.addPartner.desc')}</p>\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              defaultValue=\"project-list\"\r\n              name=\"projectId\"\r\n              labelText={i18n.t('adminDashboard.addPartner.projectList')}\r\n              value={this.state.projectId}\r\n              onChange={this.handleChanges}\r\n            >\r\n              <SelectItem disabled text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\r\n              {Object.keys(this.state.projectList).length !== 0\r\n                ? this.state.projectList.data.map((projectList, i) => (\r\n                    <SelectItem key={i} text={projectList.name} value={projectList.id}>\r\n                      {projectList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addPartner.partnerName')}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"partnerNumber\"\r\n              labelText={i18n.t('adminDashboard.addPartner.partnerNumber')}\r\n              value={this.state.partnerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['partnerNumber']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addPartner.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n            {/*<button disabled={!this.isValid()} type=\"submit\">Submit</button>*/}\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddPartnerModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectPost, apiProjectsGet } from '../../api/projects';\r\n\r\nclass AddProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projects: {},\r\n      customerList: {},\r\n      customerId: '',\r\n      name: '',\r\n      description: '',\r\n      systemId: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {}\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //description\r\n    if (this.state.description === '') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') == -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  async getAllProjects() {\r\n    const projects = await apiProjectsGet(this.props.serviceUrl);\r\n    this.setState({\r\n      projects: projects.data\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getCustomers() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customers = await apiCustomersGet(this.props.serviceUrl);\r\n      this.setState({ customerList: customers });\r\n    }\r\n  }\r\n\r\n  async projectPost(project) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiProjectPost(this.props.serviceUrl, project);\r\n      await apiAddProjectToCustomer(this.props.serviceUrl, this.state.customerId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const project = {\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        systemId: this.state.systemId,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes\r\n      };\r\n      for (var i = 0; i < this.state.projects.length; i++) {\r\n        if (project.systemId === this.state.projects[i].systemId) {\r\n          window.alert('That system id is already in use in another project');\r\n          return;\r\n        }\r\n      }\r\n      this.projectPost(project);\r\n      window.location.reload(false);\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n    this.getAllProjects();\r\n  }\r\n\r\n  render() {\r\n    const customerList = ['Customer1', 'Customer2', 'Customer3'];\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProject')}\r\n        modalHeading=\"Add a project\"\r\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-project\"\r\n        handleSubmit={this.handleFormSubmit}\r\n      >\r\n        <div className=\"form-container\">\r\n          <p> {i18n.t('adminDashboard.addProject.desc')} </p>\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              defaultValue=\"customer-list\"\r\n              name=\"customerId\"\r\n              labelText={i18n.t('adminDashboard.addProject.customerList')}\r\n              defaultValue={{ label: \"Select Dept\", value: 0 }}\r\n              value={this.state.customerId}\r\n              onChange={this.handleChanges}\r\n            >\r\n              <SelectItem disabled text={i18n.t('adminDashboard.addProject.selectCustomer')} value=\"customer-list\" />\r\n              {Object.keys(this.state.customerList).length !== 0\r\n                ? this.state.customerList.data.map((customerList, i) => (\r\n                    <SelectItem key={i} text={customerList.name} value={customerList.id}>\r\n                      {customerList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName')}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"description\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectDesc')}\r\n              value={this.state.description}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['description']}\r\n            />\r\n            <TextInput\r\n              name=\"systemId\"\r\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\r\n              value={this.state.systemId}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactEmail')}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n            {/*<button disabled={!this.isValid()} type=\"submit\">Submit</button>*/}\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProjectModal);\r\n","export const AuthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return authenticated ? children : null;\r\n};\r\n\r\nexport const UnauthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return !authenticated ? children : null;\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectPut, apiProjectsGet } from '../../api/projects';\r\n\r\nclass EditProjectModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            projects: {},\r\n            customerList: {},\r\n            customerId: '',\r\n            name: '',\r\n            description: '',\r\n            systemId: '',\r\n            contactName: '',\r\n            contactPhone: '',\r\n            contactEmail:'',\r\n            notes:'',\r\n            invalid: {}\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        //name\r\n        if(this.state.name === ''){\r\n          formIsValid = false;\r\n          invalid[\"name\"] = true;\r\n        }\r\n\r\n        //description\r\n        if(this.state.description === ''){\r\n            formIsValid = false;\r\n            invalid[\"description\"] = true;\r\n        }\r\n\r\n        //contactEmail\r\n        if(typeof this.state.contactEmail !== \"undefined\"){\r\n          let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n          let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n    \r\n          if (!(lastAtPos < lastDotPos && lastAtPos > 0 && this.state.contactEmail.indexOf('@@') == -1 && lastDotPos > 2 && (this.state.contactEmail.length - lastDotPos) > 2)) {\r\n            formIsValid = false;\r\n            invalid[\"contactEmail\"] = true;\r\n          }\r\n        }\r\n    \r\n        this.setState({invalid: invalid});\r\n        return formIsValid;\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n          this.getCustomers();\r\n          this.getAllProjects();\r\n        }\r\n      }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    async getCustomers() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const customers = await apiCustomersGet(this.props.serviceUrl);\r\n            this.setState({customerList: customers})\r\n        }\r\n    }\r\n\r\n    async getAllProjects() {\r\n        const projects = await apiProjectsGet(this.props.serviceUrl);\r\n        this.setState({\r\n          projects: projects.data\r\n        });\r\n      }\r\n\r\n    async projectPut(project) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const result = await apiProjectPut(this.props.serviceUrl, project);\r\n            //await apiAddProjectToCustomer(this.props.serviceUrl, this.state.customerId, result.data.id)\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (e) => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const project = {\r\n                id: this.props.project.id,\r\n                customer: this.props.project.customer,\r\n                name: this.state.name,\r\n                description: this.state.description,\r\n                systemId: this.state.systemId,\r\n                contactName: this.state.contactName,\r\n                contactPhone: this.state.contactPhone,\r\n                contactEmail: this.state.contactEmail,\r\n                notes: this.state.notes\r\n            }\r\n            for (var i = 0; i < this.state.projects.length; i++) {\r\n                if((project.systemId === this.state.projects[i].systemId) && (project.id !== this.state.projects[i].id)) {\r\n                    window.alert('That system id is already in use in another project');\r\n                    return;\r\n                }\r\n            }\r\n            this.projectPut(project);\r\n            window.location.reload(false);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n          this.getCustomers();\r\n          this.getAllProjects();\r\n          this.setState({\r\n            name: this.props.project.name,\r\n            description: this.props.project.description,\r\n            systemId: this.props.project.systemId,\r\n            contactName: this.props.project.contactName,\r\n            contactPhone: this.props.project.contactPhone,\r\n            contactEmail:this.props.project.contactEmail,\r\n            notes:this.props.project.notes\r\n          })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\r\n                buttonTriggerClassName=\"bx--btn bx--btn--ghost\"\r\n                className=\"modal-form\"\r\n                id=\"modal-form-project\"\r\n                handleSubmit={this.handleFormSubmit}\r\n            >\r\n                <div className=\"form-container\">\r\n                    <p> {i18n.t('adminDashboard.addProject.desc')} </p>\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput \r\n                            name=\"name\" \r\n                            labelText={i18n.t('adminDashboard.addProject.projectName')} \r\n                            value={this.state.name} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.required')} \r\n                            invalid={this.state.invalid[\"name\"]} \r\n                        />\r\n                        <TextInput \r\n                            name=\"description\" \r\n                            labelText={i18n.t('adminDashboard.addProject.projectDesc')} \r\n                            value={this.state.description} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.required')} \r\n                            invalid={this.state.invalid[\"description\"]} \r\n                        />\r\n                        <TextInput \r\n                            name=\"systemId\" \r\n                            labelText={i18n.t('adminDashboard.addProject.systemId')} \r\n                            value={this.state.systemId}\r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        <TextInput \r\n                            name=\"contactName\" \r\n                            labelText={i18n.t('adminDashboard.addProject.contactName')} \r\n                            value={this.state.contactName} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        <TextInput \r\n                            name=\"contactPhone\" \r\n                            labelText={i18n.t('adminDashboard.addProject.contactPhone')} \r\n                            value={this.state.contactPhone} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        <TextInput \r\n                            name=\"contactEmail\" \r\n                            labelText={i18n.t('adminDashboard.addProject.contactEmail')} \r\n                            value={this.state.contactEmail} \r\n                            onChange={this.handleChanges} \r\n                            invalidText={i18n.t('validation.invalid.email')} \r\n                            invalid={this.state.invalid[\"contactEmail\"]} \r\n                        />\r\n                        <TextArea \r\n                            name=\"notes\" \r\n                            labelText={i18n.t('adminDashboard.addProject.notes')} \r\n                            value={this.state.notes} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                        {/*<button disabled={!this.isValid()} type=\"submit\">Submit</button>*/}\r\n                    </Form>\r\n                </div> \r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withKeycloak(EditProjectModal)","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\r\nimport '../../index.scss';\r\nimport { apiGetCustomersProjects, apiGetMyCustomersProjects } from '../../api/customers';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../../auth/KeycloakViews';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { Link } from 'react-router-dom';\r\nimport i18n from '../../i18n';\r\nimport EditProjectModal from '../Admin/EditProjectModal'\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\n\r\nclass CustomTable extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      projects: {}\r\n     }\r\n  }\r\n\r\n  async fetchData() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n    if (authenticated) {\r\n      var projects;\r\n      if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n        projects = await apiGetCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\r\n      }\r\n      else {\r\n        projects = await apiGetMyCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\r\n      }\r\n      \r\n      this.setState({\r\n          projects: projects\r\n      });\r\n    }\r\n    this.render();\r\n}\r\n\r\ncomponentDidMount(){\r\n    this.fetchData();\r\n}\r\n\r\ncomponentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div>\r\n        <DataTable rows={rowData} headers={headerData}>\r\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n          <TableContainer title={i18n.t('customerDashboard.subscriptions')} description={i18n.t('customerDashboard.tableDesc')}>\r\n            <Table {...getTableProps()}>\r\n              <TableHead>\r\n                <TableRow>\r\n                  {headers.map((header) => (\r\n                    <TableHeader {...getHeaderProps({ header })}>\r\n                      {header.header}\r\n                    </TableHeader>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n              {Object.keys(this.state.projects).length !== 0 ? \r\n                  this.state.projects.data.map((project, index) => {\r\n                    if (project.projectSubscriptions.length === 0) {\r\n                      return(\r\n                        <TableRow key={index} >\r\n                          <TableCell>{project.name}</TableCell>\r\n                          {project.partners.length !== 0 ? \r\n                            <TableCell>\r\n                              {project.partners.map(partner => (\r\n                                <p>{partner.name}</p>\r\n                              ))}\r\n                            </TableCell> \r\n                          : <TableCell>None</TableCell>}\r\n                          {project.entandoVersion ? <TableCell>{project.entandoVersion.name}</TableCell> : <TableCell>None</TableCell>}\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>None</TableCell>\r\n                          <TableCell>{project.tickets.length}</TableCell>\r\n                          <TableCell>{hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') ? <EditProjectModal project={project} serviceUrl={this.props.serviceUrl}/> : null}</TableCell>\r\n                      </TableRow>\r\n                      )\r\n                    }\r\n                    else {\r\n                      var sub = project.projectSubscriptions[project.projectSubscriptions.length - 1];\r\n                      return(\r\n                          <TableRow key={index} >\r\n                              <TableCell><Link to={`/subscription-details/${sub.id}`}>{project.name}</Link></TableCell>\r\n                              {project.partners.length !== 0 ? \r\n                                <TableCell>\r\n                                  {project.partners.map(partner => (\r\n                                    <p>{partner.name}</p>\r\n                                  ))}\r\n                                </TableCell> \r\n                                : <TableCell>None</TableCell>}\r\n                              {project.entandoVersion ? <TableCell>{project.entandoVersion.name}</TableCell> : <TableCell>None</TableCell>}\r\n                              <TableCell>{sub.status}</TableCell>\r\n                              <TableCell>{String(new Date(sub.startDate).toDateString())}</TableCell>\r\n                              <TableCell>{String(new Date(new Date(sub.startDate).setMonth(new Date(sub.startDate).getMonth() + sub.lengthInMonths)).toDateString())}</TableCell>\r\n                              <TableCell>{project.tickets.length}</TableCell>\r\n                              <TableCell>{hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') ? <EditProjectModal project={project} serviceUrl={this.props.serviceUrl}/> : null}</TableCell>\r\n                          </TableRow>\r\n                        \r\n                      )\r\n                    }\r\n                  }) : null\r\n              }\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </DataTable>\r\n    </div>\r\n  )}\r\n}\r\n\r\nconst headerData = [\r\n  {\r\n    header: i18n.t('customerDashboard.projectName'),\r\n    key: 'projectName',\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.partners'),\r\n    key: 'partners',\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.entandoVersion'),\r\n    key: 'entandoVersion',\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.status'),\r\n    key: 'status',\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.startDate'),\r\n    key: 'startDate',\r\n  },\r\n  {\r\n      header: i18n.t('customerDashboard.endDate'),\r\n      key: 'endDate',\r\n  },\r\n  {\r\n      header: i18n.t('customerDashboard.openTickets'),\r\n      key: 'openTickets',\r\n  },\r\n  {\r\n      header: i18n.t('customerDashboard.action'),\r\n      key: 'action',\r\n  }\r\n];\r\n\r\n\r\nconst rowData = [\r\n  {\r\n       id: 'a',\r\n       projectName: <a href=\"\">Supplier Portal</a>,\r\n       partnerName: 'Leonardo',\r\n       entandoVersion: 5.2,\r\n       startDate: 'October, 2019',\r\n       endDate: 'October, 2022',\r\n       openTickets: '5',\r\n    },\r\n    {\r\n      id: 'b',\r\n      projectName: <a href=\"\">Task Manager</a>,\r\n      partnerName: 'Veriday',\r\n      entandoVersion: 5.2,\r\n      startDate: 'July, 2019',\r\n      endDate: 'July, 2022',\r\n      openTickets: '2',\r\n    },\r\n    {\r\n      id: 'c',\r\n      projectName: <a href=\"\">Sales Coordination App</a>,\r\n      partnerName: 'Accenture',\r\n      entandoVersion: 6.2,\r\n      startDate: 'September, 2019',\r\n      endDate: 'September, 2022',\r\n      openTickets: '2',\r\n    },\r\n    {\r\n      id: 'd',\r\n      projectName: <a href=\"\">Website</a>,\r\n      partnerName: 'Veriday',\r\n      entandoVersion: 5.2,\r\n      startDate: 'October, 2019',\r\n      endDate: 'October, 2022',\r\n      openTickets: '1',\r\n    }  \r\n];\r\n \r\nexport default withKeycloak(CustomTable);","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiCustomerGet } from '../../api/customers';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\n\r\nconst customerData = {\r\n  name: 'Ford',\r\n  id: '5564 4563 3345',\r\n  startDate: '01/01/2020'\r\n};\r\n\r\nclass CustomerDetails extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customer: {}\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomer() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, this.props.customerNumber);\r\n      this.setState({\r\n        customer: customer.data\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, id, startDate } = customerData; //destructuring\r\n    return (\r\n      <div className=\"customer-details\">\r\n        <Tile>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerName')}</strong> {this.state.customer.name}\r\n          </p>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerId')}</strong> {this.state.customer.id}\r\n          </p>\r\n        </Tile>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerDetails);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerPut } from '../../api/customers';\r\n\r\nclass EditCustomerModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            name: '',\r\n            customerNumber: '',\r\n            contactName: '',\r\n            contactPhone: '',\r\n            contactEmail: '',\r\n            notes: '',\r\n            invalid: {}\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        //name\r\n        if (this.state.name === '') {\r\n            formIsValid = false;\r\n            invalid['name'] = true;\r\n        }\r\n\r\n        //customerNumber\r\n        if (this.state.customerNumber === '') {\r\n            formIsValid = false;\r\n            invalid['customerNumber'] = true;\r\n        }\r\n\r\n        //contactEmail\r\n        if (typeof this.state.contactEmail !== 'undefined') {\r\n            let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n            let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n            if (\r\n                !(\r\n                    lastAtPos < lastDotPos &&\r\n                    lastAtPos > 0 &&\r\n                    this.state.contactEmail.indexOf('@@') == -1 &&\r\n                    lastDotPos > 2 &&\r\n                    this.state.contactEmail.length - lastDotPos > 2\r\n                )\r\n            ) {\r\n                formIsValid = false;\r\n                invalid['contactEmail'] = true;\r\n            }\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    async updateCustomer(customer) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const result = await apiCustomerPut(this.props.serviceUrl, customer);\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = e => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            const customer = {\r\n                id: this.props.customer.id,\r\n                name: this.state.name,\r\n                customerNumber: this.state.customerNumber,\r\n                contactName: this.state.contactName,\r\n                contactPhone: this.state.contactPhone,\r\n                contactEmail:this.state.contactEmail,\r\n                notes:this.state.notes\r\n            }\r\n            this.updateCustomer(customer);\r\n            window.location.reload(false);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n          this.setState({\r\n            name: this.props.customer.name,\r\n            customerNumber: this.props.customer.customerNumber,\r\n            contactName: this.props.customer.contactName,\r\n            contactPhone: this.props.customer.contactPhone,\r\n            contactEmail:this.props.customer.contactEmail,\r\n            notes:this.props.customer.notes\r\n          })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n            this.setState({\r\n                name: this.props.customer.name,\r\n                customerNumber: this.props.customer.customerNumber,\r\n                contactName: this.props.customer.contactName,\r\n                contactPhone: this.props.customer.contactPhone,\r\n                contactEmail: this.props.customer.contactEmail,\r\n                notes: this.props.customer.notes\r\n              })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('adminDashboard.editCustomer.title')}\r\n                buttonTriggerClassName=\"bx--btn bx--btn--ghost\"\r\n                className=\"modal-form\"\r\n                id=\"modal-form-customer\"\r\n                handleSubmit={this.handleFormSubmit}\r\n            >\r\n                <div className=\"form-container\">\r\n                    <p> {i18n.t('adminDashboard.editCustomer.desc')} </p>\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <TextInput\r\n                            name=\"name\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerName')}\r\n                            value={this.state.name}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['name']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"customerNumber\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.customerNumber')}\r\n                            value={this.state.customerNumber}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['customerNumber']}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactName\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n                            value={this.state.contactName}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactPhone\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n                            value={this.state.contactPhone}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        <TextInput\r\n                            name=\"contactEmail\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.contactEmail')}\r\n                            value={this.state.contactEmail}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.email')}\r\n                            invalid={this.state.invalid['contactEmail']}\r\n                        />\r\n                        <TextArea\r\n                            name=\"notes\"\r\n                            labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n                            value={this.state.notes}\r\n                            onChange={this.handleChanges}\r\n                        />\r\n                        {/*<button disabled={!this.isValid()} type=\"submit\">Submit</button>*/}\r\n                    </Form>\r\n                </div>\r\n            </ModalWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(EditCustomerModal);\r\n","import React from 'react';\r\nimport { AccordionItem } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerGet, apiGetCustomersProjects,  apiGetMyCustomersProjects } from '../../api/customers';\r\nimport { apiGetProjectsUsers } from '../../api/projects';\r\nimport CustomTable from './customDataTable';\r\nimport CustomerDetails from './customerDetails';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport EditCustomerModal from '../Admin/EditCustomerModal';\r\n\r\nclass CustomerAccordian extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            projects: {},\r\n            customer: {},\r\n            authenticated: false\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.getCustomersProjects(this.props.customerNumber);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n            this.getCustomersProjects(this.props.customerNumber);\r\n        }\r\n      }\r\n\r\n    async getCustomersProjects(id) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const customer = await apiCustomerGet(this.props.serviceUrl, id);\r\n\r\n            var projects;\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_ADMIN')) {\r\n                projects = await apiGetCustomersProjects(this.props.serviceUrl, id);\r\n            }\r\n            else {\r\n                projects = await apiGetMyCustomersProjects(this.props.serviceUrl, id);\r\n            }\r\n\r\n            this.setState({\r\n                projects: projects.data,\r\n                customer: customer.data\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        var { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        return(\r\n            <div>\r\n                <div>\r\n                    {hasKeycloakClientRole('ROLE_CUSTOMER') ? \r\n                        <CustomerDetails serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} /> : null \r\n                    }\r\n                    <AccordionItem title={this.props.title}>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') ?\r\n                            <div><EditCustomerModal serviceUrl={this.props.serviceUrl} customer={this.state.customer} key={this.state.customer.id}/>  <br/></div> : null}\r\n                        <CustomTable serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} />\r\n                    </AccordionItem></div> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withKeycloak(CustomerAccordian);","import { getDefaultOptions, request } from './helpers';\r\n\r\nconst resource = 'api/project-subscriptions'\r\n\r\nexport const apiSubscriptionGet = async (serviceUrl, id) => {\r\n    const url = `${serviceUrl}/${resource}/${id}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'GET',\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\n// Project Subscription creation consists of an object containing a projectSubscription, an entandoVersionId, and a\r\n// project id, see SubscriptionCreationRequest.\r\n/**\r\n * Called to create a new project subscription\r\n * \r\n * @param {string} serviceUrl \r\n * @param {ProjectSubscriptionCreation} projectSubscriptionCreation \r\n * @returns \r\n */\r\nexport const apiProjectSubscriptionPost = async (serviceUrl, projectSubscriptionCreation) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'POST',\r\n        body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiProjectSubscriptionPut = async (serviceUrl, projectSubscriptionCreation) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'PUT',\r\n        body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/project-subscriptions/mysubscription'\r\nexport const apiGetMySubscription = async (serviceUrl, customerId) => {\r\n    const url = `${serviceUrl}/${myResource}/${customerId}`;\r\n    const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'GET'\r\n    };\r\n  \r\n    return request(url, options);\r\n  };","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/entando-versions';\r\n\r\nexport const apiProductVersionsGet = async (serviceUrl) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n        ...getDefaultOptions(),\r\n        method: 'GET',\r\n    };\r\n\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiUpdateProductVersionsStatus = async (serviceUrl, id) => {\r\n    const url = `${serviceUrl}/${resource}/${id}`;\r\n    const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'PUT',\r\n    };\r\n    return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPost = async (serviceUrl, productVersion) => {\r\n    const url = `${serviceUrl}/${resource}`;\r\n    const options = {\r\n      ...getDefaultOptions(),\r\n      method: 'POST',\r\n      body: productVersion ? JSON.stringify(productVersion) : null,\r\n    };\r\n    return request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport { apiGetProjectIdNames } from '../../api/projects';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectSubscriptionPost, apiProjectSubscriptionPut } from '../../api/subscriptions';\r\nimport { apiProductVersionsGet } from '../../api/productVersion';\r\n\r\nconst subscriptionLevel = {\r\n    GOLD: 'Gold',\r\n    PLATINUM: 'Platinum'\r\n}\r\n\r\nconst status = {\r\n    REQUESTED: 'Requested',\r\n    PENDING: 'Pending',\r\n    ACTIVE: 'Active',\r\n    EXPIRED: 'Expired'\r\n}\r\n\r\nclass SubscriptionForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            customerNo: '',\r\n            customerName: '',\r\n            subscriptionType: '',\r\n            customerEmail: '',\r\n            projectName: '',\r\n            startDate: '',\r\n            subscriptionLevel: '',\r\n            subscriptionLength: '',\r\n            entandoVersion: '',\r\n            contactName: '',\r\n            contactEmail: '',\r\n            contactNo: '',\r\n            invalid: {},\r\n            projects: {},\r\n            productVersions: [],\r\n            selectedProjectId: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    async fetchData() {\r\n        const { t, keycloak } = this.props;\r\n\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const projects = (await apiGetProjectIdNames(this.props.serviceUrl)).data;\r\n            const productVersions = (await apiProductVersionsGet(this.props.serviceUrl)).data;\r\n\r\n            this.setState({\r\n                projects,\r\n                productVersions\r\n            });\r\n\r\n            console.log('yaa', productVersions);\r\n        }\r\n    }\r\n\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if (this.state.subscriptionType === '') {\r\n            formIsValid = false;\r\n            invalid['subscriptionType'] = true;\r\n        }\r\n\r\n        if (this.state.customerName === '') {\r\n            formIsValid = false;\r\n            invalid['customerName'] = true;\r\n        }\r\n\r\n        if (this.state.customerNo === '') {\r\n            formIsValid = false;\r\n            invalid['customerNo'] = true;\r\n        }\r\n\r\n        if (typeof this.state.customerEmail !== \"undefined\") {\r\n            let lastAtPos = this.state.customerEmail.lastIndexOf('@');\r\n            let lastDotPos = this.state.customerEmail.lastIndexOf('.');\r\n\r\n            if (!(lastAtPos < lastDotPos && lastAtPos > 0 && this.state.customerEmail.indexOf('@@') == -1 && lastDotPos > 2 && (this.state.customerEmail.length - lastDotPos) > 2)) {\r\n                formIsValid = false;\r\n                invalid['customerEmail'] = true;\r\n            }\r\n        }\r\n\r\n        if (this.state.projectName === '') {\r\n            formIsValid = false;\r\n            invalid['projectName'] = true;\r\n        }\r\n\r\n        if (this.state.contactName === '') {\r\n            formIsValid = false;\r\n            invalid['contactName'] = true;\r\n        }\r\n\r\n        if (typeof this.state.contactEmail !== \"undefined\") {\r\n            let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n            let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n            if (!(lastAtPos < lastDotPos && lastAtPos > 0 && this.state.contactEmail.indexOf('@@') == -1 && lastDotPos > 2 && (this.state.contactEmail.length - lastDotPos) > 2)) {\r\n                formIsValid = false;\r\n                invalid['contactEmail'] = true;\r\n            }\r\n        }\r\n\r\n        if (typeof this.state.startDate !== \"undefined\") {\r\n            if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n                formIsValid = false;\r\n                invalid[\"startDate\"] = true;\r\n            }\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n        console.log(this.state);\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            // placeholder\r\n        }\r\n    };\r\n\r\n    newSubscription() {\r\n\r\n    }\r\n\r\n    renewSubscription() {\r\n\r\n    }\r\n\r\n    setupFormComponents() {\r\n        const projectIdsNames = this.state.projects;\r\n        let projectList = null;\r\n\r\n        if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\r\n            projectList = Object.keys(projectIdsNames).map((projectId, i) => (\r\n                <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>{projectIdsNames[projectId]}</SelectItem>\r\n            ));\r\n            projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\r\n        } else {\r\n            projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\r\n        }\r\n\r\n        const subscriptionList = Object.entries(subscriptionLevel).map(([key, value]) => (\r\n            <SelectItem key={key} text={value} value={key}>{value}</SelectItem>\r\n        ));\r\n        subscriptionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseLevel')} value=\"\" />)\r\n\r\n        const versionList = this.state.productVersions.map(version => (\r\n            <SelectItem key={version.id} text={version.name} value={version.id}>{version.name}</SelectItem>\r\n        ));\r\n        versionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseVersion')} value=\"\" />)\r\n\r\n        return { projectList, subscriptionList, versionList }\r\n    }\r\n\r\n    render() {\r\n        const formComponents = this.setupFormComponents()\r\n        const { projectList, subscriptionList, versionList } = formComponents;\r\n        const subscriptionLength = ['1 Year', '2 Years', '3 Years'];\r\n        \r\n\r\n        return (\r\n            <div>\r\n                <h3 className=\"pageTitle\">{i18n.t('subscriptionForm.title')}</h3>\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <div className=\"form-desc\">\r\n                            <h4>{i18n.t('subscriptionForm.formTitle')}</h4>\r\n                            <p>{i18n.t('subscriptionForm.desc')}</p>\r\n                        </div>\r\n                        <div className=\"bx--grid\">\r\n                            <p><strong>{i18n.t('subscriptionForm.newSubscription')}</strong></p><br />\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <Select\r\n                                        name=\"projectName\"\r\n                                        labelText={i18n.t('subscriptionForm.projectName')}\r\n                                        value={this.state.projectName}\r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['projectName']}\r\n                                    >\r\n                                        {projectList}\r\n                                    </Select>\r\n                                    <Select defaultValue=\"\" name=\"subscriptionLevel\" labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel')} value={this.state.subscriptionLevel} onChange={this.handleChanges}>\r\n                                        {subscriptionList}\r\n                                    </Select>\r\n                                    <Select defaultValue=\"\" name=\"entandoVersion\" labelText={i18n.t('subscriptionForm.entandoVersion')} value={this.state.entandoVersion} onChange={this.handleChanges}>\r\n                                        {versionList}\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"bx--col\">\r\n                                    <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"simple\">\r\n                                        <DatePickerInput\r\n                                            name=\"startDate\"\r\n                                            placeholder=\"mm/dd/yyyy\"\r\n                                            labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\r\n                                            value={this.state.startDate}\r\n                                            onChange={this.handleChanges}\r\n                                            type=\"text\"\r\n                                            invalidText={i18n.t('validation.invalid.date')}\r\n                                            invalid={this.state.invalid['startDate']}\r\n                                        />\r\n                                    </DatePicker>\r\n                                    <Select defaultValue=\"subscription-length\" name=\"subscriptionLength\" labelText={i18n.t('subscriptionForm.desiredSubscriptionLength')} value={this.state.subscriptionLength} onChange={this.handleChanges}>\r\n                                        <SelectItem\r\n                                            text={i18n.t('subscriptionForm.chooseLevel')}\r\n                                            value=\"subscription-length\"\r\n                                        />\r\n                                        {subscriptionLength.map((subscriptionLength, i) => <SelectItem key={i} text={subscriptionLength} value={subscriptionLength.toLowerCase()}>{subscriptionLength}</SelectItem>)}\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n                            <Button kind=\"primary\" tabIndex={0} type=\"submit\" > {i18n.t('buttons.submit')}  </Button>\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(SubscriptionForm);","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/portal-users';\r\n\r\nexport const apiUserDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersPut = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGet = async (serviceUrl, userId) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}/${userId}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserPost = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGetByUsername = async (serviceUrl, username) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}/username/${username}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};","import { getDefaultOptions, getDefaultKeycloakOptions, request, getUrl } from './helpers';\r\n\r\nconst usersResource = 'admin/realms/jhipster/users'\r\nconst tokenResource = 'realms/jhipster/protocol/openid-connect/token';\r\n\r\nexport const apiKeycloakUserGet = async (serviceUrl) => {\r\n  const url = `${serviceUrl}/${usersResource}`;\r\n  const keycloakBody = {\r\n    client_id: \"admin_cli\",\r\n    username: \"admin\",\r\n    password: \"admin\",\r\n    grant_type: \"password\"\r\n  }\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'GET',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiKeycloakToken = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${tokenResource}`\r\n  );\r\n  const keycloakBody = {\r\n    client_id: \"web_app\",\r\n    username: \"admin\",\r\n    password: \"admin\",\r\n    grant_type: \"password\"\r\n  }\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'POST',\r\n    body: keycloakBody ? serialize(keycloakBody) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nfunction serialize(obj) {\r\n  var str = [];\r\n  for (var p in obj)\r\n    if (obj.hasOwnProperty(p)) {\r\n      str.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(obj[p]));\r\n    }\r\n  return str.join(\"&\");\r\n}","import React, { Component } from 'react';\r\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\r\nimport * as portalUserApi from '../../../api/portalusers';\r\nimport { apiAddUserToProject, apiGetProjectIdNames } from '../../../api/projects';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\nclass AssignUser extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            projectId: '',\r\n            assignUser: '',\r\n            users: new Map(),\r\n            projects: {},\r\n            invalid: {}\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    async fetchData() {\r\n        const { t, keycloak } = this.props;\r\n\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const users = this.mapKeycloakUserEmails((await apiKeycloakUserGet(this.props.keycloakUrl)).data);\r\n            const projects = (await apiGetProjectIdNames(this.props.serviceUrl)).data;\r\n            this.setState({\r\n                users,\r\n                projects\r\n            });\r\n            \r\n        }\r\n    }\r\n\r\n    mapKeycloakUserEmails = keycloakUsers => {\r\n        const usernameEmailMap = new Map();\r\n        keycloakUsers.forEach(keycloakUser => usernameEmailMap.set(keycloakUser.username, keycloakUser.email));\r\n        return usernameEmailMap;\r\n    };\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleFormSubmit = event => {\r\n        event.preventDefault();\r\n        const { projectId, assignUser } = this.state;\r\n        const formIsValid = this.handleFormValidation();\r\n\r\n        if (formIsValid) {\r\n            this.assignUserToProject(projectId, assignUser).then(res => {\r\n                if (res.status === 201) {\r\n                    window.location.reload();\r\n                } else {\r\n                    // TODO: Show error message\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    handleFormValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n        const { projectId, assignUser } = this.state;\r\n\r\n        //name\r\n        if (projectId === '') {\r\n            formIsValid = false;\r\n            invalid['projectId'] = true;\r\n        }\r\n\r\n        //customerNumber\r\n        if (assignUser === '') {\r\n            formIsValid = false;\r\n            invalid['assignUser'] = true;\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    assignUserToProject = async (projectId, username) => {\r\n        const portalUserId = await this.getPortalUserId({ username, email: this.state.users.get(username) });\r\n        return await apiAddUserToProject(this.props.serviceUrl, projectId, portalUserId);\r\n    };\r\n\r\n    getPortalUserId = async keycloakUser => {\r\n        let portalUserId = null;\r\n        try {\r\n            const portalUser = await portalUserApi.apiUserGetByUsername(this.props.serviceUrl, keycloakUser.username);\r\n            portalUserId = portalUser.data.id;\r\n        } catch (e) {\r\n            if (e.message.toLowerCase().includes('not found')) {\r\n                const portalUser = await this.createPortalUser(keycloakUser);\r\n                portalUserId = portalUser.data.id;\r\n            }\r\n        }\r\n\r\n        return portalUserId;\r\n    };\r\n\r\n    createPortalUser = async keycloakUser => {\r\n        return await portalUserApi.apiUserPost(this.props.serviceUrl, { username: keycloakUser.username, email: keycloakUser.email });\r\n    };\r\n\r\n    setupFormComponents() {\r\n        const users = this.state.users;\r\n        const projectIdsNames = this.state.projects;\r\n        let userList, projectList = (userList = null);\r\n\r\n        if (users.size > 0) {\r\n            userList = [...users.keys()].map((assignUser, i) => (\r\n                <SelectItem key={i} text={assignUser} value={assignUser}>\r\n                    {assignUser}\r\n                </SelectItem>\r\n            ));\r\n            userList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.userList')} value=\"\" />);\r\n        } else {\r\n            userList = <SelectItem text={i18n.t('manageUsers.assign.noUsers')} value=\"\" />;\r\n        }\r\n\r\n        if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\r\n            projectList = Object.keys(projectIdsNames).map((projectId, i) => (\r\n                <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>\r\n                    test\r\n                </SelectItem>\r\n            ));\r\n            projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\r\n        } else {\r\n            projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\r\n        }\r\n\r\n        return { userList, projectList };\r\n    }\r\n\r\n    render() {\r\n        const { userList, projectList } = this.setupFormComponents();\r\n\r\n        return (\r\n            <div>\r\n                <Form onSubmit={this.handleFormSubmit}>\r\n                    <div className=\"bx--grid\">\r\n                        <div className=\"bx--row\">\r\n                            <div className=\"bx--col\">\r\n                                <Select\r\n                                    name=\"projectId\"\r\n                                    labelText={i18n.t('manageUsers.assign.projectName')}\r\n                                    value={this.state.projectId}\r\n                                    onChange={this.handleChanges}\r\n                                    invalidText={i18n.t('validation.invalid.required')}\r\n                                    invalid={this.state.invalid['projectId']}\r\n                                >\r\n                                    {projectList}\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bx--row\">\r\n                            <div className=\"bx--col\">\r\n                                <Select\r\n                                    name=\"assignUser\"\r\n                                    labelText={i18n.t('manageUsers.assign.assignUser')}\r\n                                    value={this.state.assignUser}\r\n                                    onChange={this.handleChanges}\r\n                                    invalidText={i18n.t('validation.invalid.required')}\r\n                                    invalid={this.state.invalid['assignUser']}\r\n                                >\r\n                                    {userList}\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                        <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                            {' '}\r\n                            {i18n.t('buttons.submit')}{' '}\r\n                        </Button>\r\n                    </div>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(AssignUser);\r\n","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\r\nimport { SubtractAlt16 } from '@carbon/icons-react';\r\nimport { apiUsersGet, apiUserDelete } from '../../../api/portalusers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\n\r\nconst headerData = [\r\n    {\r\n        header: i18n.t('manageUsers.delete.userName'),\r\n        key: 'username',\r\n    },\r\n    {\r\n        header: i18n.t('manageUsers.delete.userEmail'),\r\n        key: 'email',\r\n    },\r\n    {\r\n        header: i18n.t('manageUsers.delete.dateAdded'),\r\n        key: 'dateAdded',\r\n    },\r\n    {\r\n        header: i18n.t('manageUsers.delete.userAccess'),\r\n        key: 'userAccess',\r\n    }\r\n];\r\n\r\nclass DeleteUser extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            portalUsers: new Map(),\r\n            keycloakUsers: new Map(),\r\n            displayUsers: [],\r\n            filterText: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchData();\r\n    }\r\n\r\n    async fetchData() {\r\n        const { keycloak } = this.props;\r\n\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const portalUsers = this.handleMapFormatting((await apiUsersGet(this.props.serviceUrl)).data);\r\n            const keycloakUsers = this.handleMapFormatting((await apiKeycloakUserGet(this.props.keycloakUrl)).data);\r\n\r\n            this.setState({\r\n                portalUsers,\r\n                keycloakUsers\r\n            });\r\n\r\n            this.handleUserDisplay();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Turns the list of user objects into a map where the key is the unique username.\r\n     */\r\n    handleMapFormatting(users) {\r\n        return new Map(users.map(user => [user.username, user]));\r\n    }\r\n\r\n    handleUserDisplay() {\r\n        const { portalUsers, keycloakUsers } = this.state;\r\n        const portalUsernames = [...portalUsers.keys()];\r\n        const keycloakUserObjects = [...keycloakUsers.values()];\r\n\r\n        const displayUsers = keycloakUserObjects.map(keycloakUser => (\r\n            {\r\n                id:  keycloakUser.username,\r\n                username: keycloakUser.username,\r\n                email: keycloakUser.email,\r\n                dateAdded: `${new Date(keycloakUser.createdTimestamp).toLocaleString('default', { month: 'long'})} ${new Date(keycloakUser.createdTimestamp).getFullYear()}`,\r\n                userAccess: portalUsernames.includes(keycloakUser.username) ? <a onClick={event => this.handleRemoveUser(keycloakUser.username, event)} href=\"\"><SubtractAlt16 fill=\"red\" />{i18n.t('manageUsers.delete.removeUser')}</a> : ''\r\n            }\r\n        ));\r\n\r\n        this.setState({\r\n            displayUsers\r\n        });\r\n    }\r\n\r\n    handleRemoveUser = (username, event) => {\r\n        event.preventDefault();\r\n        const userId = this.state.portalUsers.get(username).id;\r\n        apiUserDelete(this.props.serviceUrl, userId).then(res => {\r\n            if (res.status === 204) {\r\n                const updatedPortalUsers = this.state.portalUsers;\r\n                updatedPortalUsers.delete(username);\r\n                this.setState({\r\n                    portalUsers: updatedPortalUsers\r\n                });\r\n                this.handleUserDisplay();\r\n            } else {\r\n                // TODO: Error message\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <DataTable rows={this.state.displayUsers} headers={headerData}>\r\n                {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n                    <TableContainer>\r\n                        <Table {...getTableProps()}>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    {headers.map((header) => (\r\n                                        <TableHeader {...getHeaderProps({ header })}>\r\n                                            {header.header}\r\n                                        </TableHeader>\r\n                                    ))}\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {rows.map((row) => (\r\n                                    <TableRow key={row.id}>\r\n                                        {row.cells.map((cell) => (\r\n                                            <TableCell key={cell.id}>{cell.value}</TableCell>\r\n                                        ))}\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                )}\r\n            </DataTable>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(DeleteUser);","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem } from 'carbon-components-react';\r\nimport AssignUser from './AssignUser';\r\nimport DeleteUser from './DeleteUser';\r\n\r\nclass ManageUser extends Component {\r\n  userFunctionality;\r\n  constructor(props) {\r\n    super(props);\r\n    this.userFunctionality = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.assign.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.assign.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <AssignUser serviceUrl={this.props.serviceUrl} keycloakUrl={this.props.keycloakUrl} />,\r\n        open: true\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.manage.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.manage.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <DeleteUser serviceUrl={this.props.serviceUrl} keycloakUrl={this.props.keycloakUrl} />,\r\n        open: false\r\n      }\r\n    ];\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"pageTitle\">Entando Admin View</h3>\r\n        <div className=\"form-container\">\r\n          <Accordion>\r\n            {this.userFunctionality.map((item, index) => (\r\n              <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description} open={item.open}>\r\n                <p>{item.content}</p>\r\n              </AccordionItem>\r\n            ))}\r\n          </Accordion>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageUser;\r\n","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Accordion, AccordionItem, PaginationNav, Search, Tile, Pagination} from 'carbon-components-react';\r\nimport AddCustomerModal from './AddCustomerModal';\r\nimport AddPartnerModal from './AddPartnerModal';\r\nimport AddProjectModal from './AddProjectModal'\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminCustomersGet, apiCustomersGet, apiMyCustomersGet } from '../../api/customers';\r\nimport CustomerAccordian from '../Customer/CustomerAccordian';\r\nimport { number } from 'prop-types';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport SubscriptionForm from '../Forms/SubscriptionForm';\r\nimport ManageUser from '../Admin/ManageUser/ManageUser';\r\nclass AdminDashboard extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            customers: {},\r\n            customersProjects: {},\r\n            role: '',\r\n            filteredCustomers: {},\r\n            currentPage: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getCustomers();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n          this.getCustomers();\r\n        }\r\n      }\r\n\r\n\r\n    async getCustomers() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            var customers;\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                customers = await apiAdminCustomersGet(this.props.serviceUrl);\r\n            }\r\n            else {\r\n                customers = await apiMyCustomersGet(this.props.serviceUrl);\r\n            }\r\n\r\n            this.setState({\r\n                customers: customers.data,\r\n                filteredCustomers: customers.data\r\n            })\r\n        }\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        if (event.key === 'Enter') {\r\n            const newFilteredState = this.state.customers.filter(customer => customer.name.toLowerCase().startsWith(event.target.value.toLowerCase()))\r\n            this.setState({\r\n                filteredCustomers: newFilteredState,\r\n                currentPage: 0\r\n            })\r\n        }\r\n        else {\r\n            if (event.target.value === '' || event.target.value === undefined) {\r\n                this.setState({\r\n                    filteredCustomers: this.state.customers\r\n                })\r\n            }\r\n        }\r\n        this.forceUpdate();\r\n    }\r\n\r\n    render(){\r\n        var numberOfPages = 1;\r\n        if (Object.keys(this.state.filteredCustomers).length !== 0) {\r\n            numberOfPages = Math.ceil(this.state.filteredCustomers.length / 5);\r\n        }\r\n        else {\r\n            numberOfPages = 1;\r\n        }\r\n        \r\n        const props = () => ({\r\n            loop: Boolean(false),\r\n            page: Number(this.state.currentPage),\r\n            totalItems: Number(numberOfPages),\r\n            itemsShown: Number(1),\r\n            onChange: (event) => this.setState({currentPage: event}),\r\n        });\r\n\r\n        return(\r\n            <div className=\"admin-dashboard\">\r\n                {hasKeycloakClientRole('ROLE_ADMIN') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.title')} Admin {i18n.t('adminDashboard.view')}</h3> : \r\n                hasKeycloakClientRole('ROLE_SUPPORT') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.title')} Support {i18n.t('adminDashboard.view')}</h3> : \r\n                hasKeycloakClientRole('ROLE_CUSTOMER') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.title')} Customer {i18n.t('adminDashboard.view')}</h3> : \r\n                hasKeycloakClientRole('ROLE_PARTNER') ? \r\n                    <h3 className=\"pageTitle\">{i18n.t('adminDashboard.title')} Partner {i18n.t('adminDashboard.view')}</h3> : \r\n                null}\r\n            {hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_PARTNER') ?\r\n                <Tile>\r\n                    \r\n                    <p className=\"title\">{i18n.t('adminDashboard.allCustomers')}</p>\r\n                    <div className=\"bx--row\">\r\n                        <div className=\"bx--col\">\r\n                            <Search onChange={this.handleSearch} id=\"search\" placeHolderText={i18n.t('adminDashboard.searchText')} onKeyPress={this.handleSearch}/>\r\n                        </div>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') ?\r\n                        <div className=\"bx--col\">\r\n                            \r\n                            <div>\r\n                                <AddPartnerModal serviceUrl={this.props.serviceUrl} />\r\n                                <AddCustomerModal serviceUrl={this.props.serviceUrl} />\r\n                                <AddProjectModal serviceUrl={this.props.serviceUrl} />\r\n                            </div>\r\n                        </div> : null}\r\n                    </div>\r\n                </Tile>  \r\n                : null\r\n            }\r\n                    \r\n                <div className=\"form-container\">\r\n                    <Accordion>\r\n                        {Object.keys(this.state.customers).length !== 0 ? this.state.filteredCustomers.map((customer, index) => {\r\n                            // Pagination for Admin and Support roles (5 items per page)\r\n                            var indexOfLastItem = ((this.state.currentPage + 1) * 5) - 1;\r\n                            var firstIndexOfCurrentPage = this.state.currentPage * 5;\r\n                            \r\n                            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                                if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\r\n                                    return(\r\n                                        <CustomerAccordian key={customer.id} serviceUrl={this.props.serviceUrl} customerNumber={customer.id} title={customer.name}/>\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    return(null)\r\n                                }\r\n                            }\r\n                            // For Partner / Customer roles just show what they have access to\r\n                            else {\r\n                                return(null)\r\n                            }\r\n                        }) : null}\r\n                    </Accordion>\r\n                    <PaginationNav {...props()} cssClass='pagination-right' />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default withKeycloak(AdminDashboard);","export const publishWidgetEvent = (eventId, payload) => {\r\n  const widgetEvent = new CustomEvent(eventId, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload =>\r\n  publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","export const INPUT_EVENT_TYPES = {\r\n    formUpdate: 'customer.form.update',\r\n    formCreate: 'customer.form.create',\r\n    formDelete: 'customer.form.delete',\r\n  };\r\n  \r\n  export const OUTPUT_EVENT_TYPES = {\r\n    select: 'customer.table.select',\r\n    add: 'customer.table.add',\r\n    error: 'customer.table.error',\r\n    delete: 'customer.table.delete',\r\n  };\r\n  \r\n  export const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n  ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminDashboard from '../components/Admin/AdminDashboard';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminDashboardElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const keycloakUrl = this.getAttribute(ATTRIBUTES.keycloakUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminDashboard serviceUrl={serviceUrl} keycloakUrl={keycloakUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-dashboard-widget', AdminDashboardElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/tickets';\r\n\r\nexport const apiTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketsGet = async (serviceUrl ) => {\r\n\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketPost = async (serviceUrl, ticket) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\nconst jiraResource = 'api/tickets/ticketingsystem';\r\nexport const apiJiraTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketsGet = async (serviceUrl, projectName, organization) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketPost = async (serviceUrl, projectName, organization, ticket) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/ticketing-systems';\r\n\r\nexport const apiTicketingSystemDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemsGet = async (serviceUrl) => {\r\n  const url = getUrl(\r\n    `${serviceUrl}/${resource}`\r\n  );\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemPost = async (serviceUrl, ticketingsystem) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemPut = async (serviceUrl, ticketingsystem) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\r\n  };\r\n  return request(url, options);\r\n};","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\r\nimport { apiJiraTicketsGet } from '../../api/tickets';\r\nimport { apiTicketingSystemsGet, apiTicketingSystemPost } from '../../api/ticketingsystem';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../../auth/KeycloakViews';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiGetProjectsUsers, apiProjectGet, apiGetProjectsTickets, apiAddTicketToProject } from '../../api/projects';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\n\r\nclass TicketList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { \r\n      tickets: {}\r\n     }\r\n  }\r\n\r\n  async fetchData() {\r\n    const { t, keycloak } = this.props;\r\n    var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      try {\r\n          const project = await apiProjectGet(this.props.serviceUrl, this.props.projectId);\r\n          const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\r\n          const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length-1]\r\n          var tickets = await apiJiraTicketsGet(this.props.serviceUrl, currentTicketingSystem.systemId, project.data.systemId);\r\n          for(var i = 0; i < tickets.data.length; i++) {\r\n            apiAddTicketToProject(this.props.serviceUrl, this.props.projectId, tickets.data[i].id);\r\n          }\r\n          this.setState({\r\n              tickets: tickets\r\n          });\r\n      }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n}\r\n\r\ncomponentDidMount(){\r\n  if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n    this.fetchData();\r\n  }\r\n}\r\n\r\ncomponentDidUpdate(prevProps) {\r\n  const { keycloak } = this.props;\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n  const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n  if (authenticated && changedAuth) {\r\n    this.fetchData();\r\n  }\r\n}\r\n\r\n  render() { \r\n    return ( \r\n      <div>\r\n        <DataTable rows={rowData} headers={headerData}>\r\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n          <TableContainer title=\"List of Tickets\" description=\"Tickets\">\r\n            <Table {...getTableProps()}>\r\n              <TableHead>\r\n                <TableRow>\r\n                  {headers.map((header) => (\r\n                    <TableHeader {...getHeaderProps({ header })}>\r\n                      {header.header}\r\n                    </TableHeader>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {Object.keys(this.state.tickets).length !== 0 ? this.state.tickets.data.map((ticket) => {\r\n                  return (\r\n                    <TableRow key={ticket.id}>\r\n                      <TableCell key={ticket.id}>{ticket.systemId}</TableCell>\r\n                      <TableCell key={ticket.id}>{ticket.systemId.split(\"-\")[0]}</TableCell>\r\n                      <TableCell key={ticket.id}>{ticket.description}</TableCell>\r\n                      <TableCell key={ticket.id}>{ticket.type}</TableCell>\r\n                      <TableCell key={ticket.id}>{new Date(ticket.createDate).toDateString()}</TableCell>\r\n                      <TableCell key={ticket.id}><a href={\"https://jorden-test-partner-portal.atlassian.net/browse/\" + ticket.systemId} target=\"_blank\">View Ticket</a></TableCell>\r\n                    </TableRow>\r\n                  )\r\n                }) : <p>No tickets</p> }\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </DataTable>\r\n    </div>\r\n  )}\r\n}\r\n\r\nconst headerData = [\r\n  {\r\n    header: 'Issue',\r\n    key: 'projectName',\r\n  },\r\n  {\r\n    header: 'Project',\r\n    key: 'project',\r\n  },\r\n  {\r\n    header: 'Description',\r\n    key: 'description',\r\n  },\r\n  {\r\n    header: 'Type',\r\n    key: 'type',\r\n  },\r\n  {\r\n    header: 'Creation Date',\r\n    key: 'creationDate',\r\n  },\r\n  {\r\n      header: 'Link',\r\n      key: 'openTicket',\r\n  },\r\n];\r\n\r\nconst rowData = [\r\n  {\r\n       id: 'a',\r\n       projectName: 'Ticket1',\r\n       project: 'Leonardo',\r\n       entandoVersion: 6.2,\r\n       creationDate: 'October, 2019',\r\n       openTicket: <a href=\"\">Open Ticket</a>,\r\n    },\r\n    {\r\n        id: 'a',\r\n        projectName: 'Ticket1',\r\n        project: 'Leonardo',\r\n        entandoVersion: 6.2,\r\n        creationDate: 'October, 2019',\r\n        openTicket: <a href=\"\">Open Ticket</a>,\r\n    },\r\n    {\r\n        id: 'a',\r\n        projectName: 'Ticket1',\r\n        project: 'Leonardo',\r\n        entandoVersion: 6.2,\r\n        creationDate: 'October, 2019',\r\n        openTicket: <a href=\"\">Open Ticket</a>,\r\n     },\r\n  \r\n];\r\n \r\nexport default withKeycloak(TicketList);","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea, Select, SelectItem, DatePicker, DatePickerInput} from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectSubscriptionPut } from '../../api/subscriptions';\r\nimport moment from 'moment';\r\n\r\nclass EditSubscriptionModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            level: '',\r\n            status: '',\r\n            lengthInMonths: '',\r\n            startDate: '',\r\n            notes: '',\r\n            invalid: {}\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if (this.state.level === 'level') {\r\n            formIsValid = false;\r\n            invalid['level'] = true;\r\n        }\r\n\r\n        if (this.state.status === 'status') {\r\n            formIsValid = false;\r\n            invalid['status'] = true;\r\n        }\r\n\r\n        if(typeof this.state.startDate !== \"undefined\"){\r\n            if(!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)){\r\n              formIsValid = false;\r\n              invalid['startDate'] = true;\r\n            }      \t\r\n        }\r\n\r\n        this.setState({ invalid: invalid });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = e => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    };\r\n\r\n    handleFormSubmit = (e) => {\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            //e.preventDefault();\r\n            console.log(this.props.subscription.id)\r\n            \r\n            const subscriptionRequest = {\r\n                projectSubscription : {\r\n                    id: this.props.subscription.id,\r\n                    level: this.state.level,\r\n                    status: this.state.status,\r\n                    lengthInMonths: this.state.lengthInMonths,\r\n                    startDate: moment(this.state.startDate).format(),\r\n                    notes: this.state.notes,\r\n                    project: this.props.project\r\n                }\r\n            }\r\n\r\n            this.subscriptionPut(subscriptionRequest);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            level: this.props.subscription.level,\r\n            status: this.props.subscription.status,\r\n            lengthInMonths: this.props.subscription.lengthInMonths,\r\n            startDate: moment(this.props.subscription.startDate).calendar(),\r\n            notes: this.props.subscription.notes,\r\n          })\r\n    }\r\n\r\n    async subscriptionPut(subscription) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            const result = await apiProjectSubscriptionPut(this.props.serviceUrl, subscription);\r\n            this.render();\r\n            window.location.reload(false);\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        const levelList = ['GOLD', 'PLATINUM'];\r\n        const statusList = ['NEW', 'ACTIVE', 'EXPIRED'];\r\n        return (\r\n            <ModalWrapper\r\n                buttonTriggerText={i18n.t('buttons.edit')}\r\n                modalHeading={i18n.t('editSubscription.title')}\r\n                buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary\"\r\n                className=\"modal-form\"\r\n                handleSubmit={this.handleFormSubmit}\r\n            >\r\n                <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis. </p>\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <Select\r\n                            name=\"level\"\r\n                            labelText=\"Level\"\r\n                            value={this.state.level}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['level']} \r\n                            >\r\n                            <SelectItem disabled text=\"Select Level\" value=\"level\" />\r\n                            {levelList.map((level, i) => (\r\n                                    <SelectItem key={i} text={level} value={level}>\r\n                                        {level}\r\n                                    </SelectItem>\r\n                            ))}\r\n                        </Select>\r\n                        <Select\r\n                            name=\"status\"\r\n                            labelText=\"status\"\r\n                            value={this.state.status}\r\n                            onChange={this.handleChanges}\r\n                            invalidText={i18n.t('validation.invalid.required')}\r\n                            invalid={this.state.invalid['status']} \r\n                            >\r\n                            <SelectItem disabled text=\"Select Status\" value=\"status\" />\r\n                            {statusList.map((status, i) => (\r\n                                <SelectItem key={i} text={status} value={status}>\r\n                                    {status}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </Select>\r\n                        <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"simple\">\r\n                            <DatePickerInput\r\n                                name=\"startDate\"\r\n                                placeholder=\"mm/dd/yyyy\"\r\n                                labelText=\"Start Date\"\r\n                                value={this.state.startDate}\r\n                                onChange={ this.handleChanges}\r\n                                type=\"text\"\r\n                                invalidText={i18n.t('validation.invalid.date')} \r\n                                invalid={this.state.invalid['startDate']} \r\n                            />\r\n                        </DatePicker>\r\n                        <TextInput name=\"lengthInMonths\" labelText=\"Length In Months\" value={this.state.lengthInMonths} onChange={this.handleChanges} />\r\n                        <TextArea \r\n                            name=\"notes\" \r\n                            labelText={i18n.t('adminDashboard.addProject.notes')} \r\n                            value={this.state.notes} \r\n                            onChange={this.handleChanges} \r\n                        />\r\n                    </Form>\r\n                </div> \r\n            </ModalWrapper>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withKeycloak(EditSubscriptionModal)\r\n\r\n\r\n","import React from 'react';\r\nimport TicketList from './TicketList';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiSubscriptionGet, apiGetMySubscription } from '../../api/subscriptions'\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiUsersGet } from '../../api/portalusers';\r\nimport { apiProjectGet } from '../../api/projects'; \r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\nimport EditSubscriptionModal from '../Admin/EditSubscriptionModal';\r\n\r\nconst subscriptionData = {\r\n    description: 'Entando Product Support Subscription Suplier Portal',\r\n    commitment: 'Leonardo',\r\n    type: 'Product Support Subscription Entando Platform',\r\n    quantityRequest: '1(8 Core)',\r\n    components: '',\r\n    level: 'Gold',\r\n    startDate: 'May 2019',\r\n    endDate: 'May 2020',\r\n    license: 'Free Commercial Open Source',\r\n};\r\n\r\nclass Subscription extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            subscription: '',\r\n            users: {},\r\n            project: ''\r\n        }\r\n    }\r\n\r\n    async getSubscription() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n        if (authenticated) {\r\n            var subscription;\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.match.params.id);\r\n                var project = '';\r\n                if (subscription.data.project) {\r\n                    project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id)\r\n                }\r\n            }\r\n            else if (hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                subscription = await apiGetMySubscription(this.props.serviceUrl, this.props.match.params.id);\r\n                var project = '';\r\n                if (subscription.data.project) {\r\n                    project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id)\r\n                }\r\n            }\r\n            this.setState({\r\n                subscription: subscription,\r\n                project: project\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n            this.getSubscription();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n    \r\n        if (authenticated && changedAuth) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                this.getSubscription();\r\n            }\r\n        }\r\n      }\r\n\r\n    render() {\r\n        const { description, commitment, type, quantityRequest, components, level, startDate, endDate, license } = subscriptionData\r\n        var { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (Object.keys(this.state.subscription).length !== 0) {\r\n            return (\r\n                <div className=\"subscription-details\">\r\n                    <div>\r\n                    <Tile>\r\n                        <div className=\"bx--grid\">\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <p><strong>Description:</strong> {this.state.subscription.data.project.description}</p>\r\n                                    <p><strong>Commitment:</strong>\r\n                                    {this.state.project.data !== '' && Object.keys(this.state.project.data.partners).length !== 0 ? \r\n                                        <>\r\n                                            {this.state.project.data.partners.map(partner => (\r\n                                                <> {partner.name} </>\r\n                                            ))}\r\n                                        </>\r\n                                        : <> None </>\r\n                                    }\r\n                                    </p>\r\n                                    <p><strong>Type:</strong> {type}</p>\r\n                                    <p><strong>Quantity Request:</strong> {quantityRequest}</p>\r\n                                    <p><strong>Status:</strong> {this.state.subscription.data.status}</p>\r\n                                </div>\r\n                                <div className=\"bx--col\">\r\n                                    <p><strong>Level:</strong> {this.state.subscription.data.level}</p>\r\n                                    <p><strong>Start Date:</strong> {String(new Date(this.state.subscription.data.startDate).toDateString())}</p>\r\n                                    <p><strong>End Date:</strong> {String(new Date(new Date(this.state.subscription.data.startDate).setMonth(new Date(this.state.subscription.data.startDate).getMonth() + this.state.subscription.data.lengthInMonths)).toDateString())}</p>\r\n                                    <p><strong>License:</strong> {license}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') ? \r\n                            <EditSubscriptionModal project={this.state.project.data} subscription={this.state.subscription.data} serviceUrl={this.props.serviceUrl}/>\r\n                        : null}\r\n                    </Tile>\r\n                    <br/>\r\n                    <TicketList projectId={this.state.subscription.data.project.id} serviceUrl={this.props.serviceUrl} />\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return(<p>No Data</p>)\r\n        }\r\n    }\r\n}\r\n\r\nexport default withKeycloak(Subscription);","import React, { Component } from 'react';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport AdminDashboard from './Admin/AdminDashboard';\r\nimport Subscription from './SubscriptionDetails/subscription';\r\nimport withKeycloak from '../auth/withKeycloak';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../auth/KeycloakViews';\r\nimport { apiKeycloakToken, apiKeycloakUserGet } from '../api/keycloak';\r\nimport { hasKeycloakClientRole } from '../api/helpers';\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            role: 'admin'\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    }\r\n\r\n    render() {\r\n        var { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n        \r\n        if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT') || hasKeycloakClientRole('ROLE_PARTNER') || hasKeycloakClientRole(\"ROLE_CUSTOMER\")) {\r\n            return (\r\n                <div id=\"entando-customer-portal\">\r\n                    <AuthenticatedView keycloak={keycloak}>\r\n                        <BrowserRouter>\r\n                            <Switch>\r\n                                <Route exact path=\"/\" render={(props) => (\r\n                                    <AdminDashboard {...props} serviceUrl={this.props.serviceUrl} keycloakUrl={this.props.keycloakUrl}/>\r\n                                )}/>\r\n                                <Route path=\"/subscription-details/:id\" render={(props) => (\r\n                                    <Subscription {...props} serviceUrl={this.props.serviceUrl} />\r\n                                )}/>\r\n                            </Switch>\r\n                        </BrowserRouter>\r\n                    </AuthenticatedView>\r\n                    <UnauthenticatedView keycloak={keycloak}>\r\n                        <p>Unauthenticated</p>\r\n                    </UnauthenticatedView>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <div id=\"entando-customer-portal\">\r\n                    <BrowserRouter>\r\n                        <Switch>\r\n                            <Route path=\"/subscription-details/:id\" render={(props) => (\r\n                                <Subscription {...props} serviceUrl={this.props.serviceUrl} />\r\n                            )}/>\r\n                        </Switch>\r\n                    </BrowserRouter>\r\n                </div>    \r\n            )\r\n        }\r\n     }\r\n  }\r\n  \r\nexport default withKeycloak(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AddCustomerModal from '../components/Admin/AddCustomerModal';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminAddCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AddCustomerModal serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-add-customer-widget', AdminAddCustomerElement);\r\n\r\n","import React, {Component} from 'react';\r\nimport { Select, SelectItem} from 'carbon-components-react';\r\nimport CustomerDetails from '../Customer/customerDetails';\r\nimport CustomTable from '../Customer/customDataTable';\r\nimport AdminDashboard from './AdminDashboard';\r\nimport '../../index.scss';\r\n\r\nexport default class RoleCheck extends Component {\r\n    state = {\r\n        roleType: 'customer'\r\n    };\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    render() {\r\n        const roleType = ['Admin', 'Customer'];\r\n        return (\r\n            \r\n                <div className='role-check'>  \r\n                <Select defaultValue=\"role-type\" name=\"roleType\" labelText=\"Select Role(Testing)\" value={this.state.roleType} onChange={this.handleChanges}>\r\n                        <SelectItem\r\n                                text=\"Select Role\"\r\n                                value=\"role-type\"\r\n                        />\r\n                        {roleType.map((roleType, i) => <SelectItem key={i} text={roleType} value={roleType.toLowerCase()}>{roleType}</SelectItem>)}\r\n                        </Select>\r\n                    { this.renderForm()}\r\n                </div>\r\n            \r\n            );\r\n    }\r\n\r\n    // Render Dashboard based on role\r\n    renderForm() {\r\n        if (this.state.roleType === 'customer') return (\r\n            <div>\r\n                 <h3 className=\"pageTitle\">Welcome to Entando Customer Portal</h3>\r\n                <CustomerDetails />\r\n                <CustomTable />\r\n            </div>\r\n        )\r\n        if (this.state.roleType === 'admin') return (\r\n            <div>\r\n                 <h3 className=\"pageTitle\">Welcome to Entando Admin View</h3>\r\n                <AdminDashboard />\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport RoleCheck from '../components/Admin/RoleCheck';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\n  const ATTRIBUTES = {\r\n    hidden: 'hidden',\r\n    locale: 'locale',\r\n    paginationMode: 'pagination-mode',\r\n    disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n    serviceUrl: 'service-url',\r\n  };\r\n\r\nclass AdminRoleCheckElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <RoleCheck serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-rolecheck-widget', AdminRoleCheckElement);\r\n\r\n//export default AdminRoleCheckElement;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomDataTable from '../components/Customer/customDataTable';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\n  const ATTRIBUTES = {\r\n    hidden: 'hidden',\r\n    locale: 'locale',\r\n    paginationMode: 'pagination-mode',\r\n    disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n    serviceUrl: 'service-url',\r\n  };\r\n\r\nclass CustomDataTableElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomDataTable serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('custom-datatable-widget', CustomDataTableElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDetails from '../components/Customer/customerDetails';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\n  const ATTRIBUTES = {\r\n    hidden: 'hidden',\r\n    locale: 'locale',\r\n    paginationMode: 'pagination-mode',\r\n    disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n    serviceUrl: 'service-url',\r\n  };\r\n\r\nclass CustomerDetailsElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDetails serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\ncustomElements.define('customer-details-widget', CustomerDetailsElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Subscription from '../components/SubscriptionDetails/subscription';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass SubscriptionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Subscription serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-widget', SubscriptionElement);\r\n\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectsGet, apiAdminProjectsGet, apiMyProjectsGet, apiAddTicketToProject } from '../../api/projects';\r\nimport { apiUsersGet } from '../../api/portalusers';\r\nimport { apiJiraTicketPost } from '../../api/tickets';\r\nimport { apiTicketingSystemsGet } from '../../api/ticketingsystem';\r\nimport { hasKeycloakClientRole } from '../../api/helpers';\r\n\r\nclass OpenTicket extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            projects: [],\r\n            systemId: '',\r\n            type: '',\r\n            description: '',\r\n            priority: '',\r\n            status: 'To Do',\r\n            createDate: '',\r\n            updateDate: '',\r\n            role: '',\r\n            invalid: {}\r\n        };\r\n        this.types = [\"Bug\", \"Task\"];\r\n        this.priorities = ['Lowest', 'Low', 'High', 'Highest'];\r\n    }\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if(this.state.systemId === ''){\r\n          formIsValid = false;\r\n          invalid['systemId'] = true;\r\n        }\r\n\r\n        if(this.state.type === ''){\r\n            formIsValid = false;\r\n            invalid['type'] = true;\r\n        }\r\n\r\n        if(this.state.description === ''){\r\n            formIsValid = false;\r\n            invalid['description'] = true;\r\n        }\r\n\r\n        this.setState({invalid: invalid});\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            this.createTicket();\r\n            window.location.reload(false);\r\n        }\r\n    };\r\n\r\n    async fetchProjects() {\r\n        const { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n                var projects = await apiAdminProjectsGet(this.props.serviceUrl)\r\n                this.setState({\r\n                    projects: projects.data\r\n                })\r\n            }\r\n            else if (hasKeycloakClientRole('ROLE_CUSTOMER') || hasKeycloakClientRole('ROLE_PARTNER')) {\r\n                var projects = await apiMyProjectsGet(this.props.serviceUrl)\r\n                this.setState({\r\n                    projects: projects.data\r\n                })\r\n            }\r\n        }\r\n\r\n        this.render();\r\n    }\r\n\r\n    async createTicket() {\r\n        const { t, keycloak } = this.props;\r\n        var authenticated = keycloak.initialized && keycloak.authenticated;\r\n    \r\n        if (authenticated) {\r\n            const ticket = {\r\n                systemId: this.state.systemId,\r\n                type: this.state.type,\r\n                description: this.state.description,\r\n                priority: this.state.priority,\r\n                status: 'To Do',\r\n                // these dates are just placeholder to validate the POST request (date will be updated in the backend)\r\n                createDate: '2021-02-22T14:14:09-05:00',\r\n                updateDate: '2021-02-22T14:14:09-05:00'\r\n            }\r\n            const result = await apiJiraTicketPost(this.props.serviceUrl, this.state.ticketingSystem.systemId, this.state.systemId, ticket);\r\n            //const addedTicket = await apiAddTicketToProject(this.props.serviceUrl, this.state.project.id, result.data.id);\r\n        }\r\n    }\r\n\r\n    async getTicketingSystem() {\r\n        const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\r\n        const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length-1]\r\n        this.setState({\r\n            ticketingSystem: currentTicketingSystem\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.fetchProjects();\r\n            this.getTicketingSystem();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n      \r\n        if (authenticated && changedAuth) {\r\n            this.fetchProjects();\r\n            this.getTicketingSystem();\r\n        }\r\n    }\r\n        \r\n    render() {\r\n        return (\r\n            <div>\r\n                <h3 className=\"pageTitle\">{i18n.t('supportTicketForm.title')}</h3>\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <div className=\"form-desc\">\r\n                            <h4>{i18n.t('supportTicketForm.formTitle')}</h4>\r\n                            <p>{i18n.t('supportTicketForm.desc')}</p>\r\n                        </div>\r\n\r\n                        <div className=\"bx--grid\">\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <Select \r\n                                        defaultValue=\"ticketing-system\" \r\n                                        name=\"systemId\" \r\n                                        labelText={i18n.t('supportTicketForm.selectProject')} \r\n                                        value={this.state.systemId} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['systemId']} \r\n                                    >\r\n                                        <SelectItem\r\n                                            text={i18n.t('supportTicketForm.select')}\r\n                                            value=\"ticketing-system\"\r\n                                        />\r\n                                        {Object.keys(this.state.projects).length !== 0 ? this.state.projects.map((project, i) => {\r\n                                        return (\r\n                                            <SelectItem key={i} text={project.name} value={project.systemId}>{project.name}</SelectItem>\r\n                                        )}) : null}\r\n                                    </Select>\r\n                                    <Select \r\n                                        defaultValue=\"Task\" \r\n                                        name=\"type\" \r\n                                        labelText={i18n.t('supportTicketForm.type')} \r\n                                        value={this.state.type} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['type']} \r\n                                    >\r\n                                        <SelectItem\r\n                                            text=\"Select\"\r\n                                            value=\"Task\"\r\n                                        />\r\n                                        {this.types.map((type, i) => (\r\n                                            <SelectItem key={i} text={type} value={type}>{type}</SelectItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                    <Select \r\n                                        defaultValue=\"Low\" \r\n                                        name=\"priority\" \r\n                                        labelText={i18n.t('supportTicketForm.priority')} \r\n                                        value={this.state.priority} \r\n                                        onChange={this.handleChanges}\r\n                                    >\r\n                                        <SelectItem\r\n                                            text=\"Select\"\r\n                                            value=\"Low\"\r\n                                        />\r\n                                        {this.priorities.map((priority, i) => (\r\n                                            <SelectItem key={i} text={priority} value={priority}>{priority}</SelectItem>\r\n                                        ))}\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <TextArea \r\n                                        labelText={i18n.t('supportTicketForm.ticketDescription')} \r\n                                        placeholder={i18n.t('supportTicketForm.addticketDescription')} \r\n                                        name=\"description\" \r\n                                        value={this.state.description} \r\n                                        onChange={this.handleChanges}  \r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['description']} \r\n                                    />\r\n                                    <Button kind=\"primary\" tabIndex={0} type=\"submit\" > {i18n.t('buttons.submit')}  </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            </div>    \r\n        );\r\n    }\r\n}\r\n\r\nexport default withKeycloak(OpenTicket);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass FormsOpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-openticket-widget', FormsOpenTicketElement);\r\n\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n \r\nconst Navigation = () => {\r\n    return (\r\n       <ul id='navigation'>\r\n          <li><NavLink to=\"/\">Home</NavLink></li>\r\n          <li><NavLink to=\"/subscription-details\">Subscription Details</NavLink></li>\r\n          <li><NavLink to=\"/subscription\">New or Renew Subscription</NavLink></li>\r\n          <li><NavLink to=\"/service-ticket\">Open Service Ticket</NavLink></li>\r\n          <li><NavLink to=\"/enhancement\">Request for Enhancement Process</NavLink></li>\r\n          <li><NavLink to=\"/manage-users\">Manage Users</NavLink></li>\r\n          <li><NavLink to=\"/configuration-settings\">Configuration Settings</NavLink></li>\r\n      </ul>\r\n    );\r\n}\r\n \r\nexport default Navigation;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass NavigationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Navigation serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('navigation-widget', NavigationElement);\r\n","import React, {Component} from 'react';\r\nimport { Form, TextInput, TextArea, Button } from 'carbon-components-react';\r\nimport i18n from '../../i18n';\r\n\r\nexport default class EnhancementRequest extends Component {\r\n    state = {\r\n        ticketNo: '',\r\n        customerName: '',\r\n        projectName: '',\r\n        openedBy: '',\r\n        priority: '',\r\n        partnerName: '',\r\n        enhancementDescription: '',\r\n        invalid: {}\r\n    };\r\n\r\n    handleValidation() {\r\n        let invalid = {};\r\n        let formIsValid = true;\r\n\r\n        if(this.state.ticketNo === ''){\r\n          formIsValid = false;\r\n          invalid['ticketNo'] = true;\r\n        }\r\n\r\n        if(this.state.customerName === ''){\r\n            formIsValid = false;\r\n            invalid['customerName'] = true;\r\n        }\r\n\r\n        if(this.state.projectName === ''){\r\n            formIsValid = false;\r\n            invalid['projectName'] = true;\r\n        }\r\n\r\n        if(this.state.openedBy === ''){\r\n            formIsValid = false;\r\n            invalid['openedBy'] = true;\r\n        }\r\n\r\n        if(this.state.partnerName === ''){\r\n            formIsValid = false;\r\n            invalid['partnerName'] = true;\r\n        }\r\n\r\n        if(this.state.enhancementDescription === ''){\r\n            formIsValid = false;\r\n            invalid['enhancementDescription'] = true;\r\n        }\r\n\r\n        this.setState({invalid: invalid});\r\n        return formIsValid;\r\n    }\r\n\r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        console.log(this.state.ticketNo)\r\n        event.preventDefault();\r\n\r\n        const formIsValid = this.handleValidation();\r\n\r\n        if (formIsValid) {\r\n            // placeholder\r\n        }\r\n    };\r\n      \r\n    render() {\r\n        return (\r\n            <div>\r\n                <h3 className=\"pageTitle\">{i18n.t('enhancementForm.title')}</h3>\r\n                <div className=\"form-container\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <div className=\"form-desc\">\r\n                            <h4>{i18n.t('enhancementForm.formTitle')}</h4>\r\n                            <p>{i18n.t('enhancementForm.desc')}</p>\r\n                        </div>\r\n                        <div className=\"bx--grid\">\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <TextInput \r\n                                        name=\"ticketNo\" \r\n                                        labelText={i18n.t('enhancementForm.ticketNumber')} \r\n                                        value={this.state.ticketNo} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['ticketNo']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"projectName\" \r\n                                        labelText={i18n.t('enhancementForm.projectName')} \r\n                                        value={this.state.projectName} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['projectName']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"priority\" \r\n                                        labelText={i18n.t('enhancementForm.priority')} \r\n                                        value={this.state.priority} \r\n                                        onChange={this.handleChanges}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"bx--col\">\r\n                                    <TextInput \r\n                                        name=\"customerName\" \r\n                                        labelText={i18n.t('enhancementForm.customerName')} \r\n                                        value={this.state.customerName} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['customerName']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"openedBy\" \r\n                                        labelText={i18n.t('enhancementForm.ticketOpenedBy')} \r\n                                        value={this.state.openedBy} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['openedBy']} \r\n                                    />\r\n                                    <TextInput \r\n                                        name=\"partnerName\" \r\n                                        labelText={i18n.t('enhancementForm.partnerName')} \r\n                                        value={this.state.partnerName} \r\n                                        onChange={this.handleChanges}\r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['partnerName']} \r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <TextArea \r\n                                        labelText={i18n.t('enhancementForm.enhancementDescription')} \r\n                                        placeholder={i18n.t('enhancementForm.addenhancementDescription')} \r\n                                        name=\"enhancementDescription\"  \r\n                                        value={this.state.enhancementDescription} \r\n                                        onChange={this.handleChanges}  \r\n                                        invalidText={i18n.t('validation.invalid.required')}\r\n                                        invalid={this.state.invalid['enhancementDescription']} \r\n                                    />\r\n                                    <Button kind=\"primary\" tabIndex={0} type=\"submit\"> {i18n.t('buttons.submit')}  </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            </div>    \r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport EnhancementRequest from '../components/Forms/enhancementRequest';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css'\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\n\r\nclass FormsEnhancementRequestElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <EnhancementRequest serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-enhancement-request-widget', FormsEnhancementRequestElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport retargetEvents from 'react-shadow-dom-retarget-events';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  keycloakUrl: 'keycloak-url'\r\n};\r\n\r\n\r\nclass AppElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const keycloakUrl = this.getAttribute(ATTRIBUTES.keycloakUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <App serviceUrl={serviceUrl} keycloakUrl={keycloakUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('app-element', AppElement);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketList from '../components/SubscriptionDetails/TicketList';\r\nimport '../index.scss'\r\n//import './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketListCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketList serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticket-list-widget', TicketListCustomerElement);\r\n\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button} from 'carbon-components-react';\r\nimport { apiTicketingSystemPost, apiTicketingSystemsGet, apiTicketingSystemPut, apiTicketingSystemDelete } from '../../../api/ticketingsystem';\r\nimport { hasKeycloakClientRole } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass TicketingSystem extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            ticketingSystem: '',\r\n            ticketingSystemType:'',\r\n            url: '',\r\n            serviceAccount: '',\r\n            serviceAccount: '',\r\n            systemId: ''\r\n        }\r\n    }\r\n    \r\n    handleChanges = (e) => {\r\n        const input = e.target;\r\n        const name = input.name;\r\n        const value = input.value;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    async createTicketingSystem() {\r\n        const ticketingSystem = {\r\n            url: this.state.url,\r\n            serviceAccount: this.state.serviceAccount,\r\n            serviceAccountSecret: this.state.serviceAccountSecret,\r\n            systemId: this.state.systemId\r\n        }\r\n        await apiTicketingSystemPost(this.props.serviceUrl, ticketingSystem);\r\n    }\r\n\r\n    async updateTicketingSystem() {\r\n        const ticketingSystem = {\r\n            id: this.state.ticketingSystem.id,\r\n            url: this.state.url,\r\n            serviceAccount: this.state.serviceAccount,\r\n            serviceAccountSecret: this.state.serviceAccountSecret,\r\n            systemId: this.state.systemId\r\n        }\r\n        await apiTicketingSystemPut(this.props.serviceUrl, ticketingSystem);\r\n    }\r\n\r\n    async getTicketingSystems() {\r\n        const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl)\r\n        if (ticketingSystems.data.length > 0) {\r\n            const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length-1]\r\n            \r\n            this.setState({\r\n                ticketingSystem: currentTicketingSystem,\r\n                url: currentTicketingSystem.url,\r\n                serviceAccount: currentTicketingSystem.serviceAccount,\r\n                serviceAccountSecret: currentTicketingSystem.serviceAccountSecret,\r\n                systemId: currentTicketingSystem.systemId\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n        if (authenticated) {\r\n            this.getTicketingSystems();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { t, keycloak } = this.props;\r\n        const authenticated = keycloak.initialized && keycloak.authenticated;\r\n      \r\n        const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n      \r\n        if (authenticated && changedAuth) {\r\n            this.getTicketingSystems();\r\n        }\r\n    }\r\n\r\n    handleDelete(e) {\r\n        if (window.confirm(\"Are you sure you want to delete this ticketing system?\")) {\r\n            apiTicketingSystemDelete(this.props.serviceUrl, this.state.ticketingSystem.id);\r\n            window.location.reload(false);\r\n        }\r\n    }\r\n\r\n    handleFormSubmit = (event) => {\r\n        event.preventDefault();\r\n        if (this.state.ticketingSystem === '') {\r\n            this.createTicketingSystem();\r\n        }\r\n        else {\r\n            this.updateTicketingSystem();\r\n        }\r\n        window.location.reload(false);\r\n    };\r\n\r\n    render() { \r\n        const ticketingSystem = ['Jira', 'Other'];\r\n        if (hasKeycloakClientRole('ROLE_ADMIN')) {\r\n            return (\r\n                <div className=\"cp-form\">\r\n                    <Form onSubmit={this.handleFormSubmit}>\r\n                        <div className=\"bx--grid\">\r\n                            <div className=\"bx--row\">\r\n                                <div className=\"bx--col\">\r\n                                    <Select defaultValue=\"ticketing-system\" name=\"ticketingSystemType\" labelText={i18n.t('adminConfig.integrationTicketingSystem.selectBackendTicketingSystem')} value={this.state.ticketingSystemType} onChange={this.handleChanges}>\r\n                                        <SelectItem\r\n                                            text={i18n.t('adminConfig.integrationTicketingSystem.select')}\r\n                                            value=\"ticketing-system\"\r\n                                        />\r\n                                        {ticketingSystem.map((ticketingSystem, i) => <SelectItem key={i} text={ticketingSystem} value={ticketingSystem.toLowerCase()}>{ticketingSystem}</SelectItem>)}\r\n                                    </Select>\r\n                                    <TextInput name=\"serviceAccount\" labelText={i18n.t('adminConfig.integrationTicketingSystem.userName')} value={this.state.serviceAccount} onChange={this.handleChanges}/>\r\n                                    <TextInput name=\"systemId\" labelText={i18n.t('adminConfig.integrationTicketingSystem.projectName')} value={this.state.systemId} onChange={this.handleChanges}/>\r\n                                </div>\r\n                                <div className=\"bx--col\">\r\n                                    <TextInput name=\"url\" labelText={i18n.t('adminConfig.integrationTicketingSystem.url')} value={this.state.url} onChange={this.handleChanges}/>\r\n                                    <TextInput name=\"serviceAccountSecret\" type=\"password\" labelText={i18n.t('adminConfig.integrationTicketingSystem.password')} value={this.state.serviceAccountSecret} onChange={this.handleChanges}/>\r\n                                </div>\r\n                            </div>\r\n                            <Button kind=\"primary\" tabIndex={0} type=\"submit\"> {i18n.t('buttons.submit')}  </Button>\r\n                            {this.state.ticketingSystem ?\r\n                                <Button kind=\"danger\" onClick={() => this.handleDelete()}> Delete </Button> : null\r\n                            }\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            return(<p>You are not authorized to view this</p>)\r\n        }\r\n    }\r\n}\r\n \r\nexport default withKeycloak(TicketingSystem);","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProductVersionPost } from '../../api/productVersion';\r\n\r\nclass AddProductVersionModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      invalid: {}\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    if (typeof this.state.endDate !== 'undefined') {\r\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['endDate'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const productVersion = apiProductVersionPost(this.props.serviceUrl, this.state);\r\n      this.render();\r\n      window.location.reload(false);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProductVersion')}\r\n        modalHeading={i18n.t('adminDashboard.addProductVersion.title')}\r\n        buttonTriggerClassName=\"add-product-version bx--btn bx--btn--tertiary\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-product-version\"\r\n        handleSubmit={this.handleFormSubmit}\r\n      >\r\n        <div className=\"form-container\">\r\n          <p> {i18n.t('adminDashboard.addProductVersion.desc')} </p>\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProductVersion.productVersion')}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"simple\">\r\n              <DatePickerInput\r\n                name=\"startDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionStartDate')}\r\n                value={this.state.startDate}\r\n                onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['startDate']}\r\n              />\r\n            </DatePicker>\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"simple\">\r\n              <DatePickerInput\r\n                name=\"endDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionEndDate')}\r\n                value={this.state.endDate}\r\n                onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['endDate']}\r\n              />\r\n            </DatePicker>\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProductVersionModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  ToggleSmall,\r\n  Button\r\n} from 'carbon-components-react';\r\nimport { SubtractAlt16 } from '@carbon/icons-react';\r\nimport { apiProductVersionsGet, apiUpdateProductVersionsStatus } from '../../../api/productVersion';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport AddProductVersionModal from '../AddProductVersionModal';\r\nimport { hasKeycloakClientRole } from '../../../api/helpers';\r\n\r\nclass ProductVersion extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      data: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n      this.getProductVersions();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n        this.getProductVersions();\r\n      }\r\n    }\r\n  }\r\n\r\n  async getProductVersions() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const productVersions = await apiProductVersionsGet(this.props.serviceUrl);\r\n\r\n      this.setState({\r\n        data: productVersions\r\n      });\r\n    }\r\n  }\r\n\r\n  async handleToggleChange(id) {\r\n    await apiUpdateProductVersionsStatus(this.props.serviceUrl, id);\r\n  }\r\n\r\n  render() {\r\n    if (hasKeycloakClientRole('ROLE_ADMIN') || hasKeycloakClientRole('ROLE_SUPPORT')) {\r\n      return (\r\n        <div>\r\n          <DataTable rows={rowData} headers={headerData}>\r\n            {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n              <TableContainer>\r\n                <Table {...getTableProps()}>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      {headers.map(header => (\r\n                        <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\r\n                      ))}\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Object.keys(this.state.data).length !== 0\r\n                      ? this.state.data.data.map((productVersion, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{productVersion.name}</TableCell>\r\n                            <TableCell>\r\n                              <ToggleSmall\r\n                                onClick={() => this.handleToggleChange(productVersion.id)}\r\n                                aria-label=\"toggle button\"\r\n                                id={productVersion.id}\r\n                                defaultToggled={productVersion.status ? true : false}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>{productVersion.startDate}</TableCell>\r\n                            <TableCell>{productVersion.endDate}</TableCell>\r\n                          </TableRow>\r\n                        ))\r\n                      : null}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            )}\r\n          </DataTable>\r\n          <br />\r\n          <AddProductVersionModal serviceUrl={this.props.serviceUrl} />\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return(<p>You are not authorized to view this</p>)\r\n    }\r\n  }\r\n}\r\n\r\nconst headerData = [\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.entandoVersion'),\r\n    key: 'entVersion'\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.status'),\r\n    key: 'status'\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.startDate'),\r\n    key: 'startDate'\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.supportEndDate'),\r\n    key: 'endDate'\r\n  }\r\n];\r\n\r\nconst rowData = [\r\n  {\r\n    id: 'a',\r\n    entVersion: '5.2',\r\n    status: <ToggleSmall aria-label=\"toggle button\" defaultToggled id=\"status-1\" />,\r\n    startDate: 'April, 2018',\r\n    endDate: 'April, 2022'\r\n  },\r\n  {\r\n    id: 'b',\r\n    entVersion: '6.3',\r\n    status: <ToggleSmall aria-label=\"toggle button\" id=\"status-2\" />,\r\n    startDate: 'Jile, 2019',\r\n    endDate: 'April, 2023'\r\n  },\r\n  {\r\n    id: 'c',\r\n    entVersion: '6.2',\r\n    status: <ToggleSmall aria-label=\"toggle button\" defaultToggled id=\"status-3\" />,\r\n    startDate: 'September, 2020',\r\n    endDate: 'April, 2024'\r\n  }\r\n];\r\n\r\nexport default withKeycloak(ProductVersion);\r\n","import React from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem, Tile } from 'carbon-components-react';\r\nimport TicketingSystem from './TicketingSystem';\r\nimport ProductVersion from './ProductVersion';\r\n\r\nconst adminConfig = [\r\n  {\r\n    label: (\r\n      <div>\r\n        <p className=\"title\">{i18n.t('adminConfig.integrationTicketingSystem.title')}</p>\r\n        <p className=\"desc\">{i18n.t('adminConfig.integrationTicketingSystem.desc')}</p>\r\n      </div>\r\n    ),\r\n    content: <TicketingSystem />\r\n  },\r\n  {\r\n    label: (\r\n      <div>\r\n        <p className=\"title\">{i18n.t('adminConfig.manageProductVersion.title')}</p>\r\n        <p className=\"desc\">{i18n.t('adminConfig.manageProductVersion.desc')}</p>\r\n      </div>\r\n    ),\r\n    content: <ProductVersion />\r\n  }\r\n];\r\n\r\nconst AdminConfiguration = (props) => (\r\n  <div>\r\n    <h3 className=\"pageTitle\">Entando Admin View</h3>\r\n    <div className=\"form-container\">\r\n      <Tile>\r\n        <p className=\"title\">{i18n.t('adminConfig.title')}</p>\r\n        <p class=\"desc\">{i18n.t('adminConfig.desc')}</p>\r\n      </Tile>\r\n      <Accordion>\r\n        {adminConfig.map((item, index) => (\r\n          <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}>\r\n            {index === 0 ? <TicketingSystem serviceUrl={props.serviceUrl} /> : null}\r\n            {index === 1 ? <ProductVersion serviceUrl={props.serviceUrl} /> : null}\r\n          </AccordionItem>\r\n        ))}\r\n      </Accordion>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default AdminConfiguration;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminConfigurationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminConfiguration serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-configuration-widget', AdminConfigurationElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass OpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('open-ticket-widget', OpenTicketElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ManageUser from '../components/Admin/ManageUser/ManageUser';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass ManageUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const keycloakUrl = this.getAttribute(ATTRIBUTES.keycloakUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ManageUser serviceUrl={serviceUrl} keycloakUrl={keycloakUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('manage-user-widget', ManageUserElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AssignUser from '../components/Admin/ManageUser/AssignUser';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  keycloakUrl: 'keycloak-url',\r\n};\r\n\r\nclass AssignUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const keycloakUrl = this.getAttribute(ATTRIBUTES.keycloakUrl) || '';\r\n    \r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AssignUser serviceUrl={serviceUrl} keycloakUrl={keycloakUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('assign-user-widget', AssignUserElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DeleteUser from '../components/Admin/ManageUser/DeleteUser';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass DeleteUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const keycloakUrl = this.getAttribute(ATTRIBUTES.keycloakUrl) || '';\r\n    \r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <DeleteUser serviceUrl={serviceUrl} keycloakUrl={keycloakUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('delete-user-widget', DeleteUserElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketingSystem from '../components/Admin/Configuration/TicketingSystem';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketingSystemElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketingSystem serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticketing-system-widget', TicketingSystemElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ProductVersion from '../components/Admin/Configuration/ProductVersion';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass ProductVersionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ProductVersion serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('product-version-widget', ProductVersionElement);\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SubsciptionForm from '../components/Forms/SubscriptionForm';\r\nimport '../index.scss'\r\nimport './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {\r\n  subscribeToWidgetEvent\r\n} from '../helpers/widgetEvents';\r\nimport {\r\n  KEYCLOAK_EVENT_TYPE,\r\n} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window &&\r\n    window.entando &&\r\n    window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass SubsciptionFormElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    \r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <SubsciptionForm serviceUrl={serviceUrl}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-form-widget', SubsciptionFormElement);\r\n\r\n"],"sourceRoot":""}