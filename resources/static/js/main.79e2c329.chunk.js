(this["webpackJsonpcp-widgets"]=this["webpackJsonpcp-widgets"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);a(23);var n=a(8),i=a(9),r=a(10),s=a(11),c=a(14),o=a(4),l=a(0),d=a.n(l),u=a(12),h=a.n(u),m=a(5),p=a.n(m),b=a(6),j=a(42),v=a.n(j),O=a(75),f=a(76);v.a.defaultLocale="en",v.a.locale="en",v.a.fallbacks=!0,v.a.translations={en:O,it:f};var k=v.a,x=a(129),y=a(119),g=a(102),w=a(123),T=a(15),N=a(127),S=a(115),C=a(126),D=a(116),E=a(83),P=a(2),U=a.n(P),L=(U.a.oneOfType([U.a.func,U.a.shape({current:U.a.elementType}),U.a.shape(null)]),d.a.createContext(null)),I=a(3);function A(e){var t=function(t){Object(r.a)(c,t);var a=Object(s.a)(c);function c(){var t;Object(n.a)(this,c);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=a.call.apply(a,[this].concat(r))).renderWrappedComponent=function(a){var n=t.props,i=n.forwardedRef,r=Object(E.a)(n,["forwardedRef"]);return Object(I.jsx)(e,Object(o.a)(Object(o.a)({},r),{},{ref:i,keycloak:a}))},t}return Object(i.a)(c,[{key:"render",value:function(){return Object(I.jsx)(L.Consumer,{children:this.renderWrappedComponent})}}]),c}(l.Component);return t.defaultProps={forwardedRef:function(){}},Object(l.forwardRef)((function(e,a){return Object(I.jsx)(t,Object(o.a)(Object(o.a)({},e),{},{forwardedRef:a}))}))}var z=function(){return window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""},V=function(e){if(z()){var t=window.entando.keycloak.resourceAccess;if(t)for(var a in t){var n=t[a];if(n.roles&&n.roles.includes(e))return!0}}return!1},R=function(){return{headers:new Headers({Authorization:"Bearer ".concat(z()),"Content-Type":"application/json"})}},F=function(){return{headers:new Headers({Authorization:"Bearer ".concat(z()),"Content-Type":"application/x-www-form-urlencoded"})}},M=function(e){return"".concat(e)},q=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,i=Object(o.a)({},n.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(n.headers.get("X-Total-Count"),10)}:{}),204!==n.status){e.next=6;break}return e.abrupt("return",{data:"",status:n.status});case 6:if(!(n.status>=200&&n.status<300)){e.next=15;break}return e.next=9,n.json();case 9:e.t1=e.sent,e.t2=i,e.t3=n.status,e.t0={data:e.t1,headers:e.t2,status:e.t3},e.next=16;break;case 15:e.t0=Promise.reject(new Error(n.statusText||n.status));case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_="api/customers",H=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat(_)),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M("".concat(t,"/").concat(_,"/").concat(a)),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_),i=Object(o.a)(Object(o.a)({},R()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_,"/").concat(a,"/projects"),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/").concat(_,"/").concat(a,"/projects/").concat(n),r=Object(o.a)(Object(o.a)({},R()),{},{method:"POST"}),e.abrupt("return",q(i,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat("api/customers/admin")),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q="api/customers/mycustomers",X=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat(Q)),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Q,"/").concat(a,"/projects"),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Z=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(i.handleValidation()){B(i.props.serviceUrl,i.state);i.render(),window.location.reload(!1)}},i.clearValues=function(){document.querySelector("#modal-form-customer").className.includes("is-visible")||i.setState(i.baseState)},i.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}},i.baseState=i.state,i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""===this.state.name&&(t=!1,e.name=!0),""===this.state.customerNumber&&(t=!1,e.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"componentDidMount",value:function(){document.querySelector(".add-customer-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){return Object(I.jsx)(N.a,{buttonTriggerText:k.t("buttons.addCustomer"),modalHeading:k.t("adminDashboard.addCustomer.title"),buttonTriggerClassName:"add-customer bx--btn bx--btn--tertiary add-customer-button",className:"modal-form",id:"modal-form-customer",handleSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",k.t("adminDashboard.addCustomer.desc")," "]}),Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(C.a,{name:"name",labelText:k.t("adminDashboard.addCustomer.customerName"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(C.a,{name:"customerNumber",labelText:k.t("adminDashboard.addCustomer.customerNumber"),value:this.state.customerNumber,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(I.jsx)(C.a,{name:"contactName",labelText:k.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactPhone",labelText:k.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactEmail",labelText:k.t("adminDashboard.addCustomer.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(D.a,{name:"notes",labelText:k.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}}]),a}(l.Component)),ee=a(117),te=a(118),ae="api/partners",ne=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ae),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ie="api/projects",re=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat(ie)),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M("".concat(t,"/").concat(ie,"/").concat(a)),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ie),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ie),i=Object(o.a)(Object(o.a)({},R()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),le=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/").concat(ie,"/").concat(a,"/tickets/").concat(n),r=Object(o.a)(Object(o.a)({},R()),{},{method:"POST"}),e.abrupt("return",q(i,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/").concat(ie,"/").concat(a,"/subscriptions/").concat(n),r=Object(o.a)(Object(o.a)({},R()),{},{method:"POST"}),e.abrupt("return",q(i,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/").concat(ie,"/").concat(a,"/users/").concat(n),r=Object(o.a)(Object(o.a)({},R()),{},{method:"POST"}),e.abrupt("return",q(i,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/").concat(ie,"/").concat(a,"/partners/").concat(n),r=Object(o.a)(Object(o.a)({},R()),{},{method:"POST"}),e.abrupt("return",q(i,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(ie,"/nameId/"),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat("api/projects/admin")),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat("api/projects/myprojects")),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(i.handleValidation()){var t={name:i.state.name,partnerNumber:i.state.partnerNumber,notes:i.state.notes};i.partnerPost(t)}},i.clearValues=function(){document.querySelector("#modal-form-partner").className.includes("is-visible")||i.setState({projectId:"",name:"",partnerNumber:"",notes:"",invalid:{}})},i.state={projectList:{},projectId:"",name:"",partnerNumber:"",notes:"",invalid:{}},i}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.getProjects()}},{key:"handleValidation",value:function(){var e={},t=!0;return""!==this.state.projectId&&"project-list"!==this.state.projectId||(t=!1,e.projectId=!0),""===this.state.name&&(t=!1,e.name=!0),""===this.state.partnerNumber&&(t=!1,e.partnerNumber=!0),this.setState({invalid:e}),t}},{key:"getProjects",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=7;break}return e.next=5,re(this.props.serviceUrl);case 5:n=e.sent,this.setState({projectList:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"partnerPost",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){e.next=8;break}return e.next=5,ne(this.props.serviceUrl,t);case 5:return i=e.sent,e.next=8,he(this.props.serviceUrl,this.state.projectId,i.data.id);case 8:window.location.reload(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getProjects(),document.querySelector(".add-partner-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){return Object(I.jsx)(N.a,{buttonTriggerText:k.t("buttons.addPartner"),modalHeading:k.t("adminDashboard.addPartner.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:"modal-form-partner",handleSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",k.t("adminDashboard.addPartner.desc")]}),Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)(ee.a,{defaultValue:"project-list",name:"projectId",labelText:k.t("adminDashboard.addPartner.projectList"),value:this.state.projectId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:[Object(I.jsx)(te.a,{text:k.t("adminDashboard.addPartner.selectProject"),value:"project-list"}),0!==Object.keys(this.state.projectList).length?this.state.projectList.data.map((function(e,t){return Object(I.jsx)(te.a,{text:e.name,value:e.id,children:e.name},t)})):null]}),Object(I.jsx)(C.a,{name:"name",labelText:k.t("adminDashboard.addPartner.partnerName"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(C.a,{name:"partnerNumber",labelText:k.t("adminDashboard.addPartner.partnerNumber"),value:this.state.partnerNumber,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.partnerNumber}),Object(I.jsx)(D.a,{name:"notes",labelText:k.t("adminDashboard.addPartner.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}}]),a}(l.Component)),ve=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(console.log(i.state.customerId),i.handleValidation()){for(var t={name:i.state.name,description:i.state.description,systemId:i.state.systemId,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes},a=0;a<i.state.projects.length;a++)if(t.systemId===i.state.projects[a].systemId)return void window.alert("That system id is already in use in another project");i.projectPost(t)}},i.clearValues=function(){document.querySelector("#modal-form-project").className.includes("is-visible")||i.setState({customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}})},i.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""!==this.state.customerId&&"customer-list"!==this.state.customerId||(t=!1,e.customerId=!0),""===this.state.name&&(t=!1,e.name=!0),""===this.state.description&&(t=!1,e.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"getAllProjects",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(this.props.serviceUrl);case 2:t=e.sent,this.setState({projects:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&(this.getCustomers(),this.getAllProjects())}},{key:"getCustomers",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=7;break}return e.next=5,H(this.props.serviceUrl);case 5:n=e.sent,this.setState({customerList:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"projectPost",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){e.next=8;break}return e.next=5,ce(this.props.serviceUrl,t);case 5:return i=e.sent,e.next=8,W(this.props.serviceUrl,this.state.customerId,i.data.id);case 8:window.location.reload(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getCustomers(),this.getAllProjects(),document.querySelector(".add-project-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e;return Object(I.jsx)(N.a,{buttonTriggerText:k.t("buttons.addProject"),modalHeading:"Add a project",buttonTriggerClassName:"add-project bx--btn bx--btn--tertiary add-project-button",className:"modal-form",id:"modal-form-project",handleSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",k.t("adminDashboard.addProject.desc")," "]}),Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)(ee.a,(e={defaultValue:"customer-list",name:"customerId",labelText:k.t("adminDashboard.addProject.customerList")},Object(T.a)(e,"defaultValue",{label:"Select Dept",value:0}),Object(T.a)(e,"value",this.state.customerId),Object(T.a)(e,"onChange",this.handleChanges),Object(T.a)(e,"invalidText",k.t("validation.invalid.required")),Object(T.a)(e,"invalid",this.state.invalid.customerId),Object(T.a)(e,"children",[Object(I.jsx)(te.a,{text:k.t("adminDashboard.addProject.selectCustomer"),value:"customer-list"}),0!==Object.keys(this.state.customerList).length?this.state.customerList.data.map((function(e,t){return Object(I.jsx)(te.a,{text:e.name,value:e.id,children:e.name},t)})):null]),e)),Object(I.jsx)(C.a,{name:"name",labelText:k.t("adminDashboard.addProject.projectName"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(C.a,{name:"description",labelText:k.t("adminDashboard.addProject.projectDesc"),value:this.state.description,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(I.jsx)(C.a,{name:"systemId",labelText:k.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactName",labelText:k.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactPhone",labelText:k.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactEmail",labelText:k.t("adminDashboard.addProject.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(D.a,{name:"notes",labelText:k.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}}]),a}(l.Component)),Oe=a(120),fe=a(125),ke=a(66),xe=a(64),ye=a(67),ge=a(68),we=a(70),Te=a(65),Ne=a(36),Se=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?t:null},Ce=function(e){var t=e.children,a=e.keycloak;return a.initialized&&a.authenticated?null:t},De=a(25),Ee=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(i.handleValidation()){for(var t={id:i.props.project.id,customer:i.props.project.customer,name:i.state.name,description:i.state.description,systemId:i.state.systemId,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes},a=0;a<i.state.projects.length;a++)if(t.systemId===i.state.projects[a].systemId&&t.id!==i.state.projects[a].id)return void window.alert("That system id is already in use in another project");i.projectPut(t),window.location.reload(!1)}},i.clearValues=function(){var e=i.props.keycloak,t=e.initialized&&e.authenticated;!document.querySelector("#"+i.state.modalId).className.includes("is-visible")&&t&&i.setState({name:i.props.project.name,description:i.props.project.description,systemId:i.props.project.systemId,contactName:i.props.project.contactName,contactPhone:i.props.project.contactPhone,contactEmail:i.props.project.contactEmail,notes:i.props.project.notes,invalid:{}})},i.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:""},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""===this.state.name&&(t=!1,e.name=!0),""===this.state.description&&(t=!1,e.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&(this.getCustomers(),this.getAllProjects())}},{key:"getCustomers",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=7;break}return e.next=5,H(this.props.serviceUrl);case 5:n=e.sent,this.setState({customerList:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllProjects",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(this.props.serviceUrl);case 2:t=e.sent,this.setState({projects:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"projectPut",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){e.next=6;break}return e.next=5,oe(this.props.serviceUrl,t);case 5:e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&(this.getCustomers(),this.getAllProjects(),this.setState({name:this.props.project.name,description:this.props.project.description,systemId:this.props.project.systemId,contactName:this.props.project.contactName,contactPhone:this.props.project.contactPhone,contactEmail:this.props.project.contactEmail,notes:this.props.project.notes,modalId:"modal-form-project-edit-"+this.props.project.id,buttonId:"edit-project-button-"+this.props.project.id}),document.querySelector(".edit-project-button-"+this.props.project.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var e="bx--btn bx--btn--ghost edit-project-button-"+this.props.project.id;return Object(I.jsx)(N.a,{buttonTriggerText:k.t("buttons.edit"),modalHeading:k.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:e,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",k.t("adminDashboard.addProject.desc")," "]}),Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(C.a,{name:"name",labelText:k.t("adminDashboard.addProject.projectName"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(C.a,{name:"description",labelText:k.t("adminDashboard.addProject.projectDesc"),value:this.state.description,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(I.jsx)(C.a,{name:"systemId",labelText:k.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactName",labelText:k.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactPhone",labelText:k.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactEmail",labelText:k.t("adminDashboard.addProject.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(D.a,{name:"notes",labelText:k.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}}]),a}(l.Component)),Pe=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={projects:{}},i}return Object(i.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=13;break}if(!V("ROLE_ADMIN")&&!V("ROLE_SUPPORT")){e.next=9;break}return e.next=6,J(this.props.serviceUrl,this.props.customerNumber);case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,$(this.props.serviceUrl,this.props.customerNumber);case 11:n=e.sent;case 12:this.setState({projects:n});case 13:this.render();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.fetchData()}},{key:"render",value:function(){var e=this;return Object(I.jsx)("div",{children:Object(I.jsx)(fe.a,{rows:Le,headers:Ue,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,i=t.getTableProps;return Object(I.jsx)(ke.a,{title:k.t("customerDashboard.subscriptions"),description:k.t("customerDashboard.tableDesc"),children:Object(I.jsxs)(xe.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(ye.a,{children:Object(I.jsx)(ge.a,{children:a.map((function(e){return Object(I.jsx)(we.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(I.jsx)(Te.a,{children:0!==Object.keys(e.state.projects).length?e.state.projects.data.map((function(t,a){if(0===t.projectSubscriptions.length)return Object(I.jsxs)(ge.a,{children:[Object(I.jsx)(Ne.a,{children:t.name}),0!==t.partners.length?Object(I.jsx)(Ne.a,{children:t.partners.map((function(e){return Object(I.jsx)("p",{children:e.name})}))}):Object(I.jsx)(Ne.a,{children:"None"}),Object(I.jsx)(Ne.a,{children:"None"}),Object(I.jsx)(Ne.a,{children:"None"}),Object(I.jsx)(Ne.a,{children:"None"}),Object(I.jsx)(Ne.a,{children:"None"}),Object(I.jsx)(Ne.a,{children:t.tickets.length}),Object(I.jsx)(Ne.a,{children:V("ROLE_ADMIN")?Object(I.jsx)(Ee,{project:t,serviceUrl:e.props.serviceUrl}):null})]},a);var n=t.projectSubscriptions[t.projectSubscriptions.length-1];return Object(I.jsxs)(ge.a,{children:[Object(I.jsx)(Ne.a,{children:Object(I.jsx)(De.b,{to:"/subscription-details/".concat(n.id),children:t.name})}),0!==t.partners.length?Object(I.jsx)(Ne.a,{children:t.partners.map((function(e){return Object(I.jsx)("p",{children:e.name})}))}):Object(I.jsx)(Ne.a,{children:"None"}),n.entandoVersion?Object(I.jsx)(Ne.a,{children:n.entandoVersion.name}):Object(I.jsx)(Ne.a,{children:"None"}),Object(I.jsx)(Ne.a,{children:n.status}),Object(I.jsx)(Ne.a,{children:String(new Date(n.startDate).toDateString())}),Object(I.jsx)(Ne.a,{children:String(new Date(new Date(n.startDate).setMonth(new Date(n.startDate).getMonth()+n.lengthInMonths)).toDateString())}),Object(I.jsx)(Ne.a,{children:t.tickets.length}),Object(I.jsx)(Ne.a,{children:V("ROLE_ADMIN")?Object(I.jsx)(Ee,{project:t,serviceUrl:e.props.serviceUrl}):null})]},a)})):null})]}))})}})})}}]),a}(l.Component),Ue=[{header:k.t("customerDashboard.projectName"),key:"projectName"},{header:k.t("customerDashboard.partners"),key:"partners"},{header:k.t("customerDashboard.entandoVersion"),key:"entandoVersion"},{header:k.t("customerDashboard.status"),key:"status"},{header:k.t("customerDashboard.startDate"),key:"startDate"},{header:k.t("customerDashboard.endDate"),key:"endDate"},{header:k.t("customerDashboard.openTickets"),key:"openTickets"},{header:k.t("customerDashboard.action"),key:"action"}],Le=[{id:"a",projectName:Object(I.jsx)("a",{href:"",children:"Supplier Portal"}),partnerName:"Leonardo",entandoVersion:5.2,startDate:"October, 2019",endDate:"October, 2022",openTickets:"5"},{id:"b",projectName:Object(I.jsx)("a",{href:"",children:"Task Manager"}),partnerName:"Veriday",entandoVersion:5.2,startDate:"July, 2019",endDate:"July, 2022",openTickets:"2"},{id:"c",projectName:Object(I.jsx)("a",{href:"",children:"Sales Coordination App"}),partnerName:"Accenture",entandoVersion:6.2,startDate:"September, 2019",endDate:"September, 2022",openTickets:"2"},{id:"d",projectName:Object(I.jsx)("a",{href:"",children:"Website"}),partnerName:"Veriday",entandoVersion:5.2,startDate:"October, 2019",endDate:"October, 2022",openTickets:"1"}],Ie=A(Pe),Ae=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={customer:{}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.getCustomer(this.props.customerNumber)}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.getCustomer(this.props.customerNumber)}},{key:"getCustomer",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.keycloak,!(t.initialized&&t.authenticated)){e.next=7;break}return e.next=5,G(this.props.serviceUrl,this.props.customerNumber);case 5:a=e.sent,this.setState({customer:a.data});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(I.jsx)("div",{className:"customer-details",children:Object(I.jsxs)(x.a,{children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:k.t("customerDashboard.customerName")})," ",this.state.customer.name]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:k.t("customerDashboard.customerId")})," ",this.state.customer.id]})]})})}}]),a}(d.a.Component)),ze=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(i.handleValidation()){var t={id:i.props.customer.id,name:i.state.name,customerNumber:i.state.customerNumber,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes};i.updateCustomer(t),window.location.reload(!1)}},i.clearValues=function(){var e=i.props.keycloak,t=e.initialized&&e.authenticated;!document.querySelector("#"+i.state.modalId).className.includes("is-visible")&&t&&i.setState({name:i.props.customer.name,customerNumber:i.props.customer.customerNumber,contactName:i.props.customer.contactName,contactPhone:i.props.customer.contactPhone,contactEmail:i.props.customer.contactEmail,notes:i.props.customer.notes,invalid:{}})},i.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:""},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""===this.state.name&&(t=!1,e.name=!0),""===this.state.customerNumber&&(t=!1,e.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"updateCustomer",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){e.next=6;break}return e.next=5,K(this.props.serviceUrl,t);case 5:e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&(this.setState({name:this.props.customer.name,customerNumber:this.props.customer.customerNumber,contactName:this.props.customer.contactName,contactPhone:this.props.customer.contactPhone,contactEmail:this.props.customer.contactEmail,notes:this.props.customer.notes,modalId:"modal-form-customer-edit-"+this.props.customer.id,buttonId:"edit-customer-button-"+this.props.customer.id}),document.querySelector(".edit-customer-button-"+this.props.customer.id).addEventListener("click",this.clearValues,!1))}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.setState({name:this.props.customer.name,customerNumber:this.props.customer.customerNumber,contactName:this.props.customer.contactName,contactPhone:this.props.customer.contactPhone,contactEmail:this.props.customer.contactEmail,notes:this.props.customer.notes})}},{key:"render",value:function(){var e="bx--btn bx--btn--ghost edit-customer-button-"+this.props.customer.id;return Object(I.jsx)(N.a,{buttonTriggerText:k.t("buttons.edit"),modalHeading:k.t("adminDashboard.editCustomer.title"),buttonTriggerClassName:e,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",k.t("adminDashboard.editCustomer.desc")," "]}),Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(C.a,{name:"name",labelText:k.t("adminDashboard.addCustomer.customerName"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(C.a,{name:"customerNumber",labelText:k.t("adminDashboard.addCustomer.customerNumber"),value:this.state.customerNumber,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(I.jsx)(C.a,{name:"contactName",labelText:k.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactPhone",labelText:k.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"contactEmail",labelText:k.t("adminDashboard.addCustomer.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(D.a,{name:"notes",labelText:k.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}}]),a}(l.Component)),Ve=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={projects:{},customer:{},authenticated:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.getCustomersProjects(this.props.customerNumber)}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.getCustomersProjects(this.props.customerNumber)}},{key:"getCustomersProjects",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){e.next=16;break}return e.next=5,G(this.props.serviceUrl,t);case 5:if(i=e.sent,!V("ROLE_ADMIN")&&!V("ROLE_SUPPORT")){e.next=12;break}return e.next=9,J(this.props.serviceUrl,t);case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,$(this.props.serviceUrl,t);case 14:r=e.sent;case 15:this.setState({projects:r.data,customer:i.data});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=(e.t,e.keycloak);t.initialized&&t.authenticated;return Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[V("ROLE_CUSTOMER")?Object(I.jsx)(Ae,{serviceUrl:this.props.serviceUrl,customerNumber:this.props.customerNumber}):null,Object(I.jsxs)(Oe.a,{title:this.props.title,children:[V("ROLE_ADMIN")?Object(I.jsx)(ze,{serviceUrl:this.props.serviceUrl,customer:this.state.customer},this.state.customer.id):null,Object(I.jsx)(Ie,{serviceUrl:this.props.serviceUrl,customerNumber:this.props.customerNumber})]})]})})}}]),a}(d.a.Component)),Re=a(82),Fe=a(128),Me=a(121),qe=a(103),_e="api/project-subscriptions",He=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_e,"/").concat(a),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_e),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Be=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_e),i=Object(o.a)(Object(o.a)({},R()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("api/project-subscriptions/mysubscription","/").concat(a),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Je=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(_e,"/renew"),i=Object(o.a)(Object(o.a)({},R()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),We="api/entando-versions",Ye=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(We),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(We,"/").concat(a),i=Object(o.a)(Object(o.a)({},R()),{},{method:"PUT"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(We),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),$e={GOLD:"Gold",PLATINUM:"Platinum"},Ze="REQUESTED",et="ACTIVE",tt=["New","Existing"],at=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n)),i.setState({submitSuccess:!1,submitError:!1})},i.handleFormSubmit=function(e){e.preventDefault(),i.setState({submitSuccess:!1,submitError:!1}),i.handleValidation()&&("new"===i.state.subscriptionType?i.newSubscription().then((function(e){de(i.props.serviceUrl,i.state.projectId,e.data.id),i.setState({submitSuccess:!0,submitError:!1})})).catch((function(e){i.setState({submitSuccess:!1,submitError:!0})})):"existing"===i.state.subscriptionType&&i.renewSubscription().then((function(e){de(i.props.serviceUrl,i.state.projectId,e.data.id),i.setState({submitSuccess:!0,submitError:!1})})).catch((function(e){i.setState({submitSuccess:!1,submitError:!0})})))},i.state={subscriptionType:"",projectId:"",startDate:"",subscriptionLevel:"",subscriptionLength:"",entandoVersionId:"",invalid:{},projects:{},productVersions:[],selectedProjectId:"",submitSuccess:!1,submitError:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.t,e.keycloak);t.initialized&&t.authenticated&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=(t.t,t.keycloak),n=a.initialized&&a.authenticated,i=e.keycloak.authenticated!==n;n&&i&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(this.props.serviceUrl);case 2:return t=e.sent.data,e.next=5,Ye(this.props.serviceUrl);case 5:a=e.sent.data,this.setState({projects:t,productVersions:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.subscriptionType&&(t=!1,e.subscriptionType=!0),""===this.state.projectId&&(t=!1,e.projectId=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),""!==this.state.subscriptionLength&&Number.isInteger(Number.parseInt(this.state.subscriptionLength))||(t=!1,e.subscriptionLength=!0),""===this.state.subscriptionLevel&&(t=!1,e.level=!0),""===this.state.entandoVersionId&&(t=!1,e.entandoVersionId=!0),this.setState({invalid:e}),t}},{key:"newSubscription",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,projectSubscription:{startDate:new Date(this.state.startDate),lengthInMonths:this.state.subscriptionLength,level:this.state.subscriptionLevel,status:this.subscriptionStatus()}},e.next=3,Ge(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renewSubscription",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,projectSubscription:{startDate:new Date(this.state.startDate),lengthInMonths:this.state.subscriptionLength,level:this.state.subscriptionLevel,status:this.subscriptionStatus()}},e.next=3,Je(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscriptionStatus",value:function(){return V("ROLE_ADMIN")?et:Ze}},{key:"setupFormComponents",value:function(){var e=this.state.projects,t=null;null!=e&&Object.keys(e).length>0?(t=Object.keys(e).map((function(t,a){return Object(I.jsx)(te.a,{text:e[t],value:t,children:e[t]},a)}))).unshift(Object(I.jsx)(te.a,{text:k.t("manageUsers.assign.projectList"),value:""},"-1")):t=Object(I.jsx)(te.a,{text:k.t("manageUsers.assign.noProjects"),value:""});var a=Object.entries($e).map((function(e){var t=Object(Re.a)(e,2),a=t[0],n=t[1];return Object(I.jsx)(te.a,{text:n,value:a,children:n},a)}));a.unshift(Object(I.jsx)(te.a,{text:k.t("subscriptionForm.chooseLevel"),value:""},"-1"));var n=this.state.productVersions.map((function(e){return Object(I.jsx)(te.a,{text:e.name,value:e.id,children:e.name},e.id)}));return n.unshift(Object(I.jsx)(te.a,{text:k.t("subscriptionForm.chooseVersion"),value:""},"-1")),{projectList:t,subscriptionLevelList:a,versionList:n}}},{key:"renderForm",value:function(){var e,t=this.setupFormComponents(),a=t.projectList,n=t.subscriptionLevelList,i=t.versionList;return"new"===this.state.subscriptionType?e=Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:Object(I.jsx)("strong",{children:k.t("subscriptionForm.newSubscription")})}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(ee.a,{id:"projectId",name:"projectId",labelText:k.t("subscriptionForm.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a}),Object(I.jsx)(ee.a,{id:"subscriptionLevel",name:"subscriptionLevel",labelText:k.t("subscriptionForm.desiredSubscriptionLevel"),value:this.state.subscriptionLevel,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.level,children:n}),Object(I.jsx)(ee.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:k.t("subscriptionForm.entandoVersion"),value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:i})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(Fe.a,{dateFormat:"m/d/Y",datePickerType:"simple",children:Object(I.jsx)(Me.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:k.t("subscriptionForm.desiredSubscriptionStartDate"),value:this.state.startDate,onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(C.a,{id:"subscriptionLength",name:"subscriptionLength",labelText:k.t("subscriptionForm.desiredSubscriptionLength"),value:this.state.subscriptionLength,onChange:this.handleChanges,invalidText:k.t("validation.invalid.number"),invalid:this.state.invalid.subscriptionLength})]})]})]}):"existing"===this.state.subscriptionType&&(e=Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:Object(I.jsx)("strong",{children:k.t("subscriptionForm.renewSubscription")})}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(ee.a,{id:"projectId",name:"projectId",labelText:k.t("subscriptionForm.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a}),Object(I.jsx)(ee.a,{id:"subscriptionLevel",name:"subscriptionLevel",labelText:k.t("subscriptionForm.desiredSubscriptionLevel"),value:this.state.subscriptionLevel,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.level,children:n}),Object(I.jsx)(ee.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:k.t("subscriptionForm.entandoVersion"),value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:i})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(Fe.a,{dateFormat:"m/d/Y",datePickerType:"simple",children:Object(I.jsx)(Me.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:k.t("subscriptionForm.desiredSubscriptionStartDate"),value:this.state.startDate,onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(C.a,{id:"subscriptionLength",name:"subscriptionLength",labelText:k.t("subscriptionForm.desiredSubscriptionLength"),value:this.state.subscriptionLength,onChange:this.handleChanges,invalidText:k.t("validation.invalid.number"),invalid:this.state.invalid.subscriptionLength})]})]})]})),e}},{key:"successErrorMessage",value:function(){var e=V("ROLE_ADMIN"),t=this.state,a=t.subscriptionType,n=t.submitSuccess,i=t.submitError;if("new"===a){if(n)return e?this.createFormMessage("adminSubmitNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(i)return this.createFormMessage("newSubError")}else{if(n)return e?this.createFormMessage("adminRenewNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(i)return this.createFormMessage("renewSubError")}}},{key:"createFormMessage",value:function(e){return Object(I.jsx)("p",{children:k.t("subscriptionForm.".concat(e))})}},{key:"render",value:function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:k.t("subscriptionForm.title")}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)("div",{className:"form-desc",children:[Object(I.jsx)("h4",{children:k.t("subscriptionForm.formTitle")}),Object(I.jsx)("p",{children:k.t("subscriptionForm.desc")})]}),Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsxs)(ee.a,{id:"subscriptionType",name:"subscriptionType",labelText:k.t("subscriptionForm.subscriptionType"),required:!0,value:this.state.subscriptionType,onChange:this.handleChanges,children:[Object(I.jsx)(te.a,{text:k.t("subscriptionForm.selectType"),value:""}),tt.map((function(e,t){return Object(I.jsx)(te.a,{text:e,required:!0,value:e.toLowerCase(),children:e},t)}))]})})}),this.renderForm(),this.state.subscriptionType?Object(I.jsxs)(qe.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit")]}):"",this.successErrorMessage()]})]})})]})}}]),a}(l.Component)),nt=a(49),it="api/portal-users",rt=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(it,"/").concat(a),i=Object(o.a)(Object(o.a)({},R()),{},{method:"DELETE"}),e.next=4,q(n,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),st=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat(it)),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.next=4,q(a,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(it),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.next=4,q(n,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ot=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M("".concat(t,"/").concat(it,"/username/").concat(a)),i=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.next=4,q(n,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),lt=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat("admin/realms/jhipster/users"),{client_id:"admin_cli",username:"admin",password:"admin",grant_type:"password"},n=Object(o.a)(Object(o.a)({},F()),{},{method:"GET"}),e.next=5,q(a,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var dt=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).mapKeycloakUserEmails=function(e){var t=new Map;return e.forEach((function(e){return t.set(e.username,e.email)})),t},i.handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){e.preventDefault();var t=i.state,a=t.projectId,n=t.assignUser;i.handleFormValidation()&&i.assignUserToProject(a,n).then((function(e){201===e.status&&window.location.reload()}))},i.assignUserToProject=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getPortalUserId({username:a,email:i.state.users.get(a)});case 2:return n=e.sent,e.next=5,ue(i.props.serviceUrl,t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),i.getPortalUserId=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,ot(i.props.serviceUrl,t.username);case 4:n=e.sent,a=n.data.id,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0.message.toLowerCase().includes("not found")){e.next=15;break}return e.next=13,i.createPortalUser(t);case 13:r=e.sent,a=r.data.id;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),i.createPortalUser=function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(i.props.serviceUrl,{username:t.username,email:t.email});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.state={projectId:"",assignUser:"",users:new Map,projects:{},invalid:{}},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.t,e.keycloak);console.log(t),t.initialized&&t.authenticated&&this.fetchData(t.authServerUrl)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=(t.t,t.keycloak),n=a.initialized&&a.authenticated,i=e.keycloak.authenticated!==n;n&&i&&this.fetchData(a.authServerUrl)}},{key:"fetchData",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,lt(t);case 3:return e.t1=e.sent.data,a=e.t0.mapKeycloakUserEmails.call(e.t0,e.t1),e.next=7,me(this.props.serviceUrl);case 7:n=e.sent.data,this.setState({users:a,projects:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFormValidation",value:function(){var e={},t=!0,a=this.state,n=a.projectId,i=a.assignUser;return""===n&&(t=!1,e.projectId=!0),""===i&&(t=!1,e.assignUser=!0),this.setState({invalid:e}),t}},{key:"setupFormComponents",value:function(){var e,t=this.state.users,a=this.state.projects,n=e=null;return t.size>0?(e=Object(nt.a)(t.keys()).map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e,children:e},t)}))).unshift(Object(I.jsx)(te.a,{text:k.t("manageUsers.assign.userList"),value:""},"-1")):e=Object(I.jsx)(te.a,{text:k.t("manageUsers.assign.noUsers"),value:""}),null!=a&&Object.keys(a).length>0?(n=Object.keys(a).map((function(e,t){return Object(I.jsx)(te.a,{text:a[e],value:e,children:"test"},t)}))).unshift(Object(I.jsx)(te.a,{text:k.t("manageUsers.assign.projectList"),value:""},"-1")):n=Object(I.jsx)(te.a,{text:k.t("manageUsers.assign.noProjects"),value:""}),{userList:e,projectList:n}}},{key:"render",value:function(){var e=this.setupFormComponents(),t=e.userList,a=e.projectList;return Object(I.jsx)("div",{children:Object(I.jsx)(S.a,{onSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(ee.a,{name:"projectId",labelText:k.t("manageUsers.assign.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a})})}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(ee.a,{name:"assignUser",labelText:k.t("manageUsers.assign.assignUser"),value:this.state.assignUser,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.assignUser,children:t})})}),Object(I.jsxs)(qe.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit")," "]})]})})})}}]),a}(l.Component)),ut=a(122),ht=[{header:k.t("manageUsers.delete.userName"),key:"username"},{header:k.t("manageUsers.delete.userEmail"),key:"email"},{header:k.t("manageUsers.delete.dateAdded"),key:"dateAdded"},{header:k.t("manageUsers.delete.userAccess"),key:"userAccess"}],mt=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleRemoveUser=function(e,t){t.preventDefault();var a=i.state.portalUsers.get(e).id;rt(i.props.serviceUrl,a).then((function(t){if(204===t.status){var a=i.state.portalUsers;a.delete(e),i.setState({portalUsers:a}),i.handleUserDisplay()}}))},i.state={portalUsers:new Map,keycloakUsers:new Map,displayUsers:[],filterText:""},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.t,e.keycloak);t.initialized&&t.authenticated&&this.fetchData(t.authServerUrl)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=(t.t,t.keycloak),n=a.initialized&&a.authenticated,i=e.keycloak.authenticated!==n;n&&i&&this.fetchData(a.authServerUrl)}},{key:"fetchData",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.keycloak,!(a.initialized&&a.authenticated)){e.next=15;break}return e.t0=this,e.next=6,st(this.props.serviceUrl);case 6:return e.t1=e.sent.data,n=e.t0.handleMapFormatting.call(e.t0,e.t1),e.t2=this,e.next=11,lt(t);case 11:e.t3=e.sent.data,i=e.t2.handleMapFormatting.call(e.t2,e.t3),this.setState({portalUsers:n,keycloakUsers:i}),this.handleUserDisplay();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleMapFormatting",value:function(e){return new Map(e.map((function(e){return[e.username,e]})))}},{key:"handleUserDisplay",value:function(){var e=this,t=this.state,a=t.portalUsers,n=t.keycloakUsers,i=Object(nt.a)(a.keys()),r=Object(nt.a)(n.values()).map((function(t){return{id:t.username,username:t.username,email:t.email,dateAdded:"".concat(new Date(t.createdTimestamp).toLocaleString("default",{month:"long"})," ").concat(new Date(t.createdTimestamp).getFullYear()),userAccess:i.includes(t.username)?Object(I.jsxs)("a",{onClick:function(a){return e.handleRemoveUser(t.username,a)},href:"",children:[Object(I.jsx)(ut.a,{fill:"red"}),k.t("manageUsers.delete.removeUser")]}):""}}));this.setState({displayUsers:r})}},{key:"render",value:function(){return Object(I.jsx)(fe.a,{rows:this.state.displayUsers,headers:ht,children:function(e){var t=e.rows,a=e.headers,n=e.getHeaderProps,i=e.getTableProps;return Object(I.jsx)(ke.a,{children:Object(I.jsxs)(xe.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(ye.a,{children:Object(I.jsx)(ge.a,{children:a.map((function(e){return Object(I.jsx)(we.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(I.jsx)(Te.a,{children:t.map((function(e){return Object(I.jsx)(ge.a,{children:e.cells.map((function(e){return Object(I.jsx)(Ne.a,{children:e.value},e.id)}))},e.id)}))})]}))})}})}}]),a}(l.Component)),pt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).userFunctionality=[{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:k.t("manageUsers.assign.title")}),Object(I.jsx)("p",{className:"desc",children:"Assign a user to an existing project"})]}),content:Object(I.jsx)(dt,{serviceUrl:i.props.serviceUrl,keycloakUrl:i.props.keycloakUrl}),open:!0},{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:k.t("manageUsers.manage.title")}),Object(I.jsx)("p",{className:"desc",children:"View and delete existing users"})]}),content:Object(I.jsx)(mt,{serviceUrl:i.props.serviceUrl,keycloakUrl:i.props.keycloakUrl}),open:!1}],i}return Object(i.a)(a,[{key:"render",value:function(){return V("ROLE_ADMIN")?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:"Entando Admin View"}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsx)(g.a,{children:this.userFunctionality.map((function(e,t){return Object(I.jsx)(Oe.a,{index:t,title:e.label,description:e.description,open:e.open,children:Object(I.jsx)("p",{children:e.content})},t.toString())}))})})]}):Object(I.jsx)("p",{children:"You are not authorized to view this"})}}]),a}(l.Component),bt=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleSearch=function(t){if("Enter"===t.key){var a=e.state.customers.filter((function(e){return e.name.toLowerCase().startsWith(t.target.value.toLowerCase())}));e.setState({filteredCustomers:a,currentPage:0})}else""!==t.target.value&&void 0!==t.target.value||e.setState({filteredCustomers:e.state.customers});e.forceUpdate()},e.state={customers:{},customersProjects:{},role:"",filteredCustomers:{},currentPage:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCustomers()}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.getCustomers()}},{key:"getCustomers",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=13;break}if(!V("ROLE_ADMIN")&&!V("ROLE_SUPPORT")){e.next=9;break}return e.next=6,Y(this.props.serviceUrl);case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,X(this.props.serviceUrl);case 11:n=e.sent;case 12:this.setState({customers:n.data,filteredCustomers:n.data});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=1;t=0!==Object.keys(this.state.filteredCustomers).length?Math.ceil(this.state.filteredCustomers.length/5):1;return Object(I.jsxs)("div",{className:"admin-dashboard",children:[V("ROLE_ADMIN")?Object(I.jsxs)("h3",{className:"pageTitle",children:[k.t("adminDashboard.title")," Admin ",k.t("adminDashboard.view")]}):V("ROLE_SUPPORT")?Object(I.jsxs)("h3",{className:"pageTitle",children:[k.t("adminDashboard.title")," Support ",k.t("adminDashboard.view")]}):V("ROLE_CUSTOMER")?Object(I.jsxs)("h3",{className:"pageTitle",children:[k.t("adminDashboard.title")," Customer ",k.t("adminDashboard.view")]}):V("ROLE_PARTNER")?Object(I.jsxs)("h3",{className:"pageTitle",children:[k.t("adminDashboard.title")," Partner ",k.t("adminDashboard.view")]}):null,V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_PARTNER")?Object(I.jsxs)(x.a,{children:[Object(I.jsx)("p",{className:"title",children:k.t("adminDashboard.allCustomers")}),Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(y.a,{onChange:this.handleSearch,id:"search",placeHolderText:k.t("adminDashboard.searchText"),onKeyPress:this.handleSearch})}),V("ROLE_ADMIN")?Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsxs)("div",{children:[Object(I.jsx)(je,{serviceUrl:this.props.serviceUrl}),Object(I.jsx)(Z,{serviceUrl:this.props.serviceUrl}),Object(I.jsx)(ve,{serviceUrl:this.props.serviceUrl})]})}):null]})]}):null,Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsx)(g.a,{children:0!==Object.keys(this.state.customers).length?this.state.filteredCustomers.map((function(t,a){var n=5*(e.state.currentPage+1)-1,i=5*e.state.currentPage;return(V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_CUSTOMER")||V("ROLE_PARTNER"))&&a>=i&&a<=n?Object(I.jsx)(Ve,{serviceUrl:e.props.serviceUrl,customerNumber:t.id,title:t.name},t.id):null})):null}),Object(I.jsx)(w.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(e.state.currentPage),totalItems:Number(t),itemsShown:Number(1),onChange:function(t){return e.setState({currentPage:t})}}),{},{cssClass:"pagination-right"}))]})]})}}]),a}(d.a.Component)),jt=(a(21),function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}}),vt="keycloak",Ot=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ft={hidden:"hidden",locale:"locale",paginationMode:"pagination-mode",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url"},kt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Ot(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ot()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ot()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(ft.serviceUrl)||"",t=this.getAttribute(ft.keycloakUrl)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(bt,{serviceUrl:e,keycloakUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-dashboard-widget",kt);var xt=a(18),yt="api/tickets/ticketingsystem",gt=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n){var i,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/").concat(yt,"/").concat(a,"/").concat(n),r=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(i,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),wt=function(){var e=Object(b.a)(p.a.mark((function e(t,a,n,i){var r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(yt,"/").concat(a,"/").concat(n),s=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:i?JSON.stringify(i):null}),e.abrupt("return",q(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,i){return e.apply(this,arguments)}}(),Tt="api/ticketing-systems",Nt=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Tt,"/").concat(a),i=Object(o.a)(Object(o.a)({},R()),{},{method:"DELETE"}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),St=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=M("".concat(t,"/").concat(Tt)),n=Object(o.a)(Object(o.a)({},R()),{},{method:"GET"}),e.abrupt("return",q(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Tt),i=Object(o.a)(Object(o.a)({},R()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(b.a)(p.a.mark((function e(t,a){var n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Tt),i=Object(o.a)(Object(o.a)({},R()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",q(n,i));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Et=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={tickets:{}},i}return Object(i.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,i,r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=24;break}return e.prev=3,e.next=6,se(this.props.serviceUrl,this.props.projectId);case 6:return n=e.sent,e.next=9,St(this.props.serviceUrl);case 9:return i=e.sent,r=i.data[i.data.length-1],console.log(this.props.serviceUrl),console.log(n.data.systemId),console.log(r.systemId),e.next=16,gt(this.props.serviceUrl,r.systemId,n.data.systemId);case 16:for(s=e.sent,c=0;c<s.data.length;c++)le(this.props.serviceUrl,this.props.projectId,s.data[c].id);this.setState({tickets:s}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),console.log(e.t0);case 24:case"end":return e.stop()}}),e,this,[[3,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&(V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_CUSTOMER")||V("ROLE_PARTNER"))&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&(V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_CUSTOMER")||V("ROLE_PARTNER"))&&this.fetchData()}},{key:"render",value:function(){var e=this;return Object(I.jsx)("div",{children:Object(I.jsx)(fe.a,{rows:Ut,headers:Pt,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,i=t.getTableProps;return Object(I.jsx)(ke.a,{title:"List of Tickets",description:"Tickets",children:Object(I.jsxs)(xe.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(ye.a,{children:Object(I.jsx)(ge.a,{children:a.map((function(e){return Object(I.jsx)(we.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(I.jsx)(Te.a,{children:0!==Object.keys(e.state.tickets).length?e.state.tickets.data.map((function(e){return Object(I.jsxs)(ge.a,{children:[Object(I.jsx)(Ne.a,{children:e.systemId},e.id),Object(I.jsx)(Ne.a,{children:e.systemId.split("-")[0]},e.id),Object(I.jsx)(Ne.a,{children:e.description},e.id),Object(I.jsx)(Ne.a,{children:e.type},e.id),Object(I.jsx)(Ne.a,{children:new Date(e.createDate).toDateString()},e.id),Object(I.jsx)(Ne.a,{children:Object(I.jsx)("a",{href:"https://jorden-test-partner-portal.atlassian.net/browse/"+e.systemId,target:"_blank",children:"View Ticket"})},e.id)]},e.id)})):Object(I.jsx)("p",{})})]}))})}})})}}]),a}(l.Component),Pt=[{header:"Issue",key:"projectName"},{header:"Project",key:"project"},{header:"Description",key:"description"},{header:"Type",key:"type"},{header:"Creation Date",key:"creationDate"},{header:"Link",key:"openTicket"}],Ut=[{id:"a",projectName:"Ticket1",project:"Leonardo",entandoVersion:6.2,creationDate:"October, 2019",openTicket:Object(I.jsx)("a",{href:"",children:"Open Ticket"})},{id:"a",projectName:"Ticket1",project:"Leonardo",entandoVersion:6.2,creationDate:"October, 2019",openTicket:Object(I.jsx)("a",{href:"",children:"Open Ticket"})},{id:"a",projectName:"Ticket1",project:"Leonardo",entandoVersion:6.2,creationDate:"October, 2019",openTicket:Object(I.jsx)("a",{href:"",children:"Open Ticket"})}],Lt=A(Et),It=a(59),At=a.n(It),zt=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(i.handleValidation()){var t={projectSubscription:{id:i.props.subscription.id,level:i.state.level,status:i.state.status,lengthInMonths:i.state.lengthInMonths,startDate:At()(i.state.startDate).format(),notes:i.state.notes,project:i.props.project,entandoVersion:i.props.subscription.entandoVersion}};i.subscriptionPut(t)}},i.clearValues=function(){document.querySelector("#modal-form-sub-edit").className.includes("is-visible")||i.setState({level:i.props.subscription.level,status:i.props.subscription.status,lengthInMonths:i.props.subscription.lengthInMonths,startDate:At()(i.props.subscription.startDate).calendar(),notes:i.props.subscription.notes,invalid:{}})},i.state={level:"",status:"",lengthInMonths:"",startDate:"",notes:"",invalid:{}},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return"level"===this.state.level&&(t=!1,e.level=!0),"status"===this.state.status&&(t=!1,e.status=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),this.setState({invalid:e}),t}},{key:"componentDidMount",value:function(){this.setState({level:this.props.subscription.level,status:this.props.subscription.status,lengthInMonths:this.props.subscription.lengthInMonths,startDate:At()(this.props.subscription.startDate).calendar(),notes:this.props.subscription.notes}),document.querySelector(".edit-sub-button").addEventListener("click",this.clearValues,!1)}},{key:"subscriptionPut",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){e.next=8;break}return e.next=5,Be(this.props.serviceUrl,t);case 5:e.sent,this.render(),window.location.reload(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(I.jsxs)(N.a,{buttonTriggerText:k.t("buttons.edit"),modalHeading:k.t("editSubscription.title"),buttonTriggerClassName:"add-project bx--btn bx--btn--tertiary edit-sub-button",className:"modal-form",id:"modal-form-sub-edit",handleSubmit:this.handleFormSubmit,children:[Object(I.jsx)("p",{children:" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis. "}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)(ee.a,{name:"level",labelText:"Level",value:this.state.level,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.level,children:[Object(I.jsx)(te.a,{disabled:!0,text:"Select Level",value:"level"}),["GOLD","PLATINUM"].map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e,children:e},t)}))]}),Object(I.jsxs)(ee.a,{name:"status",labelText:"status",value:this.state.status,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.status,children:[Object(I.jsx)(te.a,{disabled:!0,text:"Select Status",value:"status"}),["REQUESTED","PENDING","ACTIVE","EXPIRED"].map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e,children:e},t)}))]}),Object(I.jsx)(Fe.a,{dateFormat:"m/d/Y",datePickerType:"simple",children:Object(I.jsx)(Me.a,{name:"startDate",placeholder:"mm/dd/yyyy",labelText:"Start Date",value:this.state.startDate,onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(C.a,{name:"lengthInMonths",labelText:"Length In Months",value:this.state.lengthInMonths,onChange:this.handleChanges}),Object(I.jsx)(D.a,{name:"notes",labelText:k.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})})]})}}]),a}(l.Component)),Vt="Product Support Subscription Entando Platform",Rt="1(8 Core)",Ft="Free Commercial Open Source",Mt=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={subscription:{},users:{},project:{}},i}return Object(i.a)(a,[{key:"getSubscription",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=30;break}if(e.prev=3,!V("ROLE_ADMIN")&&!V("ROLE_SUPPORT")){e.next=15;break}return e.next=7,He(this.props.serviceUrl,this.props.match.params.id);case 7:if(n=e.sent,i="",!n.data.project){e.next=13;break}return e.next=12,se(this.props.serviceUrl,n.data.project.id);case 12:i=e.sent;case 13:e.next=24;break;case 15:if(!V("ROLE_CUSTOMER")&&!V("ROLE_PARTNER")){e.next=24;break}return e.next=18,Ke(this.props.serviceUrl,this.props.match.params.id);case 18:if(n=e.sent,i="",!n.data.project){e.next=24;break}return e.next=23,se(this.props.serviceUrl,n.data.project.id);case 23:i=e.sent;case 24:this.setState({subscription:n,project:i}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),console.log(e.t0);case 30:case"end":return e.stop()}}),e,this,[[3,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&(V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_CUSTOMER")||V("ROLE_PARTNER"))&&this.getSubscription()}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&(V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_CUSTOMER")||V("ROLE_PARTNER"))&&this.getSubscription()}},{key:"render",value:function(){var e=Vt,t=Rt,a=Ft,n=this.props,i=(n.t,n.keycloak);i.initialized&&i.authenticated;return 0!==Object.keys(this.state.subscription).length&&0!==Object.keys(this.state.project).length?Object(I.jsx)("div",{className:"subscription-details",children:Object(I.jsxs)("div",{children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)("div",{className:"bx--grid",children:Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Description:"})," ",this.state.subscription.data.project.description]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Commitment:"}),""!==this.state.project.data&&0!==Object.keys(this.state.project.data.partners).length?Object(I.jsx)(I.Fragment,{children:this.state.project.data.partners.map((function(e){return Object(I.jsxs)(I.Fragment,{children:[" ",e.name," "]})}))}):Object(I.jsx)(I.Fragment,{children:" None "})]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Type:"})," ",e]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Quantity Request:"})," ",t]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Status:"})," ",this.state.subscription.data.status]})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Level:"})," ",this.state.subscription.data.level]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"Start Date:"})," ",String(new Date(this.state.subscription.data.startDate).toDateString())]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"End Date:"})," ",String(new Date(new Date(this.state.subscription.data.startDate).setMonth(new Date(this.state.subscription.data.startDate).getMonth()+this.state.subscription.data.lengthInMonths)).toDateString())]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:"License:"})," ",a]})]})]})}),V("ROLE_ADMIN")?Object(I.jsx)(zt,{project:this.state.project.data,subscription:this.state.subscription.data,serviceUrl:this.props.serviceUrl}):null]}),Object(I.jsx)("br",{}),Object(I.jsx)(Lt,{projectId:this.state.project.data.id,serviceUrl:this.props.serviceUrl})]})}):Object(I.jsx)("p",{children:"No Data"})}}]),a}(d.a.Component)),qt=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={role:"admin"},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.t,e.keycloak);t.initialized&&t.authenticated}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=(t.t,t.keycloak),n=a.initialized&&a.authenticated;e.keycloak.authenticated}},{key:"render",value:function(){var e=this,t=this.props,a=(t.t,t.keycloak);a.initialized&&a.authenticated;return V("ROLE_ADMIN")||V("ROLE_SUPPORT")||V("ROLE_PARTNER")||V("ROLE_CUSTOMER")?Object(I.jsxs)("div",{id:"entando-customer-portal",children:[Object(I.jsx)(Se,{keycloak:a,children:Object(I.jsx)(De.a,{children:Object(I.jsxs)(xt.c,{children:[Object(I.jsx)(xt.a,{exact:!0,path:"/",render:function(t){return Object(I.jsx)(bt,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,keycloakUrl:e.props.keycloakUrl}))}}),Object(I.jsx)(xt.a,{path:"/subscription-details/:id",render:function(t){return Object(I.jsx)(Mt,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl}))}})]})})}),Object(I.jsx)(Ce,{keycloak:a,children:Object(I.jsx)("p",{children:"Unauthenticated"})})]}):Object(I.jsx)("div",{id:"entando-customer-portal",children:Object(I.jsx)(De.a,{children:Object(I.jsx)(xt.c,{children:Object(I.jsx)(xt.a,{path:"/subscription-details/:id",render:function(t){return Object(I.jsx)(Mt,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl}))}})})})})}}]),a}(l.Component)),_t=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ht="service-url",Gt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=_t(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},_t()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},_t()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ht)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Z,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-add-customer-widget",Gt);var Bt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={roleType:"customer"},e.handleChanges=function(t){var a=t.target,n=a.name,i=a.value;e.setState(Object(T.a)({},n,i))},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(I.jsxs)("div",{className:"role-check",children:[Object(I.jsxs)(ee.a,{defaultValue:"role-type",name:"roleType",labelText:"Select Role(Testing)",value:this.state.roleType,onChange:this.handleChanges,children:[Object(I.jsx)(te.a,{text:"Select Role",value:"role-type"}),["Admin","Customer"].map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e.toLowerCase(),children:e},t)}))]}),this.renderForm()]})}},{key:"renderForm",value:function(){return"customer"===this.state.roleType?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:"Welcome to Entando Customer Portal"}),Object(I.jsx)(Ae,{}),Object(I.jsx)(Ie,{})]}):"admin"===this.state.roleType?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:"Welcome to Entando Admin View"}),Object(I.jsx)(bt,{})]}):void 0}}]),a}(l.Component),Kt=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Jt="service-url",Wt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Kt(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Kt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Kt()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Jt)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Bt,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-rolecheck-widget",Wt);var Yt=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Qt="service-url",Xt=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Yt(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Yt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Yt()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Qt)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Ie,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("custom-datatable-widget",Xt);var $t=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Zt="service-url",ea=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=$t(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},$t()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},$t()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Zt)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Ae,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("customer-details-widget",ea);var ta=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},aa="service-url",na=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=ta(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ta()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ta()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(aa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Mt,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("subscription-widget",na);var ia=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleChanges=function(t){var a=t.target,n=a.name,i=a.value;e.setState(Object(T.a)({},n,i))},e.handleFormSubmit=function(t){t.preventDefault(),e.handleValidation()&&(e.createTicket(),window.location.reload(!1))},e.state={projects:[],systemId:"",type:"",description:"",priority:"",status:"To Do",createDate:"",updateDate:"",role:"",invalid:{}},e.types=["Bug","Task"],e.priorities=["Lowest","Low","High","Highest"],e}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.systemId&&(t=!1,e.systemId=!0),""===this.state.type&&(t=!1,e.type=!0),""===this.state.description&&(t=!1,e.description=!0),this.setState({invalid:e}),t}},{key:"fetchProjects",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=15;break}if(!V("ROLE_ADMIN")&&!V("ROLE_SUPPORT")){e.next=10;break}return e.next=6,pe(this.props.serviceUrl);case 6:n=e.sent,this.setState({projects:n.data}),e.next=15;break;case 10:if(!V("ROLE_CUSTOMER")&&!V("ROLE_PARTNER")){e.next=15;break}return e.next=13,be(this.props.serviceUrl);case 13:n=e.sent,this.setState({projects:n.data});case 15:this.render();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createTicket",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=7;break}return n={systemId:this.state.systemId,type:this.state.type,description:this.state.description,priority:this.state.priority,status:"To Do",createDate:"2021-02-22T14:14:09-05:00",updateDate:"2021-02-22T14:14:09-05:00"},e.next=6,wt(this.props.serviceUrl,this.state.ticketingSystem.systemId,this.state.systemId,n);case 6:e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTicketingSystem",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(this.props.serviceUrl);case 2:t=e.sent,a=t.data[t.data.length-1],this.setState({ticketingSystem:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props,t=(e.t,e.keycloak);t.initialized&&t.authenticated&&(this.fetchProjects(),this.getTicketingSystem())}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=(t.t,t.keycloak),n=a.initialized&&a.authenticated,i=e.keycloak.authenticated!==n;n&&i&&(this.fetchProjects(),this.getTicketingSystem())}},{key:"render",value:function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:k.t("supportTicketForm.title")}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)("div",{className:"form-desc",children:[Object(I.jsx)("h4",{children:k.t("supportTicketForm.formTitle")}),Object(I.jsx)("p",{children:"Create a support ticket for an existing project"})]}),Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)(ee.a,{defaultValue:"ticketing-system",name:"systemId",labelText:k.t("supportTicketForm.selectProject"),value:this.state.systemId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.systemId,children:[Object(I.jsx)(te.a,{text:k.t("supportTicketForm.select"),value:"ticketing-system"}),0!==Object.keys(this.state.projects).length?this.state.projects.map((function(e,t){return Object(I.jsx)(te.a,{text:e.name,value:e.systemId,children:e.name},t)})):null]}),Object(I.jsxs)(ee.a,{defaultValue:"Task",name:"type",labelText:k.t("supportTicketForm.type"),value:this.state.type,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.type,children:[Object(I.jsx)(te.a,{text:"Select",value:"Task"}),this.types.map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e,children:e},t)}))]}),Object(I.jsxs)(ee.a,{defaultValue:"Low",name:"priority",labelText:k.t("supportTicketForm.priority"),value:this.state.priority,onChange:this.handleChanges,children:[Object(I.jsx)(te.a,{text:"Select",value:"Low"}),this.priorities.map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e,children:e},t)}))]})]})}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(D.a,{labelText:k.t("supportTicketForm.ticketDescription"),placeholder:k.t("supportTicketForm.addticketDescription"),name:"description",value:this.state.description,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(I.jsxs)(qe.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit"),"  "]})]})})]})]})})]})}}]),a}(l.Component)),ra=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},sa="service-url",ca=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=ra(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ra()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ra()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(sa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(ia,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("forms-openticket-widget",ca);var oa=function(){return Object(I.jsxs)("ul",{id:"navigation",children:[Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/",children:"Home"})}),Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/subscription-details",children:"Subscription Details"})}),Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/subscription",children:"New or Renew Subscription"})}),Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/service-ticket",children:"Open Service Ticket"})}),Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/enhancement",children:"Request for Enhancement Process"})}),Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/manage-users",children:"Manage Users"})}),Object(I.jsx)("li",{children:Object(I.jsx)(De.c,{to:"/configuration-settings",children:"Configuration Settings"})})]})},la=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},da="service-url",ua=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=la(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},la()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},la()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(da)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(oa,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("navigation-widget",ua);var ha=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={ticketNo:"",customerName:"",projectName:"",openedBy:"",priority:"",partnerName:"",enhancementDescription:"",invalid:{}},e.handleChanges=function(t){var a=t.target,n=a.name,i=a.value;e.setState(Object(T.a)({},n,i))},e.handleFormSubmit=function(t){console.log(e.state.ticketNo),t.preventDefault();e.handleValidation()},e}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.ticketNo&&(t=!1,e.ticketNo=!0),""===this.state.customerName&&(t=!1,e.customerName=!0),""===this.state.projectName&&(t=!1,e.projectName=!0),""===this.state.openedBy&&(t=!1,e.openedBy=!0),""===this.state.partnerName&&(t=!1,e.partnerName=!0),""===this.state.enhancementDescription&&(t=!1,e.enhancementDescription=!0),this.setState({invalid:e}),t}},{key:"render",value:function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:k.t("enhancementForm.title")}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)("div",{className:"form-desc",children:[Object(I.jsx)("h4",{children:k.t("enhancementForm.formTitle")}),Object(I.jsx)("p",{children:k.t("enhancementForm.desc")})]}),Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(C.a,{name:"ticketNo",labelText:k.t("enhancementForm.ticketNumber"),value:this.state.ticketNo,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.ticketNo}),Object(I.jsx)(C.a,{name:"projectName",labelText:k.t("enhancementForm.projectName"),value:this.state.projectName,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectName}),Object(I.jsx)(C.a,{name:"priority",labelText:k.t("enhancementForm.priority"),value:this.state.priority,onChange:this.handleChanges})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(C.a,{name:"customerName",labelText:k.t("enhancementForm.customerName"),value:this.state.customerName,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.customerName}),Object(I.jsx)(C.a,{name:"openedBy",labelText:k.t("enhancementForm.ticketOpenedBy"),value:this.state.openedBy,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.openedBy}),Object(I.jsx)(C.a,{name:"partnerName",labelText:k.t("enhancementForm.partnerName"),value:this.state.partnerName,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.partnerName})]})]}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(D.a,{labelText:k.t("enhancementForm.enhancementDescription"),placeholder:k.t("enhancementForm.addenhancementDescription"),name:"enhancementDescription",value:this.state.enhancementDescription,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.enhancementDescription}),Object(I.jsxs)(qe.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit"),"  "]})]})})]})]})})]})}}]),a}(l.Component),ma=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},pa="service-url",ba=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=ma(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ma()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ma()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(pa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(ha,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("forms-enhancement-request-widget",ba);a(100);var ja=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},va="service-url",Oa="keycloak-url",fa=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=ja(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ja()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ja()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(va)||"",t=this.getAttribute(Oa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(qt,{serviceUrl:e,keycloakUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("app-element",fa);var ka=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},xa="service-url",ya=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=ka(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ka()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ka()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(xa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Lt,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("ticket-list-widget",ya);var ga=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i,r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(T.a)({},a,n))},r.handleFormSubmit=function(e){e.preventDefault(),""===r.state.ticketingSystem?r.createTicketingSystem():r.updateTicketingSystem(),window.location.reload(!1)},r.state=(i={ticketingSystem:"",ticketingSystemType:"",url:"",serviceAccount:""},Object(T.a)(i,"serviceAccount",""),Object(T.a)(i,"systemId",""),i),r}return Object(i.a)(a,[{key:"createTicketingSystem",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:this.state.url,serviceAccount:this.state.serviceAccount,serviceAccountSecret:this.state.serviceAccountSecret,systemId:this.state.systemId},e.next=3,Ct(this.props.serviceUrl,t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTicketingSystem",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.state.ticketingSystem.id,url:this.state.url,serviceAccount:this.state.serviceAccount,serviceAccountSecret:this.state.serviceAccountSecret,systemId:this.state.systemId},e.next=3,Dt(this.props.serviceUrl,t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTicketingSystems",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(this.props.serviceUrl);case 2:(t=e.sent).data.length>0&&(a=t.data[t.data.length-1],this.setState({ticketingSystem:a,url:a.url,serviceAccount:a.serviceAccount,serviceAccountSecret:a.serviceAccountSecret,systemId:a.systemId}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props,t=(e.t,e.keycloak);t.initialized&&t.authenticated&&this.getTicketingSystems()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=(t.t,t.keycloak),n=a.initialized&&a.authenticated,i=e.keycloak.authenticated!==n;n&&i&&this.getTicketingSystems()}},{key:"handleDelete",value:function(e){window.confirm("Are you sure you want to delete this ticketing system?")&&(Nt(this.props.serviceUrl,this.state.ticketingSystem.id),window.location.reload(!1))}},{key:"render",value:function(){var e=this;return V("ROLE_ADMIN")?Object(I.jsx)("div",{className:"cp-form",children:Object(I.jsx)(S.a,{onSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)(ee.a,{defaultValue:"ticketing-system",name:"ticketingSystemType",labelText:k.t("adminConfig.integrationTicketingSystem.selectBackendTicketingSystem"),value:this.state.ticketingSystemType,onChange:this.handleChanges,children:[Object(I.jsx)(te.a,{text:k.t("adminConfig.integrationTicketingSystem.select"),value:"ticketing-system"}),["Jira","Other"].map((function(e,t){return Object(I.jsx)(te.a,{text:e,value:e.toLowerCase(),children:e},t)}))]}),Object(I.jsx)(C.a,{name:"serviceAccount",labelText:k.t("adminConfig.integrationTicketingSystem.userName"),value:this.state.serviceAccount,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"systemId",labelText:k.t("adminConfig.integrationTicketingSystem.projectName"),value:this.state.systemId,onChange:this.handleChanges})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(C.a,{name:"url",labelText:k.t("adminConfig.integrationTicketingSystem.url"),value:this.state.url,onChange:this.handleChanges}),Object(I.jsx)(C.a,{name:"serviceAccountSecret",type:"password",labelText:k.t("adminConfig.integrationTicketingSystem.password"),value:this.state.serviceAccountSecret,onChange:this.handleChanges})]})]}),Object(I.jsxs)(qe.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit"),"  "]}),this.state.ticketingSystem?Object(I.jsx)(qe.a,{kind:"danger",onClick:function(){return e.handleDelete()},children:" Delete "}):null]})})}):Object(I.jsx)("p",{children:"You are not authorized to view this"})}}]),a}(l.Component)),wa=a(124),Ta=A(function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;i.setState(Object(T.a)({},a,n))},i.handleFormSubmit=function(e){if(i.handleValidation()){Xe(i.props.serviceUrl,i.state);i.render(),window.location.reload(!1)}},i.clearValues=function(){document.querySelector("#modal-form-product-version").className.includes("is-visible")||i.setState(i.baseState)},i.state={name:"",startDate:"",endDate:"",invalid:{}},i.baseState=i.state,i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.endDate=!0)),this.setState({invalid:e}),t}},{key:"componentDidMount",value:function(){document.querySelector(".add-product-version-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){return Object(I.jsx)(N.a,{buttonTriggerText:k.t("buttons.addProductVersion"),modalHeading:k.t("adminDashboard.addProductVersion.title"),buttonTriggerClassName:"add-product-version bx--btn bx--btn--tertiary add-product-version-button",className:"modal-form",id:"modal-form-product-version",handleSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",k.t("adminDashboard.addProductVersion.desc")," "]}),Object(I.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(C.a,{name:"name",labelText:k.t("adminDashboard.addProductVersion.productVersion"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(Fe.a,{dateFormat:"m/d/Y",datePickerType:"simple",children:Object(I.jsx)(Me.a,{name:"startDate",placeholder:"mm/dd/yyyy",labelText:k.t("adminDashboard.addProductVersion.productVersionStartDate"),value:this.state.startDate,onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(Fe.a,{dateFormat:"m/d/Y",datePickerType:"simple",children:Object(I.jsx)(Me.a,{name:"endDate",placeholder:"mm/dd/yyyy",labelText:k.t("adminDashboard.addProductVersion.productVersionEndDate"),value:this.state.endDate,onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})]})})}}]),a}(l.Component)),Na=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={data:""},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){(V("ROLE_ADMIN")||V("ROLE_SUPPORT"))&&this.getProductVersions()}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&(V("ROLE_ADMIN")||V("ROLE_SUPPORT"))&&this.getProductVersions()}},{key:"getProductVersions",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,t.t,a=t.keycloak,!(a.initialized&&a.authenticated)){e.next=7;break}return e.next=5,Ye(this.props.serviceUrl);case 5:n=e.sent,this.setState({data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleToggleChange",value:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(this.props.serviceUrl,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return V("ROLE_ADMIN")||V("ROLE_SUPPORT")?Object(I.jsxs)("div",{children:[Object(I.jsx)(fe.a,{rows:Ca,headers:Sa,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,i=t.getTableProps;return Object(I.jsx)(ke.a,{children:Object(I.jsxs)(xe.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(ye.a,{children:Object(I.jsx)(ge.a,{children:a.map((function(e){return Object(I.jsx)(we.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(I.jsx)(Te.a,{children:0!==Object.keys(e.state.data).length?e.state.data.data.map((function(t,a){return Object(I.jsxs)(ge.a,{children:[Object(I.jsx)(Ne.a,{children:t.name}),Object(I.jsx)(Ne.a,{children:Object(I.jsx)(wa.a,{onClick:function(){return e.handleToggleChange(t.id)},"aria-label":"toggle button",id:t.id,defaultToggled:!!t.status})}),Object(I.jsx)(Ne.a,{children:t.startDate}),Object(I.jsx)(Ne.a,{children:t.endDate})]},a)})):null})]}))})}}),Object(I.jsx)("br",{}),Object(I.jsx)(Ta,{serviceUrl:this.props.serviceUrl})]}):Object(I.jsx)("p",{children:"You are not authorized to view this"})}}]),a}(l.Component),Sa=[{header:k.t("adminConfig.manageProductVersion.entandoVersion"),key:"entVersion"},{header:k.t("adminConfig.manageProductVersion.status"),key:"status"},{header:k.t("adminConfig.manageProductVersion.startDate"),key:"startDate"},{header:k.t("adminConfig.manageProductVersion.supportEndDate"),key:"endDate"}],Ca=[{id:"a",entVersion:"5.2",status:Object(I.jsx)(wa.a,{"aria-label":"toggle button",defaultToggled:!0,id:"status-1"}),startDate:"April, 2018",endDate:"April, 2022"},{id:"b",entVersion:"6.3",status:Object(I.jsx)(wa.a,{"aria-label":"toggle button",id:"status-2"}),startDate:"Jile, 2019",endDate:"April, 2023"},{id:"c",entVersion:"6.2",status:Object(I.jsx)(wa.a,{"aria-label":"toggle button",defaultToggled:!0,id:"status-3"}),startDate:"September, 2020",endDate:"April, 2024"}],Da=A(Na),Ea=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).adminConfig=[{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:k.t("adminConfig.integrationTicketingSystem.title")}),Object(I.jsx)("p",{className:"desc",children:k.t("adminConfig.integrationTicketingSystem.desc")})]}),content:Object(I.jsx)(ga,{serviceUrl:i.props.serviceUrl})},{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:k.t("adminConfig.manageProductVersion.title")}),Object(I.jsx)("p",{className:"desc",children:k.t("adminConfig.manageProductVersion.desc")})]}),content:Object(I.jsx)(Da,{serviceUrl:i.props.serviceUrl})}],i}return Object(i.a)(a,[{key:"render",value:function(){return V("ROLE_ADMIN")?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:"Entando Admin View"}),Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)("p",{className:"title",children:"Admin Configuration"}),Object(I.jsx)("p",{class:"desc",children:"Configure the Ticketing System and Entando Versions below"})]}),Object(I.jsx)(g.a,{children:this.adminConfig.map((function(e,t){return Object(I.jsx)(Oe.a,{index:t,title:e.label,description:e.description,children:Object(I.jsx)("p",{children:e.content})},t.toString())}))})]})]}):Object(I.jsx)("p",{children:"You are not authorized to view this"})}}]),a}(d.a.Component),Pa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ua="service-url",La=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Pa(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Pa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Pa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ua)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Ea,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-configuration-widget",La);var Ia=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Aa="service-url",za=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Ia(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ia()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ia()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Aa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(ia,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("open-ticket-widget",za);var Va=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ra="service-url",Fa="keycloak-url",Ma=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Va(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Va()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Va()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ra)||"",t=this.getAttribute(Fa)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(pt,{serviceUrl:e,keycloakUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("manage-user-widget",Ma);var qa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},_a="service-url",Ha="keycloak-url",Ga=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=qa(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},qa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},qa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(_a)||"",t=this.getAttribute(Ha)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(dt,{serviceUrl:e,keycloakUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("assign-user-widget",Ga);var Ba=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ka={hidden:"hidden",locale:"locale",paginationMode:"pagination-mode",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url"},Ja=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Ba(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ba()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ba()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ka.serviceUrl)||"",t=this.getAttribute(Ka.keycloakUrl)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(mt,{serviceUrl:e,keycloakUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("delete-user-widget",Ja);var Wa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ya="service-url",Qa=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Wa(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Wa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Wa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ya)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(ga,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("ticketing-system-widget",Qa);var Xa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},$a="service-url",Za=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=Xa(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Xa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Xa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute($a)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(Da,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("product-version-widget",Za);var en=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},tn="service-url",an=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).keycloak=en(),e}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},en()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=jt(vt,(function(){e.keycloak=Object(o.a)(Object(o.a)({},en()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(tn)||"";h.a.render(Object(I.jsx)(L.Provider,{value:this.keycloak,children:Object(I.jsx)(at,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("subscription-form-widget",an)},21:function(e,t,a){},23:function(e,t,a){},75:function(e){e.exports=JSON.parse('{"buttons":{"submit":"Submit","cancel":"Cancel","save":"Save","edit":"Edit","addCustomer":"Add a Customer +","addProject":"Add a Project +","addPartner":"Add a Partner +","addProductVersion":"Add product version +"},"customerDashboard":{"title":"Welcome to Entando Customer Portal","customerName":"Customer Name","customerId":"Customer Id","startDate":"Start Date","endDate":"End Date","projectName":"Project Name","partnerName":"PartnerName","entandoVersion":"Entando Version","openTickets":"OpenTickets","subscriptions":"Subscriptions","tableDesc":"In this table there are open subscriptions","partners":"Partners","status":"Status","action":"Action"},"adminDashboard":{"title":"Welcome to Entando","allCustomers":"All Customers","searchText":"Which customer are you looking for?","view":"View","addProject":{"title":"Add a Project","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerList":"Customer List","selectCustomer":"Select Customer","projectName":"Project Name","projectDesc":"Project Description","systemId":"System Id","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"addCustomer":{"title":"Add a Customer","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerName":"Customer Name","customerNumber":"Customer Number","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"addPartner":{"title":"Add a Partner","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","projectList":"Project List","selectProject":"Select Project","partnerName":"Partner Name","partnerNumber":"Partner Number","notes":"Notes"},"addProductVersion":{"title":"Add a new product version","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","productVersion":"Product Version","productVersionStartDate":"Product Version Start Date","productVersionEndDate":"Product Version End Date"}},"projectDetails":{"description":"Description:","commitment":"Commitment:","type":"Type:","quantityRequest":"Quantity Request:","components":"Components:","level":"Level:","startDate":"Start Date:","endDate":"End Date:","license":"License:","listOfTickets":"List of Tickets","tickets":"Tickets","project":"Project","entandoVersion":"Entando Version","creationDate":"Creation Date","goToTicket":"Go to Ticket"},"supportTicketForm":{"title":"Welcome to Entando Customer Portal","formTitle":"Create new support ticket","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","select":"Select","type":"Type","selectProject":"Select Project","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priority","partnerName":"Partner Name","ticketDescription":"Ticket Description","addticketDescription":"Add Ticket Description"},"enhancementForm":{"title":"Welcome to Entando Customer Portal","formTitle":"Request for Enhancement","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","customerName":"Customer Name","ticketNumber":"Ticket Number","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","partnerName":"Partner Name","priority":"Priority","enhancementDescription":"Enhancement Description","addenhancementDescription":"Add Enhancement Description"},"subscriptionForm":{"title":"Welcome to Entando Portal","formTitle":"New or Renew Subscription","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","subscriptionType":"Subscription Type *","newSubscription":"New Subscription","renewSubscription":"Renew Subscription","selectType":"Select Subscription Type","chooseLevel":"Choose a level","customerName":"Customer Name *","customerNumber":"Customer Number *","customerEmail":"Customer Email*","projectName":"Project Name*","desiredSubscriptionStartDate":"Desired Subscription Start Date *","desiredSubscriptionLevel":"Desired Subscription Level","desiredSubscriptionLength":"Desired Subscription Length (months)","contactName":"Contact Name *","contactEmail":"Contact Email *","contactNumber":"Contact Phone Number","chooseVersion":"Choose Entando version","entandoVersion":"Entando Version","adminSubmitNewSuccess":"Successfully added a project subscription.","adminRenewNewSuccess":"Successfully renewed the latest project subscription.","customerSubmitSuccess":"You will be contacted by an Entando Sales representative to finalize the subscription.","newSubError":"Error in adding a project subscription.","renewSubError":"Error in renewing a project subscription."},"adminConfig":{"title":"Entando Admin View","formTitle":"All Customers","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","integrationTicketingSystem":{"title":"Integration with Ticketing System","desc":"This allows you to manage the ticketing system","selectBackendTicketingSystem":"Select Backend Ticketing System","select":"Select","url":"URL","userName":"User Name","password":"Password","projectName":"Project Name"},"manageProductVersion":{"title":"Manage Product Version","desc":"This let\u2019s you manage the entando product versions","entandoVersion":"Entando Version","status":"Status *","startDate":"Start Date","supportEndDate":"Support End Date"}},"manageUsers":{"title":"Title","assign":{"title":"Assign a new User","desc":"Lorem ipsum, or lipsum as it is sometimes known, is dummy text used in laying out print, graphic or web designs.","projectName":"Project Name","assignUser":"Assign User","selectRole":"Select Role","projectList":"Projects List","userList":"Users List","noUsers":"There are currently no users in the system","noProjects":"There are currently no projects in the system"},"manage":{"title":"Manage all Users","desc":"Lorem ipsum, or lipsum as it is sometimes known, is dummy text used in laying out print, graphic or web designs."},"delete":{"userName":"User Name","userEmail":"User Email","dateAdded":"Date Added","userAccess":"User Access","removeUser":"Remove User"}},"editSubscription":{"title":"Edit Subscription","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","description":"Description","commitment":"Commitment","type":"Type","quantityRequest":"QuantityRequest","components":"Components","level":"Level"},"validation":{"invalid":{"required":"This field is required.","email":"Email is not valid.","date":"Please enter a date in \'mm/dd/yyyy\' format.","number":"This field must be a number."}}}')},76:function(e){e.exports=JSON.parse('{"buttons":{"submit":"Invia","cancel":"Annulla","save":"Salva","edit":"modificare","addCustomer":"Aggiungi un cliente +","addProject":"Aggiungi un progetto +","addPartner":"Aggiungi un partner +","addProductVersion":"Aggiungi la versione del prodotto +"},"customerDashboard":{"title":"Benvenuto nel Portale Clienti Entando","customerName":"Nome del cliente","customerId":"Identificativo del cliente","startDate":"Data d\'inizio","endDate":"Data di fine","projectName":"Nome del progetto","partnerName":"Nome partner","entandoVersion":"Versione Entando","openTickets":"Biglietti aperti","subscriptions":"Abbonamenti","tableDesc":"In questa tabella ci sono iscrizioni aperte","partners":"Partner","status":"Stato","action":"Azione"},"adminDashboard":{"title":"Benvenuti a Entando","allCustomers":"Tutti i clienti","searchText":"Quale cliente stai cercando?","view":"Visualizza","addProject":{"title":"Aggiungi un progetto","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerList":"Elenco clienti","selectCustomer":"Seleziona cliente","projectName":"Nome del progetto","projectDesc":"descrizione del progetto","systemId":"ID sistema","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti","editTitle":"Modifica partner"},"addCustomer":{"title":"Aggiungi un cliente","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerName":"Nome del cliente","customerNumber":"Numero cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"addPartner":{"title":"Aggiungi un partner","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","projectList":"Elenco progetti","selectProject":"Seleziona Progetto","partnerName":"Nome partner","partnerNumber":"Numero partner","notes":"Appunti"},"addProductVersion":{"title":"Aggiungi una nuova versione del prodotto","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","productVersion":"Versione del prodotto","productVersionStartDate":"Data di inizio della versione del prodotto","productVersionEndDate":"Data di fine della versione del prodotto"},"editCustomer":{"title":"Modifica cliente","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis."}},"subscriptionForm":{"title":"Benvenuto nel portale Entando","formTitle":"Nuovo o rinnova abbonamento","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","customerType":"Tipo di cliente *","newSubscription":"Nuovo abbonamento","renewSubscription":"Rinnova l\'abbonamento","selectType":"Seleziona il tipo di cliente","chooseOption":"Scegliere un\'opzione","customerName":"Nome del cliente *","customerNumber":"Numero cliente *","customerEmail":"Email del cliente *","projectName":"Nome del progetto *","desiredSubscriptionStartDate":"Data di inizio dell\'abbonamento desiderata *","desiredSubscriptionLevel":"Livello di abbonamento desiderato","desiredSubscriptionLength":"Durata dell\'abbonamento desiderata","contactName":"Nome del contatto *","contactEmail":"Contatto email *","contactNumber":"numero di contatto telefonico"},"editSubscription":{"title":"Modifica abbonamento","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","description":"Descrizione","commitment":"Impegno","type":"genere","quantityRequest":"Quantit\xe0Richiesta","components":"Componenti","level":"Livello"},"adminConfig":{"title":"Entando Admin View","formTitle":"Tutti i clienti","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","integrationTicketingSystem":{"title":"Integrazione con il sistema di ticketing","desc":"Questo ti permette di gestire il sistema di ticketing","selectBackendTicketingSystem":"Seleziona Backend Ticketing System","select":"Selezionare","url":"URL","userName":"Nome utente","password":"Parola d\'ordine","projectName":"Nome del progetto"},"manageProductVersion":{"title":"Gestisci versione prodotto","desc":"Ci\xf2 consente di gestire le versioni del prodotto entando","entandoVersion":"Versione Entando","status":"Stato *","startDate":"data d\'inizio","supportEndDate":"Data di fine del supporto"}},"manageUsers":{"title":"Titolo","assign":{"title":"Assegna un nuovo utente","desc":"Lorem ipsum, or lipsum as it is sometimes known, is dummy text used in laying out print, graphic or web designs.","projectName":"Nome del progetto","assignUser":"Assegna utente","selectRole":"Seleziona ruolo"},"manage":{"title":"Gestisci tutti gli utenti","desc":"Lorem ipsum, or lipsum as it is sometimes known, is dummy text used in laying out print, graphic or web designs."}},"validation":{"invalid":{"required":"Questo campo \xe8 obbligatorio.","email":"L\'email non \xe8 valida.","date":"Inserisci una data nel formato \'mm / gg / aaaa\'."}}}')}},[[101,1,2]]]);
//# sourceMappingURL=main.79e2c329.chunk.js.map